/*! For license information please see main.b28fb498.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Y(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ne(e,t){return e(t)}function Ce(){}var Ae=!1;function je(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ne(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ce(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Re=!1}function Oe(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function Be(e,t,n,r,i,a,o,s,u){Le=!1,Me=null,Oe.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,St,Et=!1,Tt=[],Nt=null,Ct=null,At=null,jt=new Map,Dt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Et=!1,null!==Nt&&Ft(Nt)&&(Nt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),jt.forEach(Ut),Dt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Bt(Nt,e),null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),jt.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=Lt(Nt,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return jt.set(a,Lt(jt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=M({},cn,{view:0,detail:0}),fn=an(hn),dn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),mn=an(M({},hn,{relatedTarget:0})),gn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(yn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return In}var En=M({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Nn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(jn),Rn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,On=null;l&&"documentMode"in document&&(On=document.documentMode);var Ln=l&&"TextEvent"in window&&!On,Mn=l&&(!Pn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Fr(e,0)}function $n(e){if(W(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Yn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Yn=Zn}else Yn=!1;Jn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Gn(t,Wn,e,we(e)),je(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Nr=Sr("animationstart"),Cr=Sr("transitionend"),Ar=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),u(t,[e])}for(var Rr=0;Rr<jr.length;Rr++){var Pr=jr[Rr];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Nr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}je((function(){var r=a,i=we(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Cn;break;case Er:case Tr:case Nr:u=gn;break;case Cr:u=An;break;case"scroll":u=fn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Nn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=De(p,f))&&l.push(Gr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,yi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Wr(d))p++;for(d=0,v=f;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)f=Wr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Wr(l),f=Wr(f)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Xn;else if(Kn(s))if(Jn)m=or;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?bi(r):window,e){case"focusin":(Kn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(y=en()):(Yt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(g=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:g}),y?k.data=y:null!==(y=Bn(n))&&(k.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Yt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=De(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=De(n,a))&&o.unshift(Gr(n,u,s)):i||null!=(u=De(n,a))&&o.push(Gr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Yr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ni=Ii(Ti),Ci=Ii(!1),Ai=Ti;function ji(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ci),Si(Ni)}function Pi(e,t,n){if(Ni.current!==Ti)throw Error(a(168));Ei(Ni,t),Ei(Ci,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ni.current,Ei(Ni,e),Ei(Ci,Ci.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ci),Si(Ni),Ei(Ni,e)):Si(Ci),Ei(Ci,n)}var Fi=null,Ui=!1,Vi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),We(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,$i=null,Xi=1,Ji="";function Yi(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Xi,Wi[Qi++]=Ji,Wi[Qi++]=$i,$i=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Yi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ii(null),ya=null,ka=null,ba=null;function wa(){ba=ka=ya=null}function xa(e){var t=ga.current;Si(ga),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ya=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ya)throw Error(a(308));ka=e,ya.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Na(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function ja(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=M({},h,f);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Lu|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),Oa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),Oa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(nc(t,e,r,n),Oa(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Di(t)?Ai:Ni.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?ji(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,ja(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Di(t)?Ai:Ni.current,i.context=ji(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case D:return f(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(i,h,s[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,h=m}if(v===s.length)return n(i,h),ia&&Yi(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Yi(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Yi(i,v),c}function m(i,s,u,c){var l=O(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var k=d(i,v,y.value,c);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===h?l=k:h.sibling=k,h=k,v=g}if(y.done)return n(i,v),ia&&Yi(i,m),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,c))&&(s=o(y,s,m),null===h?l=y:h.sibling=y,h=y);return ia&&Yi(i,m),l}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Yi(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Oc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Pc(o.type,o.key,o.props,null,r.mode,u)).ref=Ha(r,a,o),u.return=r,r=u)}return s(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,u)).return=r,r=a}return s(r);case D:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(O(o))return m(r,a,o,u);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Xa=$a(!0),Ja=$a(!1),Ya={},Za=Ii(Ya),eo=Ii(Ya),to=Ii(Ya);function no(e){if(e===Ya)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ya),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var so=Ii(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function No(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Lu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Lu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function jo(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Ko(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Uo(9,Po.bind(null,n,r,i,t),void 0,null),null===Cu)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Mo(e)}function Oo(e,t,n){return n((function(){Lo(t)&&Mo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Mo(e){var t=Ca(e,1);null!==t&&nc(t,e,1,-1)}function Fo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function $o(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Lu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Na(e,t,n,r))){nc(n,e,r,ec()),as(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Na(e,t,i,r))&&(nc(n,e,r,i=ec()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Fo,useDebugValue:$o,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Cu)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Cu.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Jo,useReducer:Co,useRef:Vo,useState:function(){return Co(No)},useDebugValue:$o,useDeferredValue:function(e){return Yo(To(),mo.memoizedState,e)},useTransition:function(){return[Co(No)[0],To().memoizedState]},useMutableSource:jo,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1},cs={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(No)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Yo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(No)[0],To().memoizedState]},useMutableSource:jo,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ku||(Ku=!0,Gu=r),fs(0,t)},n}function vs(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Xa(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function _s(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Is(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ks(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ks(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ru,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ru,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ru,Du),Du|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ru,Du),Du|=r;return ws(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Di(n)?Ai:Ni.current;return a=ji(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function Ns(e,t,n,r,i){if(Di(n)){var a=!0;Li(t)}else a=!1;if(Ia(t,i),null===t.stateNode)qs(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=ji(t,c=Di(n)?Ai:Ni.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ka(t,o,r,c),Aa=!1;var f=t.memoizedState;o.state=f,Ma(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ci.current||Aa?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Aa||za(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Sa(u):u=ji(t,u=Di(n)?Ai:Ni.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Ka(t,o,r,u),Aa=!1,f=t.memoizedState,o.state=f,Ma(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ci.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,a,i)}function Cs(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ks(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function js(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ds,Rs,Ps,Os={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Lc(u,i,0,null),e=Oc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Os,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=Oc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Os,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Cu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),nc(r,e,i,-1))}return vc(),Us(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Xi,Wi[Qi++]=Ji,Wi[Qi++]=$i,Xi=e.id,Ji=e.overflow,$i=t),(t=Fs(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Rc(r,s):(s=Oc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ls(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Os,i}return e=(s=e.child).sibling,i=Rc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ws(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Di(t.type)&&Ri(),Hs(t),null;case 3:return r=t.stateNode,io(),Si(Ci),Si(Ni),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ds(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ps(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Yr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Pu&&(Pu=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Hs(t),null;case 10:return xa(t.type._context),Hs(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Gs(o,!1);else{if(0!==Pu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zu&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Hs(t),null}else 2*Je()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ci),Si(Ni),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Ys=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||Zs(n,t);case 6:var r=lu,i=hu;lu=null,fu(e,t,n),hu=i,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Xs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ic(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fu(e,t,n),Xs=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(a(160));du(o,s,i),lu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){Ic(e,e.return,m)}try{nu(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vu(t,e),gu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vu(t,e),gu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":Y(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vu(t,e),gu(e);break;case 13:vu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Je())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||h,vu(t,e),Xs=l):vu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Ys=e,h=e.child;null!==h;){for(f=Ys=h;null!==Ys;){switch(p=(d=Ys).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,Ys=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Ic(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Ic(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){Ys=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Ys;){var i=Ys,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=$s;var c=Xs;if($s=o,(Xs=u)&&!c)for(Ys=i;null!==Ys;)u=(o=Ys).child,22===o.tag&&null!==o.memoizedState?xu(i):null!==u?(u.return=o,Ys=u):xu(i);for(;null!==a;)Ys=a,ku(a,t,n),a=a.sibling;Ys=i,$s=s,Xs=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ys=a):bu(e)}}function bu(e){for(;null!==Ys;){var t=Ys;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&iu(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Ys=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ys=n;break}Ys=t.return}}function wu(e){for(;null!==Ys;){var t=Ys;if(t===e){Ys=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ys=n;break}Ys=t.return}}function xu(e){for(;null!==Ys;){var t=Ys;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Ic(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ic(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Ic(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Ic(t,o,u)}}}catch(u){Ic(t,t.return,u)}if(t===e){Ys=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ys=s;break}Ys=t.return}}var _u,Iu=Math.ceil,Su=b.ReactCurrentDispatcher,Eu=b.ReactCurrentOwner,Tu=b.ReactCurrentBatchConfig,Nu=0,Cu=null,Au=null,ju=0,Du=0,Ru=Ii(0),Pu=0,Ou=null,Lu=0,Mu=0,Fu=0,Uu=null,Vu=null,Bu=0,zu=1/0,qu=null,Ku=!1,Gu=null,Hu=null,Wu=!1,Qu=null,$u=0,Xu=0,Ju=null,Yu=-1,Zu=0;function ec(){return 0!==(6&Nu)?Je():-1!==Yu?Yu:Yu=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==ju?ju&-ju:null!==va.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(a(185));gt(e,n,r),0!==(2&Nu)&&e===Cu||(e===Cu&&(0===(2&Nu)&&(Mu|=n),4===Pu&&sc(e,ju)),rc(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(zu=Je()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Cu?ju:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(uc.bind(null,e)):Bi(uc.bind(null,e)),oi((function(){0===(6&Nu)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Yu=-1,Zu=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ft(e,e===Cu?ju:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Nu;Nu|=2;var o=pc();for(Cu===e&&ju===t||(qu=null,zu=Je()+500,fc(e,t));;)try{yc();break}catch(u){dc(e,u)}wa(),Su.current=o,Nu=i,null!==Au?t=0:(Cu=null,ju=0,t=Pu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ou,fc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ou,fc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vu,qu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bu+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vu,qu),t);break}wc(e,Vu,qu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Iu(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vu,qu),r);break}wc(e,Vu,qu);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vu,Vu=n,null!==t&&oc(t)),e}function oc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sc(e,t){for(t&=~Fu,t&=~Mu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Nu))throw Error(a(327));xc();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ou,fc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vu,qu),rc(e,Je()),null}function cc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(zu=Je()+500,Ui&&zi())}}function lc(e){null!==Qu&&0===Qu.tag&&0===(6&Nu)&&xc();var t=Nu;Nu|=1;var n=Tu.transition,r=kt;try{if(Tu.transition=null,kt=1,e)return e()}finally{kt=r,Tu.transition=n,0===(6&(Nu=t))&&zi()}}function hc(){Du=Ru.current,Si(Ru)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Ci),Si(Ni),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Cu=e,Au=e=Rc(e.current,null),ju=Du=t,Pu=0,Ou=null,Fu=Mu=Lu=0,Vu=Uu=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=Au;try{if(wa(),ho.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,ko=!1,bo=0,Eu.current=null,null===n||null===n.return){Pu=1,Ou=t,Au=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=ju,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Pu&&(Pu=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,ps(0,c,t));break e;case 1:u=c;var y=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function pc(){var e=Su.current;return Su.current=os,null===e?os:e}function vc(){0!==Pu&&3!==Pu&&2!==Pu||(Pu=4),null===Cu||0===(268435455&Lu)&&0===(268435455&Mu)||sc(Cu,ju)}function mc(e,t){var n=Nu;Nu|=2;var r=pc();for(Cu===e&&ju===t||(qu=null,fc(e,t));;)try{gc();break}catch(i){dc(e,i)}if(wa(),Nu=n,Su.current=r,null!==Au)throw Error(a(261));return Cu=null,ju=0,Pu}function gc(){for(;null!==Au;)kc(Au)}function yc(){for(;null!==Au&&!$e();)kc(Au)}function kc(e){var t=_u(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?bc(e):Au=t,Eu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ws(n,t,Du)))return void(Au=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Pu=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Pu&&(Pu=5)}function wc(e,t,n){var r=kt,i=Tu.transition;try{Tu.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qu);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Cu&&(Au=Cu=null,ju=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wu||(Wu=!0,Cc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Eu.current=null,function(e,t){if(ei=Kt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Ys=t;null!==Ys;)if(e=(t=Ys).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ys=e;else for(;null!==Ys;){t=Ys;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ys=e;break}Ys=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,yu(n,e,i),Xe(),Nu=u,kt=s,Tu.transition=o}else e.current=n;if(Wu&&(Wu=!1,Qu=e,$u=i),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,e=Gu,Gu=null,e;0!==(1&$u)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,zi()}(e,t,n,r)}finally{Tu.transition=i,kt=r}return null}function xc(){if(null!==Qu){var e=bt($u),t=Tu.transition,n=kt;try{if(Tu.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,$u=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Ys=e.current;null!==Ys;){var o=Ys,s=o.child;if(0!==(16&Ys.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Ys=l;null!==Ys;){var h=Ys;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Ys=f;else for(;null!==Ys;){var d=(h=Ys).sibling,p=h.return;if(au(h),h===l){Ys=null;break}if(null!==d){d.return=p,Ys=d;break}Ys=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Ys=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ys=s;else e:for(;null!==Ys;){if(0!==(2048&(o=Ys).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ys=y;break e}Ys=o.return}}var k=e.current;for(Ys=k;null!==Ys;){var b=(s=Ys).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Ys=b;else e:for(s=k;null!==Ys;){if(0!==(2048&(u=Ys).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(x){Ic(u,u.return,x)}if(u===s){Ys=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Ys=w;break e}Ys=u.return}}if(Nu=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Tu.transition=t}}return!1}function _c(e,t,n){e=Pa(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Pa(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cu===e&&(ju&n)===n&&(4===Pu||3===Pu&&(130023424&ju)===ju&&500>Je()-Bu?fc(e,0):Fu|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ca(e,t))&&(gt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Cc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Oc(n.children,i,o,t);case I:s=8,i|=8;break;case S:return(e=jc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case C:return(e=jc(13,n,t,i)).elementType=C,e.lanes=o,e;case A:return(e=jc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case T:s=9;break e;case N:s=11;break e;case j:s=14;break e;case D:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=jc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,s,u){return e=new Uc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=jc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ja(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Oi(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=Vc(n,r,!0,e,0,a,0,s,u)).context=zc(null),n=e.current,(a=Ra(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,gt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(nc(e,i,o,a),Oa(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_u=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:As(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(Ei(so,1&so.current),null!==(e=Ks(e,t,n))?e.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Ks(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var i=ji(t,Ni.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ja(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===j)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Ns(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=_s(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ns(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Ma(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=js(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=js(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ks(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Ms(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ci.current){t=Ks(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_a(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_s(e,t,r,i=ma(r.type,i),n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qs(e,t),t.tag=1,Di(r)?(e=!0,Li(t)):e=!1,Ia(t,n),qa(t,r,i),Ga(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Gc(o);s.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,u,n,r)})),u}(n,t,e,i,r);return Gc(o)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Je()),0===(6&Nu)&&(zu=Je()+500,zi()))}break;case 13:lc((function(){var t=Ca(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ca(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),Y(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=cc,Ce=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,cc]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=k.prototype=new y;b.constructor=k,v(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+N(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+N(s=e[c],c);u+=C(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,i,l=a+N(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,y(E),E=-1),p=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!C());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&P(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,S=null,E=-1,T=5,N=-1;function C(){return!(t.unstable_now()-N<T)}function A(){if(null!==S){var e=t.unstable_now();N=e;var n=!0;try{n=S(!0,e)}finally{n?_():(I=!1,S=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,D=j.port2;j.port1.onmessage=A,_=function(){D.postMessage(null)}}else _=function(){g(A,0)};function R(e){S=e,I||(I=!0,_())}function P(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(y(E),E=-1):m=!0,P(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".46493d11.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="e-commerce:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/LargerE-commerce/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunke_commerce=self.webpackChunke_commerce||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return ze},SDK_VERSION:function(){return $t},_DEFAULT_ENTRY_NAME:function(){return Lt},_addComponent:function(){return Vt},_addOrOverwriteComponent:function(){return Bt},_apps:function(){return Ft},_clearComponents:function(){return Gt},_components:function(){return Ut},_getProvider:function(){return qt},_registerComponent:function(){return zt},_removeServiceInstance:function(){return Kt},deleteApp:function(){return Zt},getApp:function(){return Jt},getApps:function(){return Yt},initializeApp:function(){return Xt},onLog:function(){return nn},registerVersion:function(){return tn},setLogLevel:function(){return rn}});var t,r=n(791),i=n(250);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){if(Array.isArray(e))return e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return u(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||l(e,t)||h()}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var p=function(e){return e};var v="beforeunload",m="popstate";function g(e){e.preventDefault(),e.returnValue=""}function y(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function k(){return Math.random().toString(36).substr(2,8)}function b(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function w(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var x=(0,r.createContext)(null);var _=(0,r.createContext)(null);var I=(0,r.createContext)({outlet:null,matches:[]});function S(e,t){if(!e)throw new Error(t)}function E(e,t,n){void 0===n&&(n="/");var r=P(("string"===typeof t?w(t):t).pathname||"/",n);if(null==r)return null;var i=T(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=j(i[o],r);return a}function T(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||S(!1),a.relativePath=a.relativePath.slice(r.length));var o=O([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&S(!1),T(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:A(o,e.index),routesMeta:s})})),t}var N=/^:\w+$/,C=function(e){return"*"===e};function A(e,t){var n=e.split("/"),r=n.length;return n.some(C)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!C(e)})).reduce((function(e,t){return e+(N.test(t)?3:""===t?1:10)}),r)}function j(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=D({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:O([i,l.pathname]),pathnameBase:L(O([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=O([i,l.pathnameBase]))}return a}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=f(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function R(e,t,n){var r,i="string"===typeof e?w(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?w(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:M(a),hash:F(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var O=function(e){return e.join("/").replace(/\/\/+/g,"/")},L=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},M=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},F=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function U(e){V()||S(!1);var t=(0,r.useContext)(x),n=t.basename,i=t.navigator,a=q(e),o=a.hash,s=a.pathname,u=a.search,c=s;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?w(e).pathname:e.pathname}(e),h=null!=l&&l.endsWith("/");c="/"===s?n+(h?"/":""):O([n,s])}return i.createHref({pathname:c,search:u,hash:o})}function V(){return null!=(0,r.useContext)(_)}function B(){return V()||S(!1),(0,r.useContext)(_).location}function z(){V()||S(!1);var e=(0,r.useContext)(x),t=e.basename,n=e.navigator,i=(0,r.useContext)(I).matches,a=B().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),s=(0,r.useRef)(!1);(0,r.useEffect)((function(){s.current=!0}));var u=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=R(e,JSON.parse(o),a);"/"!==t&&(i.pathname=O([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return u}function q(e){var t=(0,r.useContext)(I).matches,n=B().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return R(e,JSON.parse(i),n)}),[e,i,n])}function K(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(I.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function G(e){S(!1)}function H(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,h=e.static,f=void 0!==h&&h;V()&&S(!1);var d=L(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof s&&(s=w(s));var v=s,m=v.pathname,g=void 0===m?"/":m,y=v.search,k=void 0===y?"":y,b=v.hash,I=void 0===b?"":b,E=v.state,T=void 0===E?null:E,N=v.key,C=void 0===N?"default":N,A=(0,r.useMemo)((function(){var e=P(g,d);return null==e?null:{pathname:e,search:k,hash:I,state:T,key:C}}),[d,g,k,I,T,C]);return null==A?null:(0,r.createElement)(x.Provider,{value:p},(0,r.createElement)(_.Provider,{children:o,value:{location:A,navigationType:c}}))}function W(e){var t=e.children,n=e.location;return function(e,t){V()||S(!1);var n,i=(0,r.useContext)(I).matches,a=i[i.length-1],o=a?a.params:{},s=(a&&a.pathname,a?a.pathnameBase:"/"),u=(a&&a.route,B());if(t){var c,l="string"===typeof t?w(t):t;"/"===s||(null==(c=l.pathname)?void 0:c.startsWith(s))||S(!1),n=l}else n=u;var h=n.pathname||"/",f=E(e,{pathname:"/"===s?h:h.slice(s.length)||"/"});return K(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:O([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:O([s,e.pathnameBase])})})),i)}(Q(t),n)}function Q(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==G&&S(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=Q(e.props.children)),t.push(n)}else t.push.apply(t,Q(e.props.children))})),t}function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}function X(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var J=["onClick","reloadDocument","replace","state","target","to"];function Y(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,p({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(m,(function(){if(o)f.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(f.length){if(null!=r){var s=c-r;s&&(o={action:e,location:i,retry:function(){T(-1*s)}},T(s))}}else E(e)}}));var s=t.Pop,u=a(),c=u[0],l=u[1],h=y(),f=y();function x(e){return"string"===typeof e?e:b(e)}function _(e,t){return void 0===t&&(t=null),p(d({pathname:l.pathname,hash:"",search:""},"string"===typeof e?w(e):e,{state:t,key:k()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},x(e)]}function S(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function E(e){s=e;var t=a();c=t[0],l=t[1],h.call({action:s,location:l})}function T(e){i.go(e)}null==c&&(c=0,i.replaceState(d({},i.state,{idx:c}),""));var N={get action(){return s},get location(){return l},createHref:x,push:function e(n,a){var o=t.Push,s=_(n,a);if(S(o,s,(function(){e(n,a)}))){var u=I(s,c+1),l=u[0],h=u[1];try{i.pushState(l,"",h)}catch(f){r.location.assign(h)}E(o)}},replace:function e(n,r){var a=t.Replace,o=_(n,r);if(S(a,o,(function(){e(n,r)}))){var s=I(o,c),u=s[0],l=s[1];i.replaceState(u,"",l),E(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return h.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&r.addEventListener(v,g),function(){t(),f.length||r.removeEventListener(v,g)}}};return N}({window:a}));var s=o.current,u=f((0,r.useState)({action:s.action,location:s.location}),2),c=u[0],l=u[1];return(0,r.useLayoutEffect)((function(){return s.listen(l)}),[s]),(0,r.createElement)(H,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:s})}var Z=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,c=e.to,l=X(e,J),h=U(c),f=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,s=z(),u=B(),c=q(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||b(u)===b(c);s(e,{replace:n,state:o})}}),[u,s,c,a,o,i,e])}(c,{replace:o,state:s,target:u});return(0,r.createElement)("a",$({},l,{href:h,onClick:function(e){n&&n(e),e.defaultPrevented||i||f(e)},ref:t,target:u}))}));function ee(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function te(e){return function(e){if(Array.isArray(e))return c(e)}(e)||ee(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne=[{id:1,list:"Home",class:"bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium  hover:bg-gray-700",url:"/"},{id:2,list:"Product",class:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",url:"/list"},{id:3,list:"Features",class:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",url:"/Feature"}],re=[{id:1,name:"Basic Tee",href:"#",imageSrc:"/pic/Basic_cloth-removebg-preview.png",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"men"},{id:2,name:"Basic Tee",href:"#",imageSrc:"/pic/Basic_t-removebg-preview.png",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"men"},{id:3,name:"Basic Tee",href:"#",imageSrc:"/pic/Basis_t-removebg-preview.png",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"women"},{id:4,name:"Basic Tee",href:"#",imageSrc:"/pic/dress-shirt-img-removebg-preview.png",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"men"},{id:5,name:"Basic Tee",href:"#",imageSrc:"/pic/product-page-01-related-product-04-removebg-preview (1).png",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"women"},{id:6,name:"Basic Tee",href:"#",imageSrc:"/pic/tshirt-img-removebg-preview.png",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"women"},{id:7,name:"Basic Tee",href:"#",imageSrc:"/pic/women-clothes-img.png",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"women"},{id:8,name:"Basic Tee",href:"#",imageSrc:"/pic/product-page-01-related-product-04-removebg-preview (1).png",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"men"},{id:9,name:"Basic Tee",href:"#",imageSrc:"/pic/tshirt-img-removebg-preview.png",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"women"},{id:10,name:"Basic Tee",href:"#",imageSrc:"/images/stock-photo-hipster-igen-teen-pretty-fashion-girl-model-wear-stylish-glasses-headphones-enjoy-listen-new-cool-1564166668.jpg",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"men"},{id:10,name:"Basic Tee",href:"#",imageSrc:"/images/stock-photo-hipster-igen-teen-pretty-fashion-girl-model-wear-stylish-glasses-headphones-enjoy-listen-new-cool-1564166668.jpg",imageAlt:"Front of men's Basic Tee in black.",price:"35",color:"Black",category:"shoe"}],ie=[{id:1,name:"Man T -shirt",price:40,imageSrc:"/pic/dress-shirt-img-removebg-preview.png"},{id:2,name:"Man -shirt",price:50,imageSrc:"/pic/tshirt-img-removebg-preview.png"},{id:3,name:"Woman Scart",price:20,imageSrc:"/pic/women-clothes-img.png"}],ae=[{id:4,name:"Man T -shirt",price:90,imageSrc:"/pic/dress-shirt-img-removebg-preview.png"},{id:5,name:"Man -shirt",price:10,imageSrc:"/pic/tshirt-img-removebg-preview.png"},{id:6,name:"Woman Scart",price:60,imageSrc:"/pic/women-clothes-img.png"}],oe=function(e,t){switch(t.type){case"ADD_TO_CART":return s(s({},e),{},{cart:[].concat(te(e.cart),[s(s({},t.payload),{},{qty:1})])});case"REMOVE_FROM_CART":return s(s({},e),{},{cart:e.cart.filter((function(e){return e.id!==t.payload.id}))});case"Change_Quantity":return s(s({},e),{},{cart:e.cart.filter((function(e){return e.id===t.payload.id?e.qty=t.payload.qty:e.qty}))});default:return e}},se=n(184),ue=r.createContext(),ce=function(e){var t=e.children,n=f((0,r.useReducer)(oe,{products:re,cart:[],totoalPrice:0,totalQuantity:0}),2),i=n[0],a=n[1];return(0,se.jsx)(ue.Provider,{value:{state:i,dispatch:a},children:t})},le=function(){return(0,r.useContext)(ue)};function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function fe(){fe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(I([])));m&&m!==t&&n.call(m,i)&&(p=m);var g=d.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==he(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(k.prototype),s(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(g),s(g,o,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function de(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){de(a,r,i,o,s,"next",e)}function s(e){de(a,r,i,o,s,"throw",e)}o(void 0)}))}}function ve(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}function we(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}function _e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ie(e,t){if(t&&("object"===he(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ke(e)}function Se(e){var t=_e();return function(){var n,r=xe(e);if(t){var i=xe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ee(e,t,n){return Ee=_e()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&be(i,n.prototype),i},Ee.apply(null,arguments)}function Te(e){var t="function"===typeof Map?new Map:void 0;return Te=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ee(e,arguments,xe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),be(n,e)},Te(e)}var Ne=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ne(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ae=function(e){return function(e){var t=Ne(e);return Ce.encodeByteArray(t,!0)}(e).replace(/\./g,"")},je=function(e){try{return Ce.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function De(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=De(e[n],t[n]));return e}var Re=function(){function e(){var t=this;me(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ye(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Pe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(a)),""].join(".")}function Oe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Me(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Fe(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ue(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ve(){var e=Oe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Be(){return"object"===typeof indexedDB}var ze=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(ke(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(ke(a),qe.prototype.create),a}return ye(n)}(Te(Error)),qe=function(){function e(t,n,r){me(this,e),this.service=t,this.serviceName=n,this.errors=r}return ye(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ke(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ze(n,a,t);return o}}]),e}();function Ke(e,t){return e.replace(Ge,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ge=/\{\$([^}]+)}/g;function He(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function We(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Qe(s)&&Qe(u)){if(!We(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Qe(e){return null!==e&&"object"===typeof e}function $e(e){for(var t=[],n=function(){var e=f(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Xe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=f(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Je(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ye(e,t){var n=new Ze(e,t);return n.subscribe.bind(n)}var Ze=function(){function e(t,n){var r=this;me(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ye(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ve(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=et),void 0===r.error&&(r.error=et),void 0===r.complete&&(r.complete=et);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function et(){}function tt(e){return e&&e._delegate?e._delegate:e}var nt=function(){function e(t,n,r){me(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ye(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),rt="[DEFAULT]",it=function(){function e(t,n){me(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ye(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Re;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:rt})}catch(u){}var t,n=ve(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(te(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),te(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ve(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=f(i.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);r===l&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ve(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(OS){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===rt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(OS){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;return this.component?this.component.multipleInstances?e:rt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var at,ot,st=function(){function e(t){me(this,e),this.name=t,this.providers=new Map}return ye(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new it(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ut=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ot||(ot={}));var ct={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},lt=ot.INFO,ht=(a(at={},ot.DEBUG,"log"),a(at,ot.VERBOSE,"log"),a(at,ot.INFO,"info"),a(at,ot.WARN,"warn"),a(at,ot.ERROR,"error"),at),ft=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ht[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},dt=function(){function e(t){me(this,e),this.name=t,this._logLevel=lt,this._logHandler=ft,this._userLogHandler=null,ut.push(this)}return ye(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ot))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ct[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.DEBUG].concat(t)),this._logHandler.apply(this,[this,ot.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ot.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.INFO].concat(t)),this._logHandler.apply(this,[this,ot.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.WARN].concat(t)),this._logHandler.apply(this,[this,ot.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.ERROR].concat(t)),this._logHandler.apply(this,[this,ot.ERROR].concat(t))}}]),e}();var pt,vt;var mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,kt=new WeakMap,bt=new WeakMap;var wt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return gt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||yt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return It(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function xt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vt||(vt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(St(this),n),It(mt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return It(e.apply(St(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[St(this),t].concat(r));return yt.set(a,t.sort?t.sort():[t]),It(a)}}function _t(e){return"function"===typeof e?xt(e):(e instanceof IDBTransaction&&function(e){if(!gt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));gt.set(e,t)}}(e),t=e,(pt||(pt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,wt):e);var t}function It(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(It(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&mt.set(t,e)})).catch((function(){})),bt.set(t,e),t}(e);if(kt.has(e))return kt.get(e);var t=_t(e);return t!==e&&(kt.set(e,t),bt.set(t,e)),t}var St=function(e){return bt.get(e)};var Et,Tt,Nt=["get","getKey","getAll","getAllKeys","count"],Ct=["put","add","delete","clear"],At=new Map;function jt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(At.get(t))return At.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ct.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Nt.includes(n))){var a=function(){var e=pe(fe().mark((function e(t){var a,o,s,u,c,l,h=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return At.set(t,a),a}}}wt=function(e){return s(s({},e),{},{get:function(t,n,r){return jt(t,n)||e.get(t,n,r)},has:function(t,n){return!!jt(t,n)||e.has(t,n)}})}(wt);var Dt=function(){function e(t){me(this,e),this.container=t}return ye(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Rt="@firebase/app",Pt="0.7.29",Ot=new dt("@firebase/app"),Lt="[DEFAULT]",Mt=(a(Et={},Rt,"fire-core"),a(Et,"@firebase/app-compat","fire-core-compat"),a(Et,"@firebase/analytics","fire-analytics"),a(Et,"@firebase/analytics-compat","fire-analytics-compat"),a(Et,"@firebase/app-check","fire-app-check"),a(Et,"@firebase/app-check-compat","fire-app-check-compat"),a(Et,"@firebase/auth","fire-auth"),a(Et,"@firebase/auth-compat","fire-auth-compat"),a(Et,"@firebase/database","fire-rtdb"),a(Et,"@firebase/database-compat","fire-rtdb-compat"),a(Et,"@firebase/functions","fire-fn"),a(Et,"@firebase/functions-compat","fire-fn-compat"),a(Et,"@firebase/installations","fire-iid"),a(Et,"@firebase/installations-compat","fire-iid-compat"),a(Et,"@firebase/messaging","fire-fcm"),a(Et,"@firebase/messaging-compat","fire-fcm-compat"),a(Et,"@firebase/performance","fire-perf"),a(Et,"@firebase/performance-compat","fire-perf-compat"),a(Et,"@firebase/remote-config","fire-rc"),a(Et,"@firebase/remote-config-compat","fire-rc-compat"),a(Et,"@firebase/storage","fire-gcs"),a(Et,"@firebase/storage-compat","fire-gcs-compat"),a(Et,"@firebase/firestore","fire-fst"),a(Et,"@firebase/firestore-compat","fire-fst-compat"),a(Et,"fire-js","fire-js"),a(Et,"firebase","fire-js-all"),Et),Ft=new Map,Ut=new Map;function Vt(e,t){try{e.container.addComponent(t)}catch(n){Ot.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Bt(e,t){e.container.addOrOverwriteComponent(t)}function zt(e){var t=e.name;if(Ut.has(t))return Ot.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ut.set(t,e);var n,r=ve(Ft.values());try{for(r.s();!(n=r.n()).done;){Vt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function qt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt;qt(e,t).clearInstance(n)}function Gt(){Ut.clear()}var Ht=(a(Tt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),a(Tt,"bad-app-name","Illegal App name: '{$appName}"),a(Tt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),a(Tt,"app-deleted","Firebase App named '{$appName}' already deleted"),a(Tt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),a(Tt,"invalid-log-argument","First argument to `onLog` must be null or a function."),a(Tt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),a(Tt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),a(Tt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),a(Tt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Tt),Wt=new qe("app","Firebase",Ht),Qt=function(){function e(t,n,r){var i=this;me(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nt("app",(function(){return i}),"PUBLIC"))}return ye(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}}]),e}(),$t="9.9.1";function Xt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Wt.create("bad-app-name",{appName:String(i)});var a=Ft.get(i);if(a){if(We(e,a.options)&&We(r,a.config))return a;throw Wt.create("duplicate-app",{appName:i})}var o,s=new st(i),u=ve(Ut.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new Qt(e,r,s);return Ft.set(i,l),l}function Jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=Ft.get(e);if(!t)throw Wt.create("no-app",{appName:e});return t}function Yt(){return Array.from(Ft.values())}function Zt(e){return en.apply(this,arguments)}function en(){return en=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ft.has(n)){e.next=6;break}return Ft.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),en.apply(this,arguments)}function tn(e,t,n){var r,i=null!==(r=Mt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ot.warn(s.join(" "))}zt(new nt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function nn(e,t){if(null!==e&&"function"!==typeof e)throw Wt.create("invalid-log-argument");!function(e,t){var n,r=ve(ut);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ct[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ot[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function rn(e){var t;t=e,ut.forEach((function(e){e.setLogLevel(t)}))}var an="firebase-heartbeat-store",on=null;function sn(){return on||(on=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=It(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(It(s.result),e.oldVersion,e.newVersion,It(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(an)}}).catch((function(e){throw Wt.create("storage-open",{originalErrorMessage:e.message})}))),on}function un(e){return cn.apply(this,arguments)}function cn(){return cn=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sn();case 3:return r=e.sent,e.abrupt("return",r.transaction(an).objectStore(an).get(fn(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Wt.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),cn.apply(this,arguments)}function ln(e,t){return hn.apply(this,arguments)}function hn(){return hn=pe(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sn();case 3:return i=e.sent,a=i.transaction(an,"readwrite"),o=a.objectStore(an),e.next=8,o.put(n,fn(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),Wt.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),hn.apply(this,arguments)}function fn(e){return"".concat(e.name,"!").concat(e.options.appId)}var dn=function(){function e(t){var n=this;me(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new gn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ye(e,[{key:"triggerHeartbeat",value:function(){var e=pe(fe().mark((function e(){var t,n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=pn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=pe(fe().mark((function e(){var t,n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=pn(),n=vn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Ae(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function pn(){return(new Date).toISOString().substring(0,10)}function vn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ve(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),yn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),yn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var mn,gn=function(){function e(t){me(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ye(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Be()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,un(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ln(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ln(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(te(r.heartbeats),te(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function yn(e){return Ae(JSON.stringify({version:2,heartbeats:e})).length}mn="",zt(new nt("platform-logger",(function(e){return new Dt(e)}),"PRIVATE")),zt(new nt("heartbeat",(function(e){return new dn(e)}),"PRIVATE")),tn(Rt,Pt,mn),tn(Rt,Pt,"esm2017"),tn("fire-js","");var kn;tn("firebase","9.9.1","app");var bn=function(){function e(t,n){var r=this;me(this,e),this._delegate=t,this.firebase=n,Vt(t,new nt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ye(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Zt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Vt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Bt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),wn=(a(kn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),a(kn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),kn),xn=new qe("app-compat","Firebase",wn);var _n=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Xt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(He(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:tn,setLogLevel:rn,onLog:nn,apps:null,SDK_VERSION:$t,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(zt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw xn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&De(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!He(n,e=e||Lt))throw xn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(bn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){De(n,e)},createSubscribe:Ye,ErrorFactory:qe,deepExtend:De}),n}(),In=new dt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){In.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Sn=self.firebase.SDK_VERSION;Sn&&Sn.indexOf("LITE")>=0&&In.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var En=_n;!function(e){tn("@firebase/app-compat","0.1.30",e)}();function Tn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xe(e)););return e}function Nn(){return Nn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Tn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Nn.apply(this,arguments)}En.registerVersion("firebase","9.9.1","app-compat");function Cn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var An;Object.create;var jn="facebook.com",Dn="github.com",Rn="google.com",Pn="password",On="twitter.com",Ln="EMAIL_SIGNIN",Mn="PASSWORD_RESET",Fn="RECOVER_EMAIL",Un="REVERT_SECOND_FACTOR_ADDITION",Vn="VERIFY_AND_CHANGE_EMAIL",Bn="VERIFY_EMAIL";function zn(){return a({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var qn=function(){var e;return a(e={},"admin-restricted-operation","This operation is restricted to administrators only."),a(e,"argument-error",""),a(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),a(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),a(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),a(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),a(e,"cordova-not-ready","Cordova framework is not ready."),a(e,"cors-unsupported","This browser is not supported."),a(e,"credential-already-in-use","This credential is already associated with a different user account."),a(e,"custom-token-mismatch","The custom token corresponds to a different audience."),a(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),a(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),a(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),a(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),a(e,"email-already-in-use","The email address is already in use by another account."),a(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),a(e,"expired-action-code","The action code has expired."),a(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),a(e,"internal-error","An internal AuthError has occurred."),a(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),a(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),a(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),a(e,"invalid-auth-event","An internal AuthError has occurred."),a(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),a(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),a(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),a(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),a(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),a(e,"invalid-email","The email address is badly formatted."),a(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),a(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),a(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),a(e,"invalid-credential","The supplied auth credential is malformed or has expired."),a(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),a(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),a(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),a(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),a(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),a(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),a(e,"wrong-password","The password is invalid or the user does not have a password."),a(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),a(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),a(e,"invalid-provider-id","The specified provider ID is invalid."),a(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),a(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),a(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),a(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),a(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),a(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),a(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),a(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),a(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),a(e,"missing-continue-uri","A continue URL must be provided in the request."),a(e,"missing-iframe-start","An internal AuthError has occurred."),a(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),a(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),a(e,"missing-multi-factor-info","No second factor identifier is provided."),a(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),a(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),a(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),a(e,"app-deleted","This instance of FirebaseApp has been deleted."),a(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),a(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),a(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),a(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),a(e,"no-auth-event","An internal AuthError has occurred."),a(e,"no-such-provider","User was not linked to an account with the given provider."),a(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),a(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),a(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),a(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),a(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),a(e,"provider-already-linked","User can only be linked to one identity for the given provider."),a(e,"quota-exceeded","The project's quota for this operation has been exceeded."),a(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),a(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),a(e,"rejected-credential","The request contains malformed or mismatching credentials."),a(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),a(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),a(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),a(e,"timeout","The operation has timed out."),a(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),a(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),a(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),a(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),a(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),a(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),a(e,"unverified-email","The operation requires a verified email."),a(e,"user-cancelled","The user did not grant your application the permissions it requested."),a(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),a(e,"user-disabled","The user account has been disabled by an administrator."),a(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),a(e,"user-signed-out",""),a(e,"weak-password","The password must be 6 characters long or more."),a(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),a(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Kn=zn,Gn=new qe("auth","Firebase",zn()),Hn=new dt("@firebase/auth");function Wn(e){if(Hn.logLevel<=ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Hn.error.apply(Hn,["Auth (".concat($t,"): ").concat(e)].concat(n))}}function Qn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Yn.apply(void 0,[e].concat(n))}function $n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Yn.apply(void 0,[e].concat(n))}function Xn(e,t,n){var r=Object.assign(Object.assign({},Kn()),a({},t,n));return new qe("auth","Firebase",r).create(t,{appName:e.name})}function Jn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Qn(e,"argument-error"),Xn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Yn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=te(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(te(o)))}return Gn.create.apply(Gn,[e].concat(n))}function Zn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Yn.apply(void 0,[t].concat(r))}}function er(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Wn(t),new Error(t)}function tr(e,t){e||er(t)}var nr=new Map;function rr(e){tr(e instanceof Function,"Expected a class definition");var t=nr.get(e);return t?(tr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,nr.set(e,t),t)}function ir(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ar(){return"http:"===or()||"https:"===or()}function or(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var sr=function(){function e(t,n){me(this,e),this.shortDelay=t,this.longDelay=n,tr(n>t,"Short delay should be less than long delay!"),this.isMobile=Le()||Ue()}return ye(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ar()||Fe()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ur(e,t){tr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var cr=function(){function e(){me(this,e)}return ye(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),lr=(a(An={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),a(An,"MISSING_CUSTOM_TOKEN","internal-error"),a(An,"INVALID_IDENTIFIER","invalid-email"),a(An,"MISSING_CONTINUE_URI","internal-error"),a(An,"INVALID_PASSWORD","wrong-password"),a(An,"MISSING_PASSWORD","internal-error"),a(An,"EMAIL_EXISTS","email-already-in-use"),a(An,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),a(An,"INVALID_IDP_RESPONSE","invalid-credential"),a(An,"INVALID_PENDING_TOKEN","invalid-credential"),a(An,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),a(An,"MISSING_REQ_TYPE","internal-error"),a(An,"EMAIL_NOT_FOUND","user-not-found"),a(An,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),a(An,"EXPIRED_OOB_CODE","expired-action-code"),a(An,"INVALID_OOB_CODE","invalid-action-code"),a(An,"MISSING_OOB_CODE","internal-error"),a(An,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),a(An,"INVALID_ID_TOKEN","invalid-user-token"),a(An,"TOKEN_EXPIRED","user-token-expired"),a(An,"USER_NOT_FOUND","user-token-expired"),a(An,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),a(An,"INVALID_CODE","invalid-verification-code"),a(An,"INVALID_SESSION_INFO","invalid-verification-id"),a(An,"INVALID_TEMPORARY_PROOF","invalid-credential"),a(An,"MISSING_SESSION_INFO","missing-verification-id"),a(An,"SESSION_EXPIRED","code-expired"),a(An,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),a(An,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),a(An,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),a(An,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),a(An,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),a(An,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),a(An,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),a(An,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),a(An,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),a(An,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),a(An,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),An),hr=new sr(3e4,6e4);function fr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function dr(e,t,n,r){return pr.apply(this,arguments)}function pr(){return pr=pe(fe().mark((function e(t,n,r,i){var a,o=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",vr(t,a,pe(fe().mark((function e(){var a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=$e(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",cr.fetch()(kr(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t,n){return mr.apply(this,arguments)}function mr(){return mr=pe(fe().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d,p;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},lr),n),e.prev=2,a=new br(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw wr(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=f(c,2),h=l[0],d=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw wr(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw wr(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw wr(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Xn(t,p,d);case 34:Qn(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ze)){e.next=41;break}throw e.t0;case 41:Qn(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),mr.apply(this,arguments)}function gr(e,t,n,r){return yr.apply(this,arguments)}function yr(){return yr=pe(fe().mark((function e(t,n,r,i){var a,o,s=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,dr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Qn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function kr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ur(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var br=function(){function e(t){var n=this;me(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t($n(n.auth,"network-request-failed"))}),hr.get())}))}return ye(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function wr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=$n(e,t,r);return i.customData._tokenResponse=n,i}function xr(e,t){return _r.apply(this,arguments)}function _r(){return _r=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),_r.apply(this,arguments)}function Ir(e,t){return Sr.apply(this,arguments)}function Sr(){return Sr=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}function Er(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Nr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Cr(){return Cr=pe(fe().mark((function e(t){var n,r,i,a,o,s,u=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=tt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Zn((a=jr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Nr(Ar(a.auth_time)),issuedAtTime:Nr(Ar(a.iat)),expirationTime:Nr(Ar(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}function Ar(e){return 1e3*Number(e)}function jr(e){var t,n=f(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Wn("JWT malformed, contained fewer than 3 sections"),null;try{var o=je(i);return o?JSON.parse(o):(Wn("Failed to decode base64 JWT payload"),null)}catch(s){return Wn("Caught error parsing JWT payload as JSON",null===(t=s)||void 0===t?void 0:t.toString()),null}}function Dr(e,t){return Rr.apply(this,arguments)}function Rr(){return Rr=pe(fe().mark((function e(t,n){var r=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ze&&Pr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Rr.apply(this,arguments)}function Pr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Or=function(){function e(t){me(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ye(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(pe(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Lr=function(){function e(t,n){me(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ye(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Nr(this.lastLoginAt),this.creationTime=Nr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Mr(e){return Fr.apply(this,arguments)}function Fr(){return Fr=pe(fe().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Dr(t,Er(r,{idToken:i}));case 6:Zn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Br(o.providerUserInfo):[],u=Vr(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Lr(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Fr.apply(this,arguments)}function Ur(){return(Ur=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=tt(t),e.next=3,Mr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(te(n),te(t))}function Br(e){return e.map((function(e){var t=e.providerId,n=Cn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function zr(e,t){return qr.apply(this,arguments)}function qr(){return qr=pe(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(t,{},pe(fe().mark((function e(){var r,i,a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$e({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=kr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",cr.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}var Kr=function(){function e(){me(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ye(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Zn(e.idToken,"internal-error"),Zn("undefined"!==typeof e.idToken,"internal-error"),Zn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=jr(e);return Zn(t,"internal-error"),Zn("undefined"!==typeof t.exp,"internal-error"),Zn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=pe(fe().mark((function e(t){var n,r=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Zn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=pe(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return er("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Zn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Zn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Zn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Gr(e,t){Zn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Hr=function(){function e(t){me(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Cn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Or(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?te(a.providerData):[],this.metadata=new Lr(a.createdAt||void 0,a.lastLoginAt||void 0)}return ye(e,[{key:"getIdToken",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Zn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Cr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ur.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Zn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Zn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=pe(fe().mark((function e(t){var n,r,i=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Mr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Dr(this,xr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Zn(k&&_,t,"internal-error");var I=Kr.fromJSON(this.name,_);Zn("string"===typeof k,t,"internal-error"),Gr(h,t.name),Gr(f,t.name),Zn("boolean"===typeof b,t,"internal-error"),Zn("boolean"===typeof w,t,"internal-error"),Gr(d,t.name),Gr(p,t.name),Gr(v,t.name),Gr(m,t.name),Gr(g,t.name),Gr(y,t.name);var S=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=pe(fe().mark((function t(n,r){var i,a,o,s=arguments;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Kr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Mr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Wr=function(){function e(){me(this,e),this.type="NONE",this.storage={}}return ye(e,[{key:"_isAvailable",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Wr.type="NONE";var Qr=Wr;function $r(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Xr=function(){function e(t,n,r){me(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=$r(this.userKey,a.apiKey,o),this.fullPersistenceKey=$r("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ye(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Hr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=pe(fe().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(rr(Qr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||rr(Qr),s=$r(i,n.config.apiKey,n.name),u=null,c=ve(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=Hr._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Jr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ti(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ri(t))return"Blackberry";if(ii(t))return"Webos";if(Zr(t))return"Safari";if((t.includes("chrome/")||ei(t))&&!t.includes("edge/"))return"Chrome";if(ni(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return/firefox\//i.test(e)}function Zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return/crios\//i.test(e)}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return/iemobile/i.test(e)}function ni(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return/android/i.test(e)}function ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return/blackberry/i.test(e)}function ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return/webos/i.test(e)}function ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oi(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return ai(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function si(){return Ve()&&10===document.documentMode}function ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return ai(e)||ni(e)||ii(e)||ri(e)||/windows phone/i.test(e)||ti(e)}function ci(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Jr(Oe());break;case"Worker":t="".concat(Jr(Oe()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat($t,"/").concat(r)}var li=function(){function e(t){me(this,e),this.auth=t,this.queue=[]}return ye(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=pe(fe().mark((function e(t){var n,r,i,a,o,s,u,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=ve(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),s=ve(r);try{for(s.s();!(u=s.n()).done;){c=u.value;try{c()}catch(l){}}}catch(h){s.e(h)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),hi=function(){function e(t,n,r){me(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new di(this),this.idTokenSubscription=new di(this),this.beforeStateQueue=new li(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ye(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=rr(t)),this._initializationPromise=this.queue(pe(fe().mark((function r(){var i,a;return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Xr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=pe(fe().mark((function e(t){var n,r,i,a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Zn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?tt(t):null)&&Zn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=pe(fe().mark((function e(t){var n,r=this,i=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Zn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(pe(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(rr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new qe("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=pe(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Zn(n=t&&rr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Xr.create(this,[rr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=pe(fe().mark((function e(t){var n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Zn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Zn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ci(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=pe(fe().mark((function e(){var t,n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function fi(e){return tt(e)}var di=function(){function e(t){var n=this;me(this,e),this.auth=t,this.observer=null,this.addObserver=Ye((function(e){return n.observer=e}))}return ye(e,[{key:"next",get:function(){return Zn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function pi(e,t,n){var r=fi(e);Zn(r._canInitEmulator,r,"emulator-config-failed"),Zn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=vi(t),o=function(e){var t=vi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:mi(r.substr(a.length+1))}}var o=f(r.split(":"),2);return{host:o[0],port:mi(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function vi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var gi=function(){function e(t,n){me(this,e),this.providerId=t,this.signInMethod=n}return ye(e,[{key:"toJSON",value:function(){return er("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return er("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return er("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return er("not implemented")}}]),e}();function yi(e,t){return ki.apply(this,arguments)}function ki(){return ki=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:resetPassword",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ki.apply(this,arguments)}function bi(e,t){return wi.apply(this,arguments)}function wi(){return wi=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}function xi(e,t){return _i.apply(this,arguments)}function _i(){return _i=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:update",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function Ii(e,t){return Si.apply(this,arguments)}function Si(){return Si=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:signInWithPassword",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ei(e,t){return Ti.apply(this,arguments)}function Ti(){return Ti=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:sendOobCode",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}function Ni(e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,n));case 1:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ai(e,t){return ji.apply(this,arguments)}function ji(){return ji=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,n));case 1:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}function Di(e,t){return Ri.apply(this,arguments)}function Ri(){return Ri=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,n));case 1:case"end":return e.stop()}}),e)}))),Ri.apply(this,arguments)}function Pi(e,t){return Oi.apply(this,arguments)}function Oi(){return Oi=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,n));case 1:case"end":return e.stop()}}),e)}))),Oi.apply(this,arguments)}function Li(e,t){return Mi.apply(this,arguments)}function Mi(){return Mi=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}function Fi(e,t){return Ui.apply(this,arguments)}function Ui(){return Ui=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}var Vi=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return me(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ye(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ii(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Li(t,{email:this._email,oobCode:this._password}));case 5:Qn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",bi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Fi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Qn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(gi);function Bi(e,t){return zi.apply(this,arguments)}function zi(){return zi=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:signInWithIdp",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}var qi=function(e){we(n,e);var t=Se(n);function n(){var e;return me(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ye(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Bi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Bi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Bi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$e(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Cn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(gi);function Ki(e,t){return Gi.apply(this,arguments)}function Gi(){return Gi=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:sendVerificationCode",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}function Hi(){return Hi=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:signInWithPhoneNumber",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}function Wi(){return Wi=pe(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gr(t,"POST","/v1/accounts:signInWithPhoneNumber",fr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw wr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}var Qi=a({},"USER_NOT_FOUND","user-not-found");function $i(){return $i=pe(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",gr(t,"POST","/v1/accounts:signInWithPhoneNumber",fr(t,r),Qi));case 2:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}var Xi=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ye(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Hi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Wi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return $i.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(gi);var Ji=function(){function e(t){var n,r,i,a,o,s;me(this,e);var u=Xe(Je(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Zn(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return ye(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Xe(Je(e)).link,n=t?Xe(Je(t)).deep_link_id:null,r=Xe(Je(e)).deep_link_id;return(r?Xe(Je(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(OS){return null}}}]),e}();var Yi=function(){function e(){me(this,e),this.providerId=e.PROVIDER_ID}return ye(e,null,[{key:"credential",value:function(e,t){return Vi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ji.parseLink(t);return Zn(n,"argument-error"),Vi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Yi.PROVIDER_ID="password",Yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Zi=function(){function e(t){me(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ye(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ea=function(e){we(n,e);var t=Se(n);function n(){var e;return me(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ye(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return te(this.scopes)}}]),n}(Zi),ta=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Zn(e.idToken||e.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Zn("providerId"in t&&"signInMethod"in t,"argument-error"),qi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(ea),na=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.call(this,"facebook.com")}return ye(n,null,[{key:"credential",value:function(e){return qi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(OS){return null}}}]),n}(ea);na.FACEBOOK_SIGN_IN_METHOD="facebook.com",na.PROVIDER_ID="facebook.com";var ra=function(e){we(n,e);var t=Se(n);function n(){var e;return me(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ye(n,null,[{key:"credential",value:function(e,t){return qi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(OS){return null}}}]),n}(ea);ra.GOOGLE_SIGN_IN_METHOD="google.com",ra.PROVIDER_ID="google.com";var ia=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.call(this,"github.com")}return ye(n,null,[{key:"credential",value:function(e){return qi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(OS){return null}}}]),n}(ea);ia.GITHUB_SIGN_IN_METHOD="github.com",ia.PROVIDER_ID="github.com";var aa=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ye(n,[{key:"_getIdTokenResponse",value:function(e){return Bi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Bi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Bi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(gi),oa=function(e){we(n,e);var t=Se(n);function n(e){return me(this,n),Zn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ye(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=aa.fromJSON(e);return Zn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return aa._create(r,n)}catch(i){return null}}}]),n}(Zi),sa=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.call(this,"twitter.com")}return ye(n,null,[{key:"credential",value:function(e,t){return qi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(OS){return null}}}]),n}(ea);function ua(e,t){return ca.apply(this,arguments)}function ca(){return ca=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:signUp",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ca.apply(this,arguments)}sa.TWITTER_SIGN_IN_METHOD="twitter.com",sa.PROVIDER_ID="twitter.com";var la=function(){function e(t){me(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ye(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=pe(fe().mark((function t(n,r,i){var a,o,s,u,c=arguments;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Hr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=ha(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=pe(fe().mark((function t(n,r,i){var a;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ha(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ha(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function fa(){return fa=pe(fe().mark((function e(t){var n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new la({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ua(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,la._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}var da=function(e){we(n,e);var t=Se(n);function n(e,r,i,a){var o,s;return me(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(ke(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ye(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ze);function pa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw da._fromErrorAndOperation(e,n,t,r);throw n}))}function va(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ma(e,t){return ga.apply(this,arguments)}function ga(){return ga=pe(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tt(t),e.next=3,ba(!0,r,n);case 3:return e.t0=Ir,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=va(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ya(e,t){return ka.apply(this,arguments)}function ka(){return ka=pe(fe().mark((function e(t,n){var r,i,a=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Dr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",la._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}function ba(e,t,n){return wa.apply(this,arguments)}function wa(){return(wa=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mr(n);case 2:i=va(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Zn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(e,t){return _a.apply(this,arguments)}function _a(){return _a=pe(fe().mark((function e(t,n){var r,i,a,o,s,u,c,l=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Dr(t,pa(a,o,n,t),r);case 6:return Zn((s=e.sent).idToken,a,"internal-error"),Zn(u=jr(s.idToken),a,"internal-error"),c=u.sub,Zn(t.uid===c,a,"user-mismatch"),e.abrupt("return",la._forOperation(t,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Qn(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),_a.apply(this,arguments)}function Ia(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=pe(fe().mark((function e(t,n){var r,i,a,o,s=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,pa(t,i,n);case 4:return a=e.sent,e.next=7,la._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}function Ea(e,t){return Ta.apply(this,arguments)}function Ta(){return Ta=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ia(fi(t),n));case 1:case"end":return e.stop()}}),e)}))),Ta.apply(this,arguments)}function Na(e,t){return Ca.apply(this,arguments)}function Ca(){return(Ca=pe(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tt(t),e.next=3,ba(!1,r,n.providerId);case 3:return e.abrupt("return",ya(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aa(e,t){return ja.apply(this,arguments)}function ja(){return(ja=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xa(tt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(e,t){return Ra.apply(this,arguments)}function Ra(){return Ra=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:signInWithCustomToken",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Pa(){return Pa=pe(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),e.next=3,Da(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,la._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}var Oa=function(){function e(t,n){me(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ye(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?La._fromServerResponse(e,t):Qn(e,"internal-error")}}]),e}(),La=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ye(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Oa);function Ma(e,t,n){var r;Zn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Zn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Zn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Zn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Fa(){return Fa=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tt(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ma(i,a,r),e.next=5,Ai(i,a);case 5:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(){return Ua=pe(fe().mark((function e(t,n,r){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yi(tt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function Va(){return Va=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xi(tt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Va.apply(this,arguments)}function Ba(e,t){return za.apply(this,arguments)}function za(){return za=pe(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tt(t),e.next=3,yi(r,{oobCode:n});case 3:i=e.sent,Zn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Zn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Zn(i.mfaInfo,r,"internal-error");case 13:Zn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Oa._fromServerResponse(fi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function qa(){return qa=pe(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ba(tt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function Ka(e,t,n){return Ga.apply(this,arguments)}function Ga(){return Ga=pe(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fi(t),e.next=3,ua(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,la._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Ga.apply(this,arguments)}function Ha(){return Ha=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tt(t),a={requestType:"EMAIL_SIGNIN",email:n},Zn(r.handleCodeInApp,i,"argument-error"),r&&Ma(i,a,r),e.next=6,Di(i,a);case 6:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Wa(){return Wa=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tt(t),Zn((a=Yi.credentialWithLink(n,r||ir()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ea(i,a));case 4:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Qa(e,t){return $a.apply(this,arguments)}function $a(){return $a=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:createAuthUri",fr(t,n)));case 1:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function Xa(){return Xa=pe(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ar()?ir():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Qa(tt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}function Ja(){return(Ja=pe(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ma(r.auth,a,n),e.next=8,Ni(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ya(){return(Ya=pe(fe().mark((function e(t,n,r){var i,a,o,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ma(i.auth,o,r),e.next=8,Pi(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(e,t){return eo.apply(this,arguments)}function eo(){return eo=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(){return(to=pe(fe().mark((function e(t,n){var r,i,a,o,s,u,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=tt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Dr(a,Za(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function no(e,t,n){return ro.apply(this,arguments)}function ro(){return ro=pe(fe().mark((function e(t,n,r){var i,a,o,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Dr(t,bi(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),ro.apply(this,arguments)}var io=ye((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};me(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ao=function(e){we(n,e);var t=Se(n);function n(e,r,i,a){var o;return me(this,n),(o=t.call(this,e,r,i)).username=a,o}return ye(n)}(io),oo=function(e){we(n,e);var t=Se(n);function n(e,r){return me(this,n),t.call(this,e,"facebook.com",r)}return ye(n)}(io),so=function(e){we(n,e);var t=Se(n);function n(e,r){return me(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ye(n)}(ao),uo=function(e){we(n,e);var t=Se(n);function n(e,r){return me(this,n),t.call(this,e,"google.com",r)}return ye(n)}(io),co=function(e){we(n,e);var t=Se(n);function n(e,r,i){return me(this,n),t.call(this,e,"twitter.com",r,i)}return ye(n)}(ao);function lo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=jr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new io(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new oo(a,i);case"github.com":return new so(a,i);case"google.com":return new uo(a,i);case"twitter.com":return new co(a,i,e.screenName||null);case"custom":case"anonymous":return new io(a,null);default:return new io(a,r,i)}}(n)}var ho=function(){function e(t,n){me(this,e),this.type=t,this.credential=n}return ye(e,[{key:"toJSON",value:function(){return{multiFactorSession:a({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),fo=function(){function e(t,n,r){me(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ye(e,[{key:"resolveSignIn",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=fi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Oa._fromServerResponse(r,e)}));Zn(i.mfaPendingCredential,r,"internal-error");var o=ho._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=pe(fe().mark((function e(t){var a,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,la._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return Zn(n.user,r,"internal-error"),e.abrupt("return",la._forOperation(n.user,n.operationType,s));case 17:Qn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function po(e,t){return dr(e,"POST","/v2/accounts/mfaEnrollment:start",fr(e,t))}function vo(e,t){return dr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",fr(e,t))}var mo=function(){function e(t){var n=this;me(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Oa._fromServerResponse(t.auth,e)})))}))}return ye(e,[{key:"getSession",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ho,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=pe(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Dr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=pe(fe().mark((function e(t){var n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Dr(this.user,vo(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),go=new WeakMap;var yo="__sak",ko=function(){function e(t,n){me(this,e),this.storageRetriever=t,this.type=n}return ye(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(yo,"1"),this.storage.removeItem(yo),Promise.resolve(!0)):Promise.resolve(!1)}catch(OS){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var bo=function(e){we(n,e);var t=Se(n);function n(){var e;return me(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Oe();return Zr(e)||ai(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ui(),e._shouldAllowMigration=!0,e}return ye(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);si()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=pe(fe().mark((function e(t,r){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(xe(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=pe(fe().mark((function e(t){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(xe(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(xe(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ko);bo.type="LOCAL";var wo=bo,xo=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ye(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ko);xo.type="SESSION";var _o=xo;function Io(e){return Promise.all(e.map(function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var So=function(){function e(t){me(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ye(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=pe(fe().mark((function e(t){var n,r,i,a,o,s,u,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Io(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Eo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}So.receivers=[];var To=function(){function e(t){me(this,e),this.target=t,this.handlers=new Set}return ye(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=pe(fe().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Eo("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function No(){return window}function Co(){return"undefined"!==typeof No().WorkerGlobalScope&&"function"===typeof No().importScripts}function Ao(){return jo.apply(this,arguments)}function jo(){return(jo=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Do(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ro="firebaseLocalStorageDb",Po="firebaseLocalStorage",Oo="fbase_key",Lo=function(){function e(t){me(this,e),this.request=t}return ye(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Mo(e,t){return e.transaction([Po],t?"readwrite":"readonly").objectStore(Po)}function Fo(){var e=indexedDB.deleteDatabase(Ro);return new Lo(e).toPromise()}function Uo(){var e=indexedDB.open(Ro,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Po,{keyPath:Oo})}catch(r){n(r)}})),e.addEventListener("success",pe(fe().mark((function n(){var r;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Po)){n.next=12;break}return r.close(),n.next=5,Fo();case 5:return n.t0=t,n.next=8,Uo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Vo(e,t,n){return Bo.apply(this,arguments)}function Bo(){return Bo=pe(fe().mark((function e(t,n,r){var i,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Mo(t,!0).put((a(i={},Oo,n),a(i,"value",r),i)),e.abrupt("return",new Lo(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Bo.apply(this,arguments)}function zo(e,t){return qo.apply(this,arguments)}function qo(){return qo=pe(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mo(t,!1).get(n),e.next=3,new Lo(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Ko(e,t){var n=Mo(e,!0).delete(t);return new Lo(n).toPromise()}var Go=function(){function e(){me(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ye(e,[{key:"_openDb",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Uo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Co()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=pe(fe().mark((function e(){var t=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=So._getInstance(Co()?self:null),this.receiver._subscribe("keyChanged",function(){var e=pe(fe().mark((function e(n,r){var i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=pe(fe().mark((function e(){var t,n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ao();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new To(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Do()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Uo();case 5:return t=e.sent,e.next=8,Vo(t,yo,"1");case 8:return e.next=10,Ko(t,yo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=pe(fe().mark((function e(t,n){var r=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Vo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return zo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=pe(fe().mark((function e(t){var n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ko(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=pe(fe().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Mo(e,!1).getAll();return new Lo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ve(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(pe(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Go.type="LOCAL";var Ho=Go;function Wo(e,t){return dr(e,"POST","/v2/accounts/mfaSignIn:start",fr(e,t))}function Qo(e){return $o.apply(this,arguments)}function $o(){return $o=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),$o.apply(this,arguments)}function Xo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=$n("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Jo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Yo=1e12,Zo=function(){function e(t){me(this,e),this.auth=t,this.counter=Yo,this._widgets=new Map}return ye(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new es(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Yo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Yo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Yo,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),es=function(){function e(t,n,r){var i=this;me(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Zn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ye(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ts=Jo("rcb"),ns=new sr(3e4,6e4),rs="https://www.google.com/recaptcha/api.js?",is=function(){function e(){var t;me(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=No().grecaptcha)||void 0===t?void 0:t.render)}return ye(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Zn(as(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(No().grecaptcha):new Promise((function(r,i){var a=No().setTimeout((function(){i($n(e,"network-request-failed"))}),ns.get());No()[ts]=function(){No().clearTimeout(a),delete No()[ts];var o=No().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i($n(e,"internal-error"))},Xo("".concat(rs,"?").concat($e({onload:ts,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i($n(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=No().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function as(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var os=function(){function e(){me(this,e)}return ye(e,[{key:"load",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Zo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ss="recaptcha",us={theme:"light",type:"image"},cs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},us),r=arguments.length>2?arguments[2]:void 0;me(this,e),this.parameters=n,this.type=ss,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fi(r),this.isInvisible="invisible"===this.parameters.size,Zn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Zn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new os:new is,this.validateStartingState()}return ye(e,[{key:"verify",value:function(){var e=pe(fe().mark((function e(){var t,n,r,i=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Zn(!this.parameters.sitekey,this.auth,"argument-error"),Zn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Zn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=No()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Zn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=pe(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zn(ar()&&!Co(),this.auth,"internal-error"),e.next=3,ls();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Qo(this.auth);case 8:Zn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Zn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ls(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var hs=function(){function e(t,n){me(this,e),this.verificationId=t,this.onConfirmation=n}return ye(e,[{key:"confirm",value:function(e){var t=Xi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function fs(){return fs=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fi(t),e.next=3,ms(i,n,tt(r));case 3:return a=e.sent,e.abrupt("return",new hs(a,(function(e){return Ea(i,e)})));case 5:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}function ds(e,t,n){return ps.apply(this,arguments)}function ps(){return(ps=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tt(t),e.next=3,ba(!1,i,"phone");case 3:return e.next=5,ms(i.auth,n,tt(r));case 5:return a=e.sent,e.abrupt("return",new hs(a,(function(e){return Na(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(){return(vs=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tt(t),e.next=3,ms(i.auth,n,tt(r));case 3:return a=e.sent,e.abrupt("return",new hs(a,(function(e){return Aa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ms(e,t,n){return gs.apply(this,arguments)}function gs(){return gs=pe(fe().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Zn("string"===typeof a,t,"argument-error"),Zn(r.type===ss,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Zn("enroll"===s.type,t,"internal-error"),e.next=13,po(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Zn("signin"===s.type,t,"internal-error"),Zn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Wo(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ki(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),gs.apply(this,arguments)}function ys(){return(ys=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ya(tt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ks=function(){function e(t){me(this,e),this.providerId=e.PROVIDER_ID,this.auth=fi(t)}return ye(e,[{key:"verifyPhoneNumber",value:function(e,t){return ms(this.auth,e,tt(t))}}],[{key:"credential",value:function(e,t){return Xi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Xi._fromTokenResponse(n,r):null}}]),e}();function bs(e,t){return t?rr(t):(Zn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ks.PROVIDER_ID="phone",ks.PHONE_SIGN_IN_METHOD="phone";var ws=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ye(n,[{key:"_getIdTokenResponse",value:function(e){return Bi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Bi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Bi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(gi);function xs(e){return Ia(e.auth,new ws(e),e.bypassAuthState)}function _s(e){var t=e.auth,n=e.user;return Zn(n,t,"internal-error"),xa(n,new ws(e),e.bypassAuthState)}function Is(e){return Ss.apply(this,arguments)}function Ss(){return Ss=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Zn(r=t.user,n,"internal-error"),e.abrupt("return",ya(r,new ws(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}var Es=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];me(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ye(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=pe(fe().mark((function t(n,r){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=pe(fe().mark((function e(t){var n,r,i,a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xs;case"linkViaPopup":case"linkViaRedirect":return Is;case"reauthViaPopup":case"reauthViaRedirect":return _s;default:Qn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ts=new sr(2e3,1e4);function Ns(e,t,n){return Cs.apply(this,arguments)}function Cs(){return Cs=pe(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fi(t),Jn(t,n,Zi),a=bs(i,r),o=new Rs(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}function As(){return(As=pe(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn((i=tt(t)).auth,n,Zi),a=bs(i.auth,r),o=new Rs(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function js(e,t,n){return Ds.apply(this,arguments)}function Ds(){return(Ds=pe(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn((i=tt(t)).auth,n,Zi),a=bs(i.auth,r),o=new Rs(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rs=function(e){we(n,e);var t=Se(n);function n(e,r,i,a,o){var s;return me(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=ke(s),s}return ye(n,[{key:"executeNotNull",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Zn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=pe(fe().mark((function e(){var t,n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tr(1===this.filter.length,"Popup operations only handle one event"),t=Eo(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject($n(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject($n(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject($n(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Ts.get())}()}}]),n}(Es);Rs.currentPopupAction=null;var Ps=new Map,Os=function(e){we(n,e);var t=Se(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return me(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ye(n,[{key:"execute",value:function(){var e=pe(fe().mark((function e(){var t,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ps.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ls(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Nn(xe(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ps.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ps.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=pe(fe().mark((function e(t){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Nn(xe(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Nn(xe(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Es);function Ls(e,t){return Ms.apply(this,arguments)}function Ms(){return Ms=pe(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zs(n),i=Bs(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Ms.apply(this,arguments)}function Fs(e,t){return Us.apply(this,arguments)}function Us(){return Us=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bs(t)._set(zs(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Us.apply(this,arguments)}function Vs(e,t){Ps.set(e._key(),t)}function Bs(e){return rr(e._redirectPersistence)}function zs(e){return $r("pendingRedirect",e.config.apiKey,e.name)}function qs(e,t,n){return function(e,t,n){return Ks.apply(this,arguments)}(e,t,n)}function Ks(){return Ks=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fi(t),Jn(t,n,Zi),a=bs(i,r),e.next=5,Fs(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Ks.apply(this,arguments)}function Gs(e,t,n){return function(e,t,n){return Hs.apply(this,arguments)}(e,t,n)}function Hs(){return(Hs=pe(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn((i=tt(t)).auth,n,Zi),a=bs(i.auth,r),e.next=5,Fs(a,i.auth);case 5:return e.next=7,Zs(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ws(e,t,n){return function(e,t,n){return Qs.apply(this,arguments)}(e,t,n)}function Qs(){return(Qs=pe(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn((i=tt(t)).auth,n,Zi),a=bs(i.auth,r),e.next=5,ba(!1,i,n.providerId);case 5:return e.next=7,Fs(a,i.auth);case 7:return e.next=9,Zs(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $s(e,t){return Xs.apply(this,arguments)}function Xs(){return Xs=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fi(t)._initializationPromise;case 2:return e.abrupt("return",Js(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Xs.apply(this,arguments)}function Js(e,t){return Ys.apply(this,arguments)}function Ys(){return Ys=pe(fe().mark((function e(t,n){var r,i,a,o,s,u=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=fi(t),a=bs(i,n),o=new Os(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}function Zs(e){return eu.apply(this,arguments)}function eu(){return(eu=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Eo("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tu=function(){function e(t){me(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ye(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ru(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ru(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError($n(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(nu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function nu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ru(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function iu(e){return au.apply(this,arguments)}function au(){return au=pe(fe().mark((function e(t){var n,r=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",dr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),au.apply(this,arguments)}var ou=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,su=/^https?/;function uu(){return uu=pe(fe().mark((function e(t){var n,r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,iu(t);case 4:n=e.sent,r=n.authorizedDomains,i=ve(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!cu(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Qn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),uu.apply(this,arguments)}function cu(e){var t=ir(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!su.test(r))return!1;if(ou.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var lu=new sr(3e4,6e4);function hu(){var e=No().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=te(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var fu=null;function du(e){return fu=fu||function(e){return new Promise((function(t,n){var r,i,a;function o(){hu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){hu(),n($n(e,"network-request-failed"))},timeout:lu.get()})}if(null===(i=null===(r=No().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=No().gapi)||void 0===a?void 0:a.load)){var s=Jo("iframefcb");return No()[s]=function(){gapi.load?o():n($n(e,"network-request-failed"))},Xo("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw fu=null,e}))}(e),fu}var pu=new sr(5e3,15e3),vu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gu(e){var t=e.config;Zn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ur(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:$t},i=mu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat($e(r).slice(1))}function yu(e){return ku.apply(this,arguments)}function ku(){return ku=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,du(t);case 2:return n=e.sent,Zn(r=No().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:gu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vu,dontclear:!0},(function(e){return new Promise(function(){var n=pe(fe().mark((function n(r,i){var a,o,s;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){No().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=$n(t,"network-request-failed"),o=No().setTimeout((function(){i(a)}),pu.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}var bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wu="_blank",xu="http://localhost",_u=function(){function e(t){me(this,e),this.window=t,this.associatedEvent=null}return ye(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Iu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},bu),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Oe().toLowerCase();n&&(s=ei(c)?wu:n),Yr(c)&&(t=t||xu,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=f(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(oi(c)&&"_self"!==s)return Su(t||"",s),new _u(null);var h=window.open(t||"",s,l);Zn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new _u(h)}function Su(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Eu="__/auth/handler",Tu="emulator/auth/handler";function Nu(e,t,n,r,i,a){Zn(e.config.authDomain,e,"auth-domain-config-required"),Zn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:$t,eventId:i};if(t instanceof Zi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=f(u[s],2),l=c[0],h=c[1];o[l]=h}}if(t instanceof ea){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var g=m[v];void 0===p[g]&&delete p[g]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Eu);return ur(t,Tu)}(e),"?").concat($e(p).slice(1))}var Cu="webStorageSupport",Au=function(){function e(){me(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_o,this._completeRedirectFn=Js,this._overrideRedirectResult=Vs}return ye(e,[{key:"_openPopup",value:function(){var e=pe(fe().mark((function e(t,n,r,i){var a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Nu(t,n,r,ir(),i),e.abrupt("return",Iu(t,o,Eo()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=pe(fe().mark((function e(t,n,r,i){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Nu(t,n,r,ir(),i),No().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(tr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yu(t);case 2:return n=e.sent,r=new tu(t),n.register("authEvent",(function(e){return Zn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Cu,{type:Cu},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Qn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return uu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ui()||Zr()||ai()}}]),e}(),ju=Au,Du=function(){function e(t){me(this,e),this.factorId=t}return ye(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return er("unexpected MultiFactorSessionType")}}}]),e}(),Ru=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this,"phone")).credential=e,r}return ye(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return dr(e,"POST","/v2/accounts/mfaEnrollment:finalize",fr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return dr(e,"POST","/v2/accounts/mfaSignIn:finalize",fr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Du),Pu=function(){function e(){me(this,e)}return ye(e,null,[{key:"assertion",value:function(e){return Ru._fromCredential(e)}}]),e}();Pu.FACTOR_ID="phone";var Ou,Lu="@firebase/auth",Mu="0.20.5",Fu=function(){function e(t){me(this,e),this.auth=t,this.internalListeners=new Map}return ye(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Zn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Uu(){return window}Ou="Browser",zt(new nt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Zn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Zn(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Ou,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ci(Ou)},i=new hi(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),zt(new nt("auth-internal",(function(e){return function(e){return new Fu(e)}(fi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),tn(Lu,Mu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ou)),tn(Lu,Mu,"esm2017");function Vu(e,t,n){return Bu.apply(this,arguments)}function Bu(){return Bu=pe(fe().mark((function e(t,n,r){var i,a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Uu(),o=a.BuildInfo,tr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Wu(n.sessionId);case 4:return s=e.sent,u={},ai()?u.ibi=o.packageName:ni()?u.apn=o.packageName:Qn(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",Nu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Bu.apply(this,arguments)}function zu(){return zu=pe(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Uu(),r=n.BuildInfo,i={},ai()?i.iosBundleId=r.packageName:ni()?i.androidPackageName=r.packageName:Qn(t,"operation-not-supported-in-this-environment"),e.next=5,iu(t,i);case 5:case"end":return e.stop()}}),e)}))),zu.apply(this,arguments)}function qu(e){var t=Uu().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Ku(e,t,n){return Gu.apply(this,arguments)}function Gu(){return Gu=pe(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uu(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i($n(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),ni()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Gu.apply(this,arguments)}function Hu(e){var t,n,r,i,a,o,s,u,c,l,h=Uu();Zn("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Zn("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Zn("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zn("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zn("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Wu(e){return Qu.apply(this,arguments)}function Qu(){return(Qu=pe(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$u(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $u(e){if(tr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Xu=function(e){we(n,e);var t=Se(n);function n(){var e;return me(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ye(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Nn(xe(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(tu);function Ju(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:nc(),postBody:null,tenantId:e.tenantId,error:$n(e,"no-auth-event")}}function Yu(e,t){return rc()._set(ic(e),t)}function Zu(e){return ec.apply(this,arguments)}function ec(){return ec=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rc()._get(ic(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,rc()._remove(ic(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),ec.apply(this,arguments)}function tc(e,t){var n,r,i=function(e){var t=ac(e),n=t.link?decodeURIComponent(t.link):void 0,r=ac(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ac(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=ac(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?$n(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function nc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function rc(){return rr(wo)}function ic(e){return $r("authEvent",e.config.apiKey,e.name)}function ac(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=u(t=n)||ee(t)||l(t)||h();r[0];return Xe(r.slice(1).join("?"))}var oc=function(){function e(){me(this,e),this._redirectPersistence=_o,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Js,this._overrideRedirectResult=Vs}return ye(e,[{key:"_initialize",value:function(){var e=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Xu(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Qn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=pe(fe().mark((function e(t,n,r,i){var a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hu(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ps.clear(),e.next=10,this._originValidation(t);case 10:return o=Ju(t,r,i),e.next=13,Yu(t,o);case 13:return e.next=15,Vu(t,o,n);case 15:return s=e.sent,e.next=18,qu(s);case 18:return u=e.sent,e.abrupt("return",Ku(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return zu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Uu(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(pe(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Zu(e);case 2:t.onEvent(uc());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=pe(fe().mark((function n(r){var i,a;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Zu(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=tc(i,r.url)),t.onEvent(a||uc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Uu().handleOpenURL=function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),sc=oc;function uc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:$n("no-auth-event")}}function cc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function lc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return!("file:"!==cc()&&"ionic:"!==cc()&&"capacitor:"!==cc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function hc(){return Ve()&&11===(null===document||void 0===document?void 0:document.documentMode)}function fc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return/Edge\/\d+/.test(e)}function dc(){try{var e=self.localStorage,t=Eo();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();return hc()||fc(e)}()||Be()}catch(n){return pc()&&Be()}return!1}function pc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function vc(){return("http:"===cc()||"https:"===cc()||Fe()||lc())&&!(Ue()||Me())&&dc()&&!pc()}function mc(){return lc()&&"undefined"!==typeof document}function gc(){return yc.apply(this,arguments)}function yc(){return(yc=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kc={LOCAL:"local",NONE:"none",SESSION:"session"},bc=Zn,wc="persistence";function xc(e,t){bc(Object.values(kc).includes(t),e,"invalid-persistence-type"),Ue()?bc(t!==kc.SESSION,e,"unsupported-persistence-type"):Me()?bc(t===kc.NONE,e,"unsupported-persistence-type"):pc()?bc(t===kc.NONE||t===kc.LOCAL&&Be(),e,"unsupported-persistence-type"):bc(t===kc.NONE||dc(),e,"unsupported-persistence-type")}function _c(e){return Ic.apply(this,arguments)}function Ic(){return Ic=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Sc(),r=$r(wc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Ic.apply(this,arguments)}function Sc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Ec=Zn,Tc=function(){function e(){me(this,e),this.browserResolver=rr(ju),this.cordovaResolver=rr(sc),this.underlyingResolver=null,this._redirectPersistence=_o,this._completeRedirectFn=Js,this._overrideRedirectResult=Vs}return ye(e,[{key:"_initialize",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=pe(fe().mark((function e(t,n,r,i){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=pe(fe().mark((function e(t,n,r,i){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return mc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Ec(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,gc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Nc(e){return e.unwrap()}function Cc(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new Pc(e,function(e,t){var n,r=tt(e),i=t;return Zn(t.customData.operationType,r,"argument-error"),Zn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),fo._fromError(r,i)}(e,t));else if(i){var a=Ac(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Ac(e){var t=(e instanceof ze?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof ze)&&"temporaryProof"in t&&"phoneNumber"in t)return ks.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Pn)return null;switch(r){case Rn:n=ra;break;case jn:n=na;break;case Dn:n=ia;break;case On:n=sa;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?aa._create(r,s):qi._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new ta(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof ze?n.credentialFromError(e):n.credentialFromResult(e)}function jc(e,t){return t.catch((function(t){throw t instanceof ze&&Cc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ac(t)),additionalUserInfo:lo(e),user:Oc.getOrCreate(r)}}))}function Dc(e,t){return Rc.apply(this,arguments)}function Rc(){return Rc=pe(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return jc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Rc.apply(this,arguments)}var Pc=function(){function e(t,n){me(this,e),this.resolver=n,this.auth=t.wrapped()}return ye(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return jc(Nc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Oc=function(){function e(t){me(this,e),this._delegate=t,this.multiFactor=function(e){var t=tt(e);return go.has(t)||go.set(t,mo._fromUser(t)),go.get(t)}(t)}return ye(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jc(this.auth,Na(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dc(this.auth,ds(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jc(this.auth,js(this._delegate,t,Tc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_c(fi(this.auth));case 2:return e.abrupt("return",Ws(this._delegate,t,Tc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jc(this.auth,Aa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Dc(this.auth,function(e,t,n){return vs.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return jc(this.auth,function(e,t,n){return As.apply(this,arguments)}(this._delegate,e,Tc))}},{key:"reauthenticateWithRedirect",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_c(fi(this.auth));case 2:return e.abrupt("return",Gs(this._delegate,t,Tc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ja.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return no(tt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return no(tt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return ys.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return to.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Ya.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Oc.USER_MAP=new WeakMap;var Lc=Zn,Mc=function(){function e(t,n){if(me(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Lc(r,"invalid-api-key",{appName:t.name}),Lc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Tc:void 0;this._delegate=n.initialize({options:{persistence:Uc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(qn),this.linkUnderlyingAuth()}return ye(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Oc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){pi(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Va.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ba(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ua.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jc(this._delegate,Ka(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Xa.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ji.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lc(vc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,$s(this._delegate,Tc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",jc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){fi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Fc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Fc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ha.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Fa.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xc(this._delegate,t),e.t0=t,e.next=e.t0===kc.SESSION?4:e.t0===kc.LOCAL?6:e.t0===kc.NONE?11:13;break;case 4:return n=_o,e.abrupt("break",14);case 6:return e.next=8,rr(Ho)._isAvailable();case 8:return r=e.sent,n=r?Ho:wo,e.abrupt("break",14);case 11:return n=Qr,e.abrupt("break",14);case 13:return e.abrupt("return",Qn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return jc(this._delegate,function(e){return fa.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return jc(this._delegate,Ea(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return jc(this._delegate,function(e,t){return Pa.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return jc(this._delegate,function(e,t,n){return Ea(tt(e),Yi.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return jc(this._delegate,function(e,t,n){return Wa.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Dc(this._delegate,function(e,t,n){return fs.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lc(vc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",jc(this._delegate,Ns(this._delegate,t,Tc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lc(vc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_c(this._delegate);case 3:return e.abrupt("return",qs(this._delegate,t,Tc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return qa.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Fc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Oc.getOrCreate(e))},error:t,complete:n}}function Uc(e,t){var n=function(e,t){var n=Sc();if(!n)return[];var r=$r(wc,e,t);switch(n.getItem(r)){case kc.NONE:return[Qr];case kc.LOCAL:return[Ho,_o];case kc.SESSION:return[_o];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ho)||n.push(Ho),"undefined"!==typeof window)for(var r=0,i=[wo,_o];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Qr)||n.push(Qr),n}Mc.Persistence=kc;var Vc=function(){function e(){me(this,e),this.providerId="phone",this._delegate=new ks(Nc(En.auth()))}return ye(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return ks.credential(e,t)}}]),e}();Vc.PHONE_SIGN_IN_METHOD=ks.PHONE_SIGN_IN_METHOD,Vc.PROVIDER_ID=ks.PROVIDER_ID;var Bc,zc=Zn,qc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:En.app();me(this,e),zc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new cs(t,n,i.auth()),this.type=this._delegate.type}return ye(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Bc=En).INTERNAL.registerComponent(new nt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Mc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ln,PASSWORD_RESET:Mn,RECOVER_EMAIL:Fn,REVERT_SECOND_FACTOR_ADDITION:Un,VERIFY_AND_CHANGE_EMAIL:Vn,VERIFY_EMAIL:Bn}},EmailAuthProvider:Yi,FacebookAuthProvider:na,GithubAuthProvider:ia,GoogleAuthProvider:ra,OAuthProvider:ta,SAMLAuthProvider:oa,PhoneAuthProvider:Vc,PhoneMultiFactorGenerator:Pu,RecaptchaVerifier:qc,TwitterAuthProvider:sa,Auth:Mc,AuthCredential:gi,Error:ze}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Bc.registerVersion("@firebase/auth-compat","0.2.18");var Kc="firebasestorage.googleapis.com",Gc=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,Hc(e),"Firebase Storage: ".concat(r," (").concat(Hc(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(ke(i),n.prototype),i}return ye(n,[{key:"_codeEquals",value:function(e){return Hc(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(ze);function Hc(e){return"storage/"+e}function Wc(){return new Gc("unknown","An unknown error occurred, please check the error payload for server response.")}function Qc(){return new Gc("canceled","User canceled the upload/download.")}function $c(){return new Gc("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Xc(e){return new Gc("invalid-argument",e)}function Jc(){return new Gc("app-deleted","The Firebase app was deleted.")}function Yc(e,t){return new Gc("invalid-format","String does not match format '"+e+"': "+t)}function Zc(e){throw new Gc("internal-error","Internal error: "+e)}var el,tl=function(){function e(t,n){me(this,e),this.bucket=t,this.path_=n}return ye(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new Gc("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Kc?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new Gc("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),nl=function(){function e(t){me(this,e),this.promise_=Promise.reject(t)}return ye(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function rl(e){return"string"===typeof e||e instanceof String}function il(e){return al()&&e instanceof Blob}function al(){return"undefined"!==typeof Blob}function ol(e,t,n,r){if(r<t)throw Xc("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Xc("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function sl(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ul(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(el||(el={}));var cl=function(){function e(t,n,r,i,a,o,s,u,c,l,h){var f=this;me(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return ye(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=Wc();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?Jc():Qc());else i(new Gc("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new ll(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new ll(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===el.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new ll(o,r))}else{var s=r.getErrorCode()===el.ABORT;t(!1,new ll(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),ll=ye((function e(t,n,r){me(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function hl(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function fl(){for(var e=hl(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(al())return new Blob(n);throw new Gc("unsupported-environment","This browser doesn't seem to support creating Blobs")}var dl="raw",pl="base64",vl="base64url",ml="data_url",gl=ye((function e(t,n){me(this,e),this.data=t,this.contentType=n||null}));function yl(e,t){switch(e){case dl:return new gl(kl(t));case pl:case vl:return new gl(bl(e,t));case ml:return new gl(function(e){var t=new wl(e);return t.base64?bl(pl,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Yc(ml,"Malformed data URL.")}return kl(t)}(t.rest)}(t),new wl(t).contentType)}throw Wc()}function kl(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function bl(e,t){switch(e){case pl:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Yc(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case vl:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Yc(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw Yc(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var wl=ye((function e(t){me(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Yc(ml,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var xl=function(){function e(t,n){me(this,e);var r=0,i="";il(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return ye(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(il(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(al()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(fl.apply(null,i))}var a=n.map((function(e){return rl(e)?yl(dl,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function _l(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Il(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Sl(e,t){return t}var El=ye((function e(t,n,r,i){me(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Sl})),Tl=null;function Nl(){if(Tl)return Tl;var e=[];e.push(new El("bucket")),e.push(new El("generation")),e.push(new El("metageneration")),e.push(new El("name","fullPath",!0));var t=new El("name");t.xform=function(e,t){return function(e){return!rl(e)||e.length<2?e:Il(e)}(t)},e.push(t);var n=new El("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new El("timeCreated")),e.push(new El("updated")),e.push(new El("md5Hash",null,!0)),e.push(new El("cacheControl",null,!0)),e.push(new El("contentDisposition",null,!0)),e.push(new El("contentEncoding",null,!0)),e.push(new El("contentLanguage",null,!0)),e.push(new El("contentType",null,!0)),e.push(new El("metadata","customMetadata",!0)),Tl=e}function Cl(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new tl(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Al(e,t,n){var r=_l(t);return null===r?null:Cl(e,r,n)}function jl(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var Dl=ye((function e(t,n,r,i){me(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Rl(e){if(!e)throw Wc()}function Pl(e,t){return function(n,r){var i=Al(e,r,t);return Rl(null!==i),i}}function Ol(e,t){return function(n,r){var i=Al(e,r,t);return Rl(null!==i),function(e,t,n,r){var i=_l(t);if(null===i)return null;if(!rl(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return sl("/b/"+o(i)+"/o/"+o(a),n,r)+ul({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Ll(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Gc("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Gc("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Gc("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Gc("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Ml(e){var t=Ll(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Gc("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Fl(e,t,n){var r=sl(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Dl(r,"GET",Pl(e,n),i);return a.errorHandler=Ml(t),a}function Ul(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Vl(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=Ul(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+jl(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=xl.getBlob(c,r,l);if(null===h)throw $c();var f={name:u.fullPath},d=sl(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Dl(d,"POST",Pl(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=Ll(t),v}var Bl=ye((function e(t,n,r,i){me(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function zl(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Rl(!1)}return Rl(!!n&&-1!==(t||["active"]).indexOf(n)),n}var ql=262144;function Kl(e,t,n,r,i,a,o,s){var u=new Bl(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Gc("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(h,f);if(null===p)throw $c();var v=t.maxUploadRetryTime,m=new Dl(n,"POST",(function(e,n){var i,o=zl(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?Pl(t,a)(e,n):null,new Bl(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=Ll(e),m}var Gl="running",Hl="paused",Wl="success",Ql="canceled",$l="error";function Xl(e){switch(e){case"running":case"pausing":case"canceling":return Gl;case"paused":return Hl;case"success":return Wl;case"canceled":return Ql;default:return $l}}var Jl=ye((function e(t,n,r){me(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Yl(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Zl=function(){function e(){var t=this;me(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=el.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=el.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=el.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return ye(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Zc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Zc("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Zc("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Zc("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),eh=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Zl);function th(){return new eh}var nh=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;me(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Nl(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return ye(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=f(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Ul(t,r,i),s={name:o.fullPath},u=sl(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=jl(o,n),h=e.maxUploadRetryTime,f=new Dl(u,"POST",(function(e){var t;zl(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Rl(!1)}return Rl(rl(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=Ll(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,th,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Dl(n,"POST",(function(e){var t=zl(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Rl(!1)}n||Rl(!1);var i=Number(n);return Rl(!isNaN(i)),new Bl(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Ll(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,th,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=ql*this._chunkMultiplier,n=new Bl(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Kl(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,th,i,a);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){ql*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Fl(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,th,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Vl(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,th,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Qc(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Xl(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Jl(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Xl(this._state)){case Wl:Yl(this._resolve.bind(null,this.snapshot))();break;case Ql:case $l:Yl(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Xl(this._state)){case Gl:case Hl:e.next&&Yl(e.next.bind(e,this.snapshot))();break;case Wl:e.complete&&Yl(e.complete.bind(e))();break;default:e.error&&Yl(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),rh=function(){function e(t,n){me(this,e),this._service=t,this._location=n instanceof tl?n:tl.makeFromUrl(n,t.host)}return ye(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new tl(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Il(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new tl(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new Gc("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function ih(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=sl(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Dl(r,"GET",Ol(e,n),i);return a.errorHandler=Ml(t),a}(e.storage,e._location,Nl());return e.storage.makeRequestWithTokens(t,th).then((function(e){if(null===e)throw new Gc("no-download-url","The given file does not have any download URLs.");return e}))}function ah(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new tl(e._location.bucket,n);return new rh(e.storage,r)}function oh(e,t){if(e instanceof ch){var n=e;if(null==n._bucket)throw new Gc("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new rh(n,n._bucket);return null!=t?oh(r,t):r}return void 0!==t?ah(e,t):e}function sh(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof ch)return new rh(e,t);throw Xc("To use ref(service, url), the first argument must be a Storage instance.")}return oh(e,t)}function uh(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:tl.makeFromBucketSpec(n,e)}var ch=function(){function e(t,n,r,i,a){me(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Kc,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?tl.makeFromBucketSpec(i,this._host):uh(this._host,this.app.options)}return ye(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=tl.makeFromBucketSpec(this._url,e):this._bucket=uh(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){ol("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){ol("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=pe(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=pe(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new rh(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new nl(Jc());var a=function(e,t,n,r,i,a){var o=ul(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new cl(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=pe(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=f(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),lh="@firebase/storage",hh="0.9.9",fh="storage";function dh(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new nh(e,new xl(t),n)}(e=tt(e),t,n)}function ph(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new ch(r,i,a,n,$t)}zt(new nt(fh,ph,"PUBLIC").setMultipleInstances(!0)),tn(lh,hh,""),tn(lh,hh,"esm2017");var vh,mh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},gh={},yh=yh||{},kh=mh||self;function bh(){}function wh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function xh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var _h="closure_uid_"+(1e9*Math.random()>>>0),Ih=0;function Sh(e,t,n){return e.call.apply(e.bind,arguments)}function Eh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Th(e,t,n){return(Th=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sh:Eh).apply(null,arguments)}function Nh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ch(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ah(){this.s=this.s,this.o=this.o}var jh={};Ah.prototype.s=!1,Ah.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,_h)&&e[_h]||(e[_h]=++Ih)}(this);delete jh[e]}},Ah.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Dh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Rh=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Ph(e){return Array.prototype.concat.apply([],arguments)}function Oh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Lh(e){return/^[\s\xa0]*$/.test(e)}var Mh,Fh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Uh(e,t){return-1!=e.indexOf(t)}function Vh(e,t){return e<t?-1:e>t?1:0}e:{var Bh=kh.navigator;if(Bh){var zh=Bh.userAgent;if(zh){Mh=zh;break e}}Mh=""}function qh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Kh(e){var t={};for(var n in e)t[n]=e[n];return t}var Gh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Gh.length;a++)n=Gh[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Wh(e){return Wh[" "](e),e}Wh[" "]=bh;var Qh,$h=Uh(Mh,"Opera"),Xh=Uh(Mh,"Trident")||Uh(Mh,"MSIE"),Jh=Uh(Mh,"Edge"),Yh=Jh||Xh,Zh=Uh(Mh,"Gecko")&&!(Uh(Mh.toLowerCase(),"webkit")&&!Uh(Mh,"Edge"))&&!(Uh(Mh,"Trident")||Uh(Mh,"MSIE"))&&!Uh(Mh,"Edge"),ef=Uh(Mh.toLowerCase(),"webkit")&&!Uh(Mh,"Edge");function tf(){var e=kh.document;return e?e.documentMode:void 0}e:{var nf="",rf=function(){var e=Mh;return Zh?/rv:([^\);]+)(\)|;)/.exec(e):Jh?/Edge\/([\d\.]+)/.exec(e):Xh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ef?/WebKit\/(\S+)/.exec(e):$h?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(rf&&(nf=rf?rf[1]:""),Xh){var af=tf();if(null!=af&&af>parseFloat(nf)){Qh=String(af);break e}}Qh=nf}var of,sf={};function uf(){return function(e){var t=sf;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Fh(String(Qh)).split("."),n=Fh("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Vh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Vh(0==a[2].length,0==o[2].length)||Vh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(kh.document&&Xh){var cf=tf();of=cf||(parseInt(Qh,10)||void 0)}else of=void 0;var lf=of,hf=function(){if(!kh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{kh.addEventListener("test",bh,t),kh.removeEventListener("test",bh,t)}catch(n){}return e}();function ff(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function df(e,t){if(ff.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Zh){e:{try{Wh(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:pf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&df.Z.h.call(this)}}ff.prototype.h=function(){this.defaultPrevented=!0},Ch(df,ff);var pf={2:"touch",3:"pen",4:"mouse"};df.prototype.h=function(){df.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var vf="closure_listenable_"+(1e6*Math.random()|0),mf=0;function gf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++mf,this.ca=this.fa=!1}function yf(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function kf(e){this.src=e,this.g={},this.h=0}function bf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Dh(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(yf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function wf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}kf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=wf(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new gf(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var xf="closure_lm_"+(1e6*Math.random()|0),_f={};function If(e,t,n,r,i){if(r&&r.once)return Ef(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)If(e,t[a],n,r,i);return null}return n=Rf(n),e&&e[vf]?e.N(t,n,xh(r)?!!r.capture:!!r,i):Sf(e,t,n,!1,r,i)}function Sf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=xh(i)?!!i.capture:!!i,s=jf(e);if(s||(e[xf]=s=new kf(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Af;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)hf||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Cf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ef(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ef(e,t[a],n,r,i);return null}return n=Rf(n),e&&e[vf]?e.O(t,n,xh(r)?!!r.capture:!!r,i):Sf(e,t,n,!0,r,i)}function Tf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Tf(e,t[a],n,r,i);else r=xh(r)?!!r.capture:!!r,n=Rf(n),e&&e[vf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=wf(a=e.g[t],n,r,i))&&(yf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=jf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=wf(t,n,r,i)),(n=-1<e?t[e]:null)&&Nf(n))}function Nf(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[vf])bf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Cf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=jf(t))?(bf(n,e),0==n.h&&(n.src=null,t[xf]=null)):yf(e)}}}function Cf(e){return e in _f?_f[e]:_f[e]="on"+e}function Af(e,t){if(e.ca)e=!0;else{t=new df(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Nf(e),e=n.call(r,t)}return e}function jf(e){return(e=e[xf])instanceof kf?e:null}var Df="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rf(e){return"function"===typeof e?e:(e[Df]||(e[Df]=function(t){return e.handleEvent(t)}),e[Df])}function Pf(){Ah.call(this),this.i=new kf(this),this.P=this,this.I=null}function Of(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ff(t,e);else if(t instanceof ff)t.target=t.target||e;else{var i=t;Hh(t=new ff(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Lf(o,r,!0,t)&&i}if(i=Lf(o=t.g=e,r,!0,t)&&i,i=Lf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Lf(o=t.g=n[a],r,!1,t)&&i}function Lf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&bf(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Ch(Pf,Ah),Pf.prototype[vf]=!0,Pf.prototype.removeEventListener=function(e,t,n,r){Tf(this,e,t,n,r)},Pf.prototype.M=function(){if(Pf.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)yf(n[r]);delete t.g[e],t.h--}}this.I=null},Pf.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Pf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Mf=kh.JSON.stringify;function Ff(){var e=Hf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Uf,Vf=function(){function e(){me(this,e),this.h=this.g=null}return ye(e,[{key:"add",value:function(e,t){var n=Bf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Bf=new(function(){function e(t,n){me(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ye(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new zf}),(function(e){return e.reset()})),zf=function(){function e(){me(this,e),this.next=this.g=this.h=null}return ye(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function qf(e){kh.setTimeout((function(){throw e}),0)}function Kf(e,t){Uf||function(){var e=kh.Promise.resolve(void 0);Uf=function(){e.then(Wf)}}(),Gf||(Uf(),Gf=!0),Hf.add(e,t)}var Gf=!1,Hf=new Vf;function Wf(){for(var e;e=Ff();){try{e.h.call(e.g)}catch(n){qf(n)}var t=Bf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Gf=!1}function Qf(e,t){Pf.call(this),this.h=e||1,this.g=t||kh,this.j=Th(this.kb,this),this.l=Date.now()}function $f(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Xf(e,t,n){if("function"===typeof e)n&&(e=Th(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Th(e.handleEvent,e)}return 2147483647<Number(t)?-1:kh.setTimeout(e,t||0)}function Jf(e){e.g=Xf((function(){e.g=null,e.i&&(e.i=!1,Jf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ch(Qf,Pf),(vh=Qf.prototype).da=!1,vh.S=null,vh.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Of(this,"tick"),this.da&&($f(this),this.start()))}},vh.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},vh.M=function(){Qf.Z.M.call(this),$f(this),delete this.g};var Yf=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ye(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Jf(this)}},{key:"M",value:function(){Nn(xe(n.prototype),"M",this).call(this),this.g&&(kh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ah);function Zf(e){Ah.call(this),this.h=e,this.g={}}Ch(Zf,Ah);var ed=[];function td(e,t,n,r){Array.isArray(n)||(n&&(ed[0]=n.toString()),n=ed);for(var i=0;i<n.length;i++){var a=If(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function nd(e){qh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Nf(e)}),e),e.g={}}function rd(){this.g=!0}function id(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Mf(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Zf.prototype.M=function(){Zf.Z.M.call(this),nd(this)},Zf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rd.prototype.Aa=function(){this.g=!1},rd.prototype.info=function(){};var ad={},od=null;function sd(){return od=od||new Pf}function ud(e){ff.call(this,ad.Ma,e)}function cd(e){var t=sd();Of(t,new ud(t,e))}function ld(e,t){ff.call(this,ad.STAT_EVENT,e),this.stat=t}function hd(e){var t=sd();Of(t,new ld(t,e))}function fd(e,t){ff.call(this,ad.Na,e),this.size=t}function dd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return kh.setTimeout((function(){e()}),t)}ad.Ma="serverreachability",Ch(ud,ff),ad.STAT_EVENT="statevent",Ch(ld,ff),ad.Na="timingevent",Ch(fd,ff);var pd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vd={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function md(){}function gd(e){return e.h||(e.h=e.i())}function yd(){}md.prototype.h=null;var kd,bd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function wd(){ff.call(this,"d")}function xd(){ff.call(this,"c")}function _d(){}function Id(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Zf(this),this.P=Ed,e=Yh?125:void 0,this.W=new Qf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Sd}function Sd(){this.i=null,this.g="",this.h=!1}Ch(wd,ff),Ch(xd,ff),Ch(_d,md),_d.prototype.g=function(){return new XMLHttpRequest},_d.prototype.i=function(){return{}},kd=new _d;var Ed=45e3,Td={},Nd={};function Cd(e,t,n){e.K=1,e.v=Yd(Hd(t)),e.s=n,e.U=!0,Ad(e,null)}function Ad(e,t){e.F=Date.now(),Pd(e),e.A=Hd(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),hp(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Sd,e.g=dv(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Yf(Th(e.Ia,e,e.g),e.O)),td(e.V,e.g,"readystatechange",e.gb),t=e.H?Kh(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),cd(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function jd(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Dd(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Rd(e,n))==Nd){4==t&&(e.o=4,hd(14),i=!1),id(e.j,e.m,null,"[Incomplete Response]");break}if(r==Td){e.o=4,hd(15),id(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}id(e.j,e.m,r,null),Ud(e,r)}jd(e)&&r!=Nd&&r!=Td&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,hd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),av(t),t.L=!0,hd(11))):(id(e.j,e.m,n,"[Invalid Chunked Response]"),Fd(e),Md(e))}function Rd(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Nd:(n=Number(t.substring(n,r)),isNaN(n)?Td:(r+=1)+n>t.length?Nd:(t=t.substr(r,n),e.C=r+n,t))}function Pd(e){e.Y=Date.now()+e.P,Od(e,e.P)}function Od(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=dd(Th(e.eb,e),t)}function Ld(e){e.B&&(kh.clearTimeout(e.B),e.B=null)}function Md(e){0==e.l.G||e.I||uv(e.l,e)}function Fd(e){Ld(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,$f(e.W),nd(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ud(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||kp(n.i,e)))if(n.I=e.N,!e.J&&kp(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sv(n),Xp(n)}iv(n),hd(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=dd(Th(n.ab,n),6e3));if(1>=yp(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else lv(n,11)}else if((e.J||n.g==e)&&sv(n),!Lh(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Uh(l,"spdy")||Uh(l,"quic")||Uh(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(bp(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Jd(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=fv(r,r.H?r.la:null,r.W),d.J){wp(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Ld(p),Pd(p)),r.g=d}else rv(r);0<n.l.length&&Zp(n)}else"stop"!=a[0]&&"close"!=a[0]||lv(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?lv(n,7):$p(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}cd(4)}catch(a){}}function Vd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(wh(e)||"string"===typeof e)Rh(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(wh(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(wh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Bd(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Bd)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function zd(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];qd(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)qd(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function qd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(vh=Id.prototype).setTimeout=function(e){this.P=e},vh.gb=function(e){e=e.target;var t=this.L;t&&3==Kp(e)?t.l():this.Ia(e)},vh.Ia=function(e){try{if(e==this.g)e:{var t=Kp(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Yh||this.g&&(this.h.h||this.g.ga()||Gp(this.g)))){this.I||4!=t||7==n||cd(8==n||0>=r?3:2),Ld(this);var i=this.g.ba();this.N=i;t:if(jd(this)){var a=Gp(this.g);e="";var o=a.length,s=4==Kp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Fd(this),Md(this);var u="";break t}this.h.i=new kh.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lh(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,hd(12),Fd(this),Md(this);break e}id(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ud(this,i)}this.U?(Dd(this,t,u),Yh&&this.i&&3==t&&(td(this.V,this.W,"tick",this.fb),this.W.start())):(id(this.j,this.m,u,null),Ud(this,u)),4==t&&Fd(this),this.i&&!this.I&&(4==t?uv(this.l,this):(this.i=!1,Pd(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,hd(12)):(this.o=0,hd(13)),Fd(this),Md(this)}}}catch(t){}},vh.fb=function(){if(this.g){var e=Kp(this.g),t=this.g.ga();this.C<t.length&&(Ld(this),Dd(this,e,t),this.i&&4!=e&&Pd(this))}},vh.cancel=function(){this.I=!0,Fd(this)},vh.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(cd(3),hd(17)),Fd(this),this.o=2,Md(this)):Od(this,this.Y-e)},(vh=Bd.prototype).R=function(){zd(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},vh.T=function(){return zd(this),this.g.concat()},vh.get=function(e,t){return qd(this.h,e)?this.h[e]:t},vh.set=function(e,t){qd(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},vh.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Kd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gd(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Gd){this.g=void 0!==t?t:e.g,Wd(this,e.j),this.s=e.s,Qd(this,e.i),$d(this,e.m),this.l=e.l,t=e.h;var n=new sp;n.i=t.i,t.g&&(n.g=new Bd(t.g),n.h=t.h),Xd(this,n),this.o=e.o}else e&&(n=String(e).match(Kd))?(this.g=!!t,Wd(this,n[1]||"",!0),this.s=Zd(n[2]||""),Qd(this,n[3]||"",!0),$d(this,n[4]),this.l=Zd(n[5]||"",!0),Xd(this,n[6]||"",!0),this.o=Zd(n[7]||"")):(this.g=!!t,this.h=new sp(null,this.g))}function Hd(e){return new Gd(e)}function Wd(e,t,n){e.j=n?Zd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Qd(e,t,n){e.i=n?Zd(t,!0):t}function $d(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Xd(e,t,n){t instanceof sp?(e.h=t,function(e,t){t&&!e.j&&(up(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(cp(this,t),hp(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ep(t,ap)),e.h=new sp(t,e.g))}function Jd(e,t,n){e.h.set(t,n)}function Yd(e){return Jd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Zd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ep(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,tp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Gd.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ep(t,np,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ep(t,np,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ep(n,"/"==n.charAt(0)?ip:rp,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ep(n,op)),e.join("")};var np=/[#\/\?@]/g,rp=/[#\?:]/g,ip=/[#\?]/g,ap=/[#\?@]/g,op=/#/g;function sp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function up(e){e.g||(e.g=new Bd,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function cp(e,t){up(e),t=fp(e,t),qd(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,qd((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&zd(e)))}function lp(e,t){return up(e),t=fp(e,t),qd(e.g.h,t)}function hp(e,t,n){cp(e,t),0<n.length&&(e.i=null,e.g.set(fp(e,t),Oh(n)),e.h+=n.length)}function fp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(vh=sp.prototype).add=function(e,t){up(this),this.i=null,e=fp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},vh.forEach=function(e,t){up(this),this.g.forEach((function(n,r){Rh(n,(function(n){e.call(t,n,r,this)}),this)}),this)},vh.T=function(){up(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},vh.R=function(e){up(this);var t=[];if("string"===typeof e)lp(this,e)&&(t=Ph(t,this.g.get(fp(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Ph(t,e[n])}return t},vh.set=function(e,t){return up(this),this.i=null,lp(this,e=fp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},vh.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},vh.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var dp=ye((function e(t,n){me(this,e),this.h=t,this.g=n}));function pp(e){this.l=e||mp,kh.PerformanceNavigationTiming?e=0<(e=kh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(kh.g&&kh.g.Ea&&kh.g.Ea()&&kh.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vp,mp=10;function gp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function yp(e){return e.h?1:e.g?e.g.size:0}function kp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function bp(e,t){e.g?e.g.add(t):e.h=t}function wp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function xp(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ve(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Oh(e.i)}function _p(){}function Ip(){this.g=new _p}function Sp(e,t,n){var r=n||"";try{Vd(e,(function(e,n){var i=e;xh(e)&&(i=Mf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ep(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Tp(e){this.l=e.$b||null,this.j=e.ib||!1}function Np(e,t){Pf.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Cp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pp.prototype.cancel=function(){if(this.i=xp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ve(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},_p.prototype.stringify=function(e){return kh.JSON.stringify(e,void 0)},_p.prototype.parse=function(e){return kh.JSON.parse(e,void 0)},Ch(Tp,md),Tp.prototype.g=function(){return new Np(this.l,this.j)},Tp.prototype.i=(vp={},function(){return vp}),Ch(Np,Pf);var Cp=0;function Ap(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function jp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Dp(e)}function Dp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(vh=Np.prototype).open=function(e,t){if(this.readyState!=Cp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Dp(this)},vh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||kh).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},vh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jp(this)),this.readyState=Cp},vh.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dp(this)),this.g&&(this.readyState=3,Dp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof kh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ap(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},vh.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jp(this):Dp(this),3==this.readyState&&Ap(this)}},vh.Ua=function(e){this.g&&(this.response=this.responseText=e,jp(this))},vh.Ta=function(e){this.g&&(this.response=e,jp(this))},vh.ha=function(){this.g&&jp(this)},vh.setRequestHeader=function(e,t){this.v.append(e,t)},vh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},vh.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Np.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Rp=kh.JSON.parse;function Pp(e){Pf.call(this),this.headers=new Bd,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Op,this.K=this.L=!1}Ch(Pp,Pf);var Op="",Lp=/^https?$/i,Mp=["POST","PUT"];function Fp(e){return"content-type"==e.toLowerCase()}function Up(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Vp(e),zp(e)}function Vp(e){e.D||(e.D=!0,Of(e,"complete"),Of(e,"error"))}function Bp(e){if(e.h&&"undefined"!=typeof yh&&(!e.C[1]||4!=Kp(e)||2!=e.ba()))if(e.v&&4==Kp(e))Xf(e.Fa,0,e);else if(Of(e,"readystatechange"),4==Kp(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Kd)[1]||null;if(!a&&kh.self&&kh.self.location){var o=kh.self.location.protocol;a=o.substr(0,o.length-1)}i=!Lp.test(a?a.toLowerCase():"")}t=i}if(t)Of(e,"complete"),Of(e,"success");else{e.m=6;try{var s=2<Kp(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Vp(e)}}finally{zp(e)}}}function zp(e,t){if(e.g){qp(e);var n=e.g,r=e.C[0]?bh:null;e.g=null,e.C=null,t||Of(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function qp(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(kh.clearTimeout(e.A),e.A=null)}function Kp(e){return e.g?e.g.readyState:0}function Gp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Op:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Hp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return qh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Jd(e,t,n))}function Wp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qp(e){this.za=0,this.l=[],this.h=new rd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wp("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wp("baseRetryDelayMs",5e3,e),this.$a=Wp("retryDelaySeedMs",1e4,e),this.Ya=Wp("forwardChannelMaxRetries",2,e),this.ra=Wp("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new pp(e&&e.concurrentRequestLimit),this.Ca=new Ip,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function $p(e){if(Jp(e),3==e.G){var t=e.V++,n=Hd(e.F);Jd(n,"SID",e.J),Jd(n,"RID",t),Jd(n,"TYPE","terminate"),tv(e,n),(t=new Id(e,e.h,t,void 0)).K=2,t.v=Yd(Hd(n)),n=!1,kh.navigator&&kh.navigator.sendBeacon&&(n=kh.navigator.sendBeacon(t.v.toString(),"")),!n&&kh.Image&&((new Image).src=t.v,n=!0),n||(t.g=dv(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Pd(t)}hv(e)}function Xp(e){e.g&&(av(e),e.g.cancel(),e.g=null)}function Jp(e){Xp(e),e.u&&(kh.clearTimeout(e.u),e.u=null),sv(e),e.i.cancel(),e.m&&("number"===typeof e.m&&kh.clearTimeout(e.m),e.m=null)}function Yp(e,t){e.l.push(new dp(e.Za++,t)),3==e.G&&Zp(e)}function Zp(e){gp(e.i)||e.m||(e.m=!0,Kf(e.Ha,e),e.C=0)}function ev(e,t){var n;n=t?t.m:e.V++;var r=Hd(e.F);Jd(r,"SID",e.J),Jd(r,"RID",n),Jd(r,"AID",e.U),tv(e,r),e.o&&e.s&&Hp(r,e.o,e.s),n=new Id(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=nv(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),bp(e.i,n),Cd(n,r,t)}function tv(e,t){e.j&&Vd({},(function(e,n){Jd(t,n,e)}))}function nv(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Th(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Sp(l,o,"req"+c+"_")}catch(Bv){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function rv(e){e.g||e.u||(e.Y=1,Kf(e.Ga,e),e.A=0)}function iv(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=dd(Th(e.Ga,e),cv(e,e.A)),e.A++,!0)}function av(e){null!=e.B&&(kh.clearTimeout(e.B),e.B=null)}function ov(e){e.g=new Id(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Hd(e.oa);Jd(t,"RID","rpc"),Jd(t,"SID",e.J),Jd(t,"CI",e.N?"0":"1"),Jd(t,"AID",e.U),tv(e,t),Jd(t,"TYPE","xmlhttp"),e.o&&e.s&&Hp(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Yd(Hd(t)),n.s=null,n.U=!0,Ad(n,e)}function sv(e){null!=e.v&&(kh.clearTimeout(e.v),e.v=null)}function uv(e,t){var n=null;if(e.g==t){sv(e),av(e),e.g=null;var r=2}else{if(!kp(e.i,t))return;n=t.D,wp(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Of(r=sd(),new fd(r,n,t,i)),Zp(e)}else rv(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(yp(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=dd(Th(e.Ha,e,t),cv(e,e.C)),e.C++,!0))}(e,t)||2==r&&iv(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:lv(e,5);break;case 4:lv(e,10);break;case 3:lv(e,6);break;default:lv(e,2)}}function cv(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function lv(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Th(e.jb,e);n||(n=new Gd("//www.google.com/images/cleardot.gif"),kh.location&&"http"==kh.location.protocol||Wd(n,"https"),Yd(n)),function(e,t){var n=new rd;if(kh.Image){var r=new Image;r.onload=Nh(Ep,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Nh(Ep,n,r,"TestLoadImage: error",!1,t),r.onabort=Nh(Ep,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Nh(Ep,n,r,"TestLoadImage: timeout",!1,t),kh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else hd(2);e.G=0,e.j&&e.j.va(t),hv(e),Jp(e)}function hv(e){e.G=0,e.I=-1,e.j&&(0==xp(e.i).length&&0==e.l.length||(e.i.i.length=0,Oh(e.l),e.l.length=0),e.j.ua())}function fv(e,t,n){var r=function(e){return e instanceof Gd?Hd(e):new Gd(e,void 0)}(n);if(""!=r.i)t&&Qd(r,t+"."+r.i),$d(r,r.m);else{var i=kh.location;r=function(e,t,n,r){var i=new Gd(null,void 0);return e&&Wd(i,e),t&&Qd(i,t),n&&$d(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&qh(e.aa,(function(e,t){Jd(r,t,e)})),t=e.D,n=e.sa,t&&n&&Jd(r,t,n),Jd(r,"VER",e.ma),tv(e,r),r}function dv(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Pp(new Tp({ib:!0})):new Pp(e.qa)).L=e.H,t}function pv(){}function vv(){if(Xh&&!(10<=Number(lf)))throw Error("Environmental error: no available transport.")}function mv(e,t){Pf.call(this),this.g=new Qp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Lh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Lh(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new kv(this)}function gv(e){wd.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yv(){xd.call(this),this.status=1}function kv(e){this.g=e}(vh=Pp.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kd.g(),this.C=this.u?gd(this.u):gd(kd),this.g.onreadystatechange=Th(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Up(this,a)}e=n||"";var i=new Bd(this.headers);r&&Vd(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Fp,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=kh.FormData&&e instanceof kh.FormData,!(0<=Dh(Mp,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qp(this),0<this.B&&((this.K=function(e){return Xh&&uf()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Th(this.pa,this)):this.A=Xf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Up(this,a)}},vh.pa=function(){"undefined"!=typeof yh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Of(this,"timeout"),this.abort(8))},vh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Of(this,"complete"),Of(this,"abort"),zp(this))},vh.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zp(this,!0)),Pp.Z.M.call(this)},vh.Fa=function(){this.s||(this.F||this.v||this.l?Bp(this):this.cb())},vh.cb=function(){Bp(this)},vh.ba=function(){try{return 2<Kp(this)?this.g.status:-1}catch(vp){return-1}},vh.ga=function(){try{return this.g?this.g.responseText:""}catch(vp){return""}},vh.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Rp(t)}},vh.Da=function(){return this.m},vh.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(vh=Qp.prototype).ma=8,vh.G=1,vh.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},vh.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Id(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Hh(n=Kh(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=nv(this,t,r),Jd(i=Hd(this.F),"RID",e),Jd(i,"CVER",22),this.D&&Jd(i,"X-HTTP-Session-Id",this.D),tv(this,i),this.o&&n&&Hp(i,this.o,n),bp(this.i,t),this.Ra&&Jd(i,"TYPE","init"),this.ja?(Jd(i,"$req",r),Jd(i,"SID","null"),t.$=!0,Cd(t,i,null)):Cd(t,i,r),this.G=2}}else 3==this.G&&(e?ev(this,e):0==this.l.length||gp(this.i)||ev(this))},vh.Ga=function(){if(this.u=null,ov(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=dd(Th(this.bb,this),e)}},vh.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,hd(10),Xp(this),ov(this))},vh.ab=function(){null!=this.v&&(this.v=null,Xp(this),iv(this),hd(19))},vh.jb=function(e){e?(this.h.info("Successfully pinged google.com"),hd(2)):(this.h.info("Failed to ping google.com"),hd(1))},(vh=pv.prototype).xa=function(){},vh.wa=function(){},vh.va=function(){},vh.ua=function(){},vh.Oa=function(){},vv.prototype.g=function(e,t){return new mv(e,t)},Ch(mv,Pf),mv.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Kf(Th(e.hb,e,t))),hd(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=fv(e,null,e.W),Zp(e)},mv.prototype.close=function(){$p(this.g)},mv.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Yp(this.g,t)}else this.v?((t={}).__data__=Mf(e),Yp(this.g,t)):Yp(this.g,e)},mv.prototype.M=function(){this.g.j=null,delete this.j,$p(this.g),delete this.g,mv.Z.M.call(this)},Ch(gv,wd),Ch(yv,xd),Ch(kv,pv),kv.prototype.xa=function(){Of(this.g,"a")},kv.prototype.wa=function(e){Of(this.g,new gv(e))},kv.prototype.va=function(e){Of(this.g,new yv(e))},kv.prototype.ua=function(){Of(this.g,"b")},vv.prototype.createWebChannel=vv.prototype.g,mv.prototype.send=mv.prototype.u,mv.prototype.open=mv.prototype.m,mv.prototype.close=mv.prototype.close,pd.NO_ERROR=0,pd.TIMEOUT=8,pd.HTTP_ERROR=6,vd.COMPLETE="complete",yd.EventType=bd,bd.OPEN="a",bd.CLOSE="b",bd.ERROR="c",bd.MESSAGE="d",Pf.prototype.listen=Pf.prototype.N,Pp.prototype.listenOnce=Pp.prototype.O,Pp.prototype.getLastError=Pp.prototype.La,Pp.prototype.getLastErrorCode=Pp.prototype.Da,Pp.prototype.getStatus=Pp.prototype.ba,Pp.prototype.getResponseJson=Pp.prototype.Qa,Pp.prototype.getResponseText=Pp.prototype.ga,Pp.prototype.send=Pp.prototype.ea;var bv=gh.createWebChannelTransport=function(){return new vv},wv=gh.getStatEventTarget=function(){return sd()},xv=gh.ErrorCode=pd,_v=gh.EventType=vd,Iv=gh.Event=ad,Sv=gh.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ev=gh.FetchXmlHttpFactory=Tp,Tv=gh.WebChannel=yd,Nv=gh.XhrIo=Pp,Cv="@firebase/firestore",Av=function(){function e(t){me(this,e),this.uid=t}return ye(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Av.UNAUTHENTICATED=new Av(null),Av.GOOGLE_CREDENTIALS=new Av("google-credentials-uid"),Av.FIRST_PARTY=new Av("first-party-uid"),Av.MOCK_USER=new Av("mock-user");var jv="9.9.1",Dv=new dt("@firebase/firestore");function Rv(){return Dv.logLevel}function Pv(e){if(Dv.logLevel<=ot.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Mv);Dv.debug.apply(Dv,["Firestore (".concat(jv,"): ").concat(e)].concat(te(i)))}}function Ov(e){if(Dv.logLevel<=ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Mv);Dv.error.apply(Dv,["Firestore (".concat(jv,"): ").concat(e)].concat(te(i)))}}function Lv(e){if(Dv.logLevel<=ot.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Mv);Dv.warn.apply(Dv,["Firestore (".concat(jv,"): ").concat(e)].concat(te(i)))}}function Mv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Fv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(jv,") INTERNAL ASSERTION FAILED: ")+e;throw Ov(t),new Error(t)}function Uv(e,t){e||Fv()}function Vv(e,t){return e}var Bv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},zv=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ye(n)}(ze),qv=ye((function e(){var t=this;me(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Kv=ye((function e(t,n){me(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Gv=function(){function e(){me(this,e)}return ye(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Av.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Hv=function(){function e(t){me(this,e),this.token=t,this.changeListener=null}return ye(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Wv=function(){function e(t){me(this,e),this.t=t,this.currentUser=Av.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ye(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new qv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new qv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Pv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Pv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new qv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Pv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Uv("string"==typeof n.accessToken),new Kv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Uv(null===e||"string"==typeof e),new Av(e)}}]),e}(),Qv=ye((function e(t,n,r){me(this,e),this.type="FirstParty",this.user=Av.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),$v=function(){function e(t,n,r){me(this,e),this.h=t,this.l=n,this.m=r}return ye(e,[{key:"getToken",value:function(){return Promise.resolve(new Qv(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Av.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Xv=ye((function e(t){me(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Jv=function(){function e(t){me(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ye(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Pv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Pv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Pv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Pv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Uv("string"==typeof t.token),e.p=t.token,new Xv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Yv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Zv=function(){function e(){me(this,e)}return ye(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Yv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function em(e,t){return e<t?-1:e>t?1:0}function tm(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function nm(e){return e+"\0"}var rm=function(){function e(t,n){if(me(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new zv(Bv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new zv(Bv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new zv(Bv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zv(Bv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ye(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?em(this.nanoseconds,e.nanoseconds):em(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),im=function(){function e(t){me(this,e),this.timestamp=t}return ye(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new rm(0,0))}},{key:"max",value:function(){return new e(new rm(253402300799,999999999))}}]),e}(),am=function(){function e(t,n,r){me(this,e),void 0===n?n=0:n>t.length&&Fv(),void 0===r?r=t.length-n:r>t.length-n&&Fv(),this.segments=t,this.offset=n,this.len=r}return ye(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),om=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new zv(Bv.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,te(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(am),sm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,um=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return sm.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new zv(Bv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new zv(Bv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new zv(Bv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new zv(Bv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(am),cm=function(){function e(t){me(this,e),this.path=t}return ye(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===om.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(om.fromString(t))}},{key:"fromName",value:function(t){return new e(om.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(om.emptyPath())}},{key:"comparator",value:function(e,t){return om.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new om(t.slice()))}}]),e}(),lm=ye((function e(t,n,r,i){me(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function hm(e){return e.fields.find((function(e){return 2===e.kind}))}function fm(e){return e.fields.filter((function(e){return 2!==e.kind}))}lm.UNKNOWN_ID=-1;var dm=ye((function e(t,n){me(this,e),this.fieldPath=t,this.kind=n})),pm=function(){function e(t,n){me(this,e),this.sequenceNumber=t,this.offset=n}return ye(e,null,[{key:"empty",value:function(){return new e(0,gm.min())}}]),e}();function vm(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=im.fromTimestamp(1e9===r?new rm(n+1,0):new rm(n,r));return new gm(i,cm.empty(),t)}function mm(e){return new gm(e.readTime,e.key,-1)}var gm=function(){function e(t,n,r){me(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ye(e,null,[{key:"min",value:function(){return new e(im.min(),cm.empty(),-1)}},{key:"max",value:function(){return new e(im.max(),cm.empty(),-1)}}]),e}();function ym(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=cm.comparator(e.documentKey,t.documentKey))?n:em(e.largestBatchId,t.largestBatchId)}var km="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bm=function(){function e(){me(this,e),this.onCommittedListeners=[]}return ye(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function wm(e){return xm.apply(this,arguments)}function xm(){return xm=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Bv.FAILED_PRECONDITION&&t.message===km){e.next=2;break}throw t;case 2:Pv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),xm.apply(this,arguments)}var _m=function(){function e(t){var n=this;me(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ye(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Fv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ve(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Im=function(){function e(t,n){var r=this;me(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new qv,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Tm(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=Dm(e.target.error);r.T.reject(new Tm(t,n))}}return ye(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(Pv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Cm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Tm(n,t)}}}]),e}(),Sm=function(){function e(t,n,r){me(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Oe())&&Ov("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ye(e,[{key:"k",value:function(){var e=pe(fe().mark((function e(t){var n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Pv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Tm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new zv(Bv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new zv(Bv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Tm(t,n))},i.onupgradeneeded=function(e){Pv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){Pv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=pe(fe().mark((function e(t,n,r,i){var a,o,s,u,c,l=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(fe().mark((function e(){var n,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Im.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),_m.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u=e.t1,c="FirebaseError"!==u.name&&o<3,Pv("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(u));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Pv("SimpleDb","Removing database:",e),Am(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!Be())return!1;if(e.S())return!0;var t=Oe(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/LargerE-commerce",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Em=function(){function e(t){me(this,e),this.$=t,this.B=!1,this.L=null}return ye(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Am(this.$.delete())}}]),e}(),Tm=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,Bv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ye(n)}(zv);function Nm(e){return"IndexedDbTransactionError"===e.name}var Cm=function(){function e(t){me(this,e),this.store=t}return ye(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Pv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Pv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Am(n)}},{key:"add",value:function(e){return Pv("SimpleDb","ADD",this.store.name,e,e),Am(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Am(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Pv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Pv("SimpleDb","DELETE",this.store.name,e),Am(this.store.delete(e))}},{key:"count",value:function(){return Pv("SimpleDb","COUNT",this.store.name),Am(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new _m((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new _m((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){Pv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new _m((function(n,r){t.onerror=function(e){var t=Dm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new _m((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Em(i),o=t(i.primaryKey,i.value,a);if(o instanceof _m){var s=o.catch((function(e){return a.done(),_m.reject(e)}));n.push(s)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return _m.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Am(e){return new _m((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Dm(e.target.error);n(t)}}))}var jm=!1;function Dm(e){var t=Sm.v(Oe());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new zv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return jm||(jm=!0,setTimeout((function(){throw r}),0)),r}}return e}var Rm=function(){function e(t,n){me(this,e),this.asyncQueue=t,this.X=n,this.task=null}return ye(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;Pv("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Pv,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Nm(e.t4)){e.next=17;break}Pv("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,wm(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Pm=function(){function e(t,n){me(this,e),this.localStore=t,this.persistence=n}return ye(e,[{key:"tt",value:function(){var e=pe(fe().mark((function e(){var t,n=this,r=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return _m.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Pv("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return Pv("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=mm(t);ym(r,n)>0&&(n=r)})),new gm(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Om=function(){function e(t,n){var r=this;me(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return ye(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function Lm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Mm(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fm(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Om.ot=-1;var Um=function(){function e(t,n){me(this,e),this.comparator=t,this.root=n||Bm.EMPTY}return ye(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Bm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Vm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Vm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Vm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Vm(this.root,e,this.comparator,!0)}}]),e}(),Vm=function(){function e(t,n,r,i){me(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ye(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Bm=function(){function e(t,n,r,i,a){me(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ye(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Fv();if(this.right.isRed())throw Fv();var e=this.left.check();if(e!==this.right.check())throw Fv();return e+(this.isRed()?0:1)}}]),e}();Bm.EMPTY=null,Bm.RED=!0,Bm.BLACK=!1,Bm.EMPTY=new(function(){function e(){me(this,e),this.size=0}return ye(e,[{key:"key",get:function(){throw Fv()}},{key:"value",get:function(){throw Fv()}},{key:"color",get:function(){throw Fv()}},{key:"left",get:function(){throw Fv()}},{key:"right",get:function(){throw Fv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Bm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var zm=function(){function e(t){me(this,e),this.comparator=t,this.data=new Um(this.comparator)}return ye(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new qm(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new qm(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),qm=function(){function e(t){me(this,e),this.iter=t}return ye(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Km(e){return e.hasNext()?e.getNext():void 0}var Gm=function(){function e(t){me(this,e),this.fields=t,t.sort(um.comparator)}return ye(e,[{key:"unionWith",value:function(t){var n,r=new zm(um.comparator),i=ve(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=ve(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=ve(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return tm(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Hm=function(e){function t(e){me(this,t),this.binaryString=e}return ye(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return em(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Hm.EMPTY_BYTE_STRING=new Hm("");var Wm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qm(e){if(Uv(!!e),"string"==typeof e){var t=0,n=Wm.exec(e);if(Uv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:$m(e.seconds),nanos:$m(e.nanos)}}function $m(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xm(e){return"string"==typeof e?Hm.fromBase64String(e):Hm.fromUint8Array(e)}function Jm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ym(e){var t=e.mapValue.fields.__previous_value__;return Jm(t)?Ym(t):t}function Zm(e){var t=Qm(e.mapValue.fields.__local_write_time__.timestampValue);return new rm(t.seconds,t.nanos)}var eg=ye((function e(t,n,r,i,a,o,s,u){me(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),tg=function(){function e(t,n){me(this,e),this.projectId=t,this.database=n||"(default)"}return ye(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function ng(e){return null==e}function rg(e){return 0===e&&1/e==-1/0}function ig(e){return"number"==typeof e&&Number.isInteger(e)&&!rg(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ag={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},og={nullValue:"NULL_VALUE"};function sg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Jm(e)?4:wg(e)?9007199254740991:10:Fv()}function ug(e,t){if(e===t)return!0;var n=sg(e);if(n!==sg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zm(e).isEqual(Zm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Qm(e.timestampValue),r=Qm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xm(e.bytesValue).isEqual(Xm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $m(e.geoPointValue.latitude)===$m(t.geoPointValue.latitude)&&$m(e.geoPointValue.longitude)===$m(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $m(e.integerValue)===$m(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=$m(e.doubleValue),r=$m(t.doubleValue);return n===r?rg(n)===rg(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return tm(e.arrayValue.values||[],t.arrayValue.values||[],ug);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Lm(n)!==Lm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ug(n[i],r[i])))return!1;return!0}(e,t);default:return Fv()}}function cg(e,t){return void 0!==(e.values||[]).find((function(e){return ug(e,t)}))}function lg(e,t){if(e===t)return 0;var n=sg(e),r=sg(t);if(n!==r)return em(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return em(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=$m(e.integerValue||e.doubleValue),r=$m(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hg(e.timestampValue,t.timestampValue);case 4:return hg(Zm(e),Zm(t));case 5:return em(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Xm(e),r=Xm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=em(n[i],r[i]);if(0!==a)return a}return em(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=em($m(e.latitude),$m(t.latitude));return 0!==n?n:em($m(e.longitude),$m(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=lg(n[i],r[i]);if(a)return a}return em(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ag.mapValue&&t===ag.mapValue)return 0;if(e===ag.mapValue)return 1;if(t===ag.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=em(r[o],a[o]);if(0!==s)return s;var u=lg(n[r[o]],i[a[o]]);if(0!==u)return u}return em(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Fv()}}function hg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return em(e,t);var n=Qm(e),r=Qm(t),i=em(n.seconds,r.seconds);return 0!==i?i:em(n.nanos,r.nanos)}function fg(e){return dg(e)}function dg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Qm(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Xm(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,cm.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ve(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=dg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ve(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(dg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Fv();var t,n}function pg(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vg(e){return!!e&&"integerValue"in e}function mg(e){return!!e&&"arrayValue"in e}function gg(e){return!!e&&"nullValue"in e}function yg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function kg(e){return!!e&&"mapValue"in e}function bg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Mm(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bg(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bg(e.arrayValue.values[r]);return n}return Object.assign({},e)}function wg(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function xg(e){return"nullValue"in e?og:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?pg(tg.empty(),cm.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Fv()}function _g(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?pg(tg.empty(),cm.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ag:Fv()}function Ig(e,t){var n=lg(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Sg(e,t){var n=lg(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Eg=function(){function e(t){me(this,e),this.value=t}return ye(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!kg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bg(t)}},{key:"setAll",value:function(e){var t=this,n=um.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bg(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());kg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ug(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];kg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Mm(t,(function(t,n){return e[t]=n}));var r,i=ve(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bg(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Tg(e){var t=[];return Mm(e.fields,(function(e,n){var r=new um([e]);if(kg(n)){var i=Tg(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ve(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Gm(t)}var Ng=function(){function e(t,n,r,i,a,o){me(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ye(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Eg.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Eg.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=im.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,im.min(),im.min(),Eg.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,im.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,im.min(),Eg.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,im.min(),Eg.empty(),2)}}]),e}(),Cg=ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;me(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ut=null}));function Ag(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Cg(e,t,n,r,i,a,o)}function jg(e){var t=Vv(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+fg(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ng(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return fg(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return fg(e)})).join(",")),t.ut=n}return t.ut}function Dg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Qg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!ug(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xg(e.startAt,t.startAt)&&Xg(e.endAt,t.endAt)}function Rg(e){return cm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Pg(e,t){return e.filters.filter((function(e){return e instanceof Mg&&e.field.isEqual(t)}))}function Og(e,t,n){var r,i=og,a=!0,o=ve(Pg(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=og,c=!0;switch(s.op){case"<":case"<=":u=xg(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=og}Ig({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Ig({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Lg(e,t,n){var r,i=ag,a=!0,o=ve(Pg(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=ag,c=!0;switch(s.op){case">=":case">":u=_g(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=ag}Sg({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Sg({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Mg=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(lg(t,this.value)):null!==t&&sg(this.value)===sg(t)&&this.at(lg(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fv()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Fg(e,t,r):"array-contains"===t?new zg(e,r):"in"===t?new qg(e,r):"not-in"===t?new Kg(e,r):"array-contains-any"===t?new Gg(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new Ug(e,n):new Vg(e,n)}}]),n}(function(){return ye((function e(){me(this,e)}))}()),Fg=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this,e,r,i)).key=cm.fromName(i.referenceValue),a}return ye(n,[{key:"matches",value:function(e){var t=cm.comparator(e.key,this.key);return this.at(t)}}]),n}(Mg),Ug=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e,"in",r)).keys=Bg("in",r),i}return ye(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Mg),Vg=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e,"not-in",r)).keys=Bg("not-in",r),i}return ye(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Mg);function Bg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return cm.fromName(e.referenceValue)}))}var zg=function(e){we(n,e);var t=Se(n);function n(e,r){return me(this,n),t.call(this,e,"array-contains",r)}return ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return mg(t)&&cg(t.arrayValue,this.value)}}]),n}(Mg),qg=function(e){we(n,e);var t=Se(n);function n(e,r){return me(this,n),t.call(this,e,"in",r)}return ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&cg(this.value.arrayValue,t)}}]),n}(Mg),Kg=function(e){we(n,e);var t=Se(n);function n(e,r){return me(this,n),t.call(this,e,"not-in",r)}return ye(n,[{key:"matches",value:function(e){if(cg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!cg(this.value.arrayValue,t)}}]),n}(Mg),Gg=function(e){we(n,e);var t=Se(n);function n(e,r){return me(this,n),t.call(this,e,"array-contains-any",r)}return ye(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!mg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return cg(t.value.arrayValue,e)}))}}]),n}(Mg),Hg=ye((function e(t,n){me(this,e),this.position=t,this.inclusive=n})),Wg=ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";me(this,e),this.field=t,this.dir=n}));function Qg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function $g(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?cm.comparator(cm.fromName(o.referenceValue),n.key):lg(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Xg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ug(e.position[n],t.position[n]))return!1;return!0}var Jg=ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;me(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Yg(e,t,n,r,i,a,o,s){return new Jg(e,t,n,r,i,a,o,s)}function Zg(e){return new Jg(e)}function ey(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ty(e){var t,n=ve(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ny(e){return null!==e.collectionGroup}function ry(e){var t=Vv(e);if(null===t.lt){t.lt=[];var n=ty(t),r=ey(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Wg(n)),t.lt.push(new Wg(um.keyField(),"asc"));else{var i,a=!1,o=ve(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.lt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Wg(um.keyField(),u))}}}return t.lt}function iy(e){var t=Vv(e);if(!t.ft)if("F"===t.limitType)t.ft=Ag(t.path,t.collectionGroup,ry(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ve(ry(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Wg(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Hg(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Hg(t.startAt.position,t.startAt.inclusive):null;t.ft=Ag(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.ft}function ay(e,t,n){return new Jg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function oy(e,t){return Dg(iy(e),iy(t))&&e.limitType===t.limitType}function sy(e){return"".concat(jg(iy(e)),"|lt:").concat(e.limitType)}function uy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(fg(t.value));var t})).join(", "),"]")),ng(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return fg(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return fg(e)})).join(",")),"Target(".concat(t,")")}(iy(e)),"; limitType=").concat(e.limitType,")")}function cy(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cm.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ve(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ve(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=$g(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ry(e),t))&&!(e.endAt&&!function(e,t,n){var r=$g(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ry(e),t))}(e,t)}function ly(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hy(e){return function(t,n){var r,i=!1,a=ve(ry(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=fy(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function fy(e,t,n){var r=e.field.isKeyField()?cm.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?lg(r,i):Fv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fv()}}function dy(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rg(t)?"-0":t}}function py(e){return{integerValue:""+e}}function vy(e,t){return ig(t)?py(t):dy(e,t)}var my=ye((function e(){me(this,e),this._=void 0}));function gy(e,t,n){return e instanceof by?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof wy?xy(e,t):e instanceof _y?Iy(e,t):function(e,t){var n=ky(e,t),r=Ey(n)+Ey(e._t);return vg(n)&&vg(e._t)?py(r):dy(e.wt,r)}(e,t)}function yy(e,t,n){return e instanceof wy?xy(e,t):e instanceof _y?Iy(e,t):n}function ky(e,t){return e instanceof Sy?vg(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var by=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n)}(my),wy=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this)).elements=e,r}return ye(n)}(my);function xy(e,t){var n,r=Ty(t),i=ve(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return ug(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var _y=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this)).elements=e,r}return ye(n)}(my);function Iy(e,t){var n,r=Ty(t),i=ve(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!ug(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Sy=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this)).wt=e,i._t=r,i}return ye(n)}(my);function Ey(e){return $m(e.integerValue||e.doubleValue)}function Ty(e){return mg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ny=ye((function e(t,n){me(this,e),this.field=t,this.transform=n}));var Cy=ye((function e(t,n){me(this,e),this.version=t,this.transformResults=n})),Ay=function(){function e(t,n){me(this,e),this.updateTime=t,this.exists=n}return ye(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function jy(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Dy=ye((function e(){me(this,e)}));function Ry(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gy(e.key,Ay.none()):new Fy(e.key,e.data,Ay.none());var n,r=e.data,i=Eg.empty(),a=new zm(um.comparator),o=ve(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Uy(e.key,i,new Gm(a.toArray()),Ay.none())}function Py(e,t,n){e instanceof Fy?function(e,t,n){var r=e.value.clone(),i=By(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Uy?function(e,t,n){if(jy(e.precondition,t)){var r=By(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Vy(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Oy(e,t,n,r){return e instanceof Fy?function(e,t,n,r){if(!jy(e.precondition,t))return n;var i=e.value.clone(),a=zy(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Uy?function(e,t,n,r){if(!jy(e.precondition,t))return n;var i=zy(e.fieldTransforms,r,t),a=t.data;return a.setAll(Vy(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return jy(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ly(e,t){var n,r=null,i=ve(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=ky(a.transform,o||null);null!=s&&(null===r&&(r=Eg.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function My(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&tm(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wy&&t instanceof wy||e instanceof _y&&t instanceof _y?tm(e.elements,t.elements,ug):e instanceof Sy&&t instanceof Sy?ug(e._t,t._t):e instanceof by&&t instanceof by}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Fy=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return me(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ye(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Dy),Uy=function(e){we(n,e);var t=Se(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return me(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return ye(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Dy);function Vy(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function By(e,t,n){var r=new Map;Uv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,yy(o,s,n[i]))}return r}function zy(e,t,n){var r,i=new Map,a=ve(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,gy(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var qy,Ky,Gy=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ye(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Dy),Hy=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ye(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Dy),Wy=ye((function e(t){me(this,e),this.count=t}));function Qy(e){switch(e){default:return Fv();case Bv.CANCELLED:case Bv.UNKNOWN:case Bv.DEADLINE_EXCEEDED:case Bv.RESOURCE_EXHAUSTED:case Bv.INTERNAL:case Bv.UNAVAILABLE:case Bv.UNAUTHENTICATED:return!1;case Bv.INVALID_ARGUMENT:case Bv.NOT_FOUND:case Bv.ALREADY_EXISTS:case Bv.PERMISSION_DENIED:case Bv.FAILED_PRECONDITION:case Bv.ABORTED:case Bv.OUT_OF_RANGE:case Bv.UNIMPLEMENTED:case Bv.DATA_LOSS:return!0}}function $y(e){if(void 0===e)return Ov("GRPC error has no .code"),Bv.UNKNOWN;switch(e){case qy.OK:return Bv.OK;case qy.CANCELLED:return Bv.CANCELLED;case qy.UNKNOWN:return Bv.UNKNOWN;case qy.DEADLINE_EXCEEDED:return Bv.DEADLINE_EXCEEDED;case qy.RESOURCE_EXHAUSTED:return Bv.RESOURCE_EXHAUSTED;case qy.INTERNAL:return Bv.INTERNAL;case qy.UNAVAILABLE:return Bv.UNAVAILABLE;case qy.UNAUTHENTICATED:return Bv.UNAUTHENTICATED;case qy.INVALID_ARGUMENT:return Bv.INVALID_ARGUMENT;case qy.NOT_FOUND:return Bv.NOT_FOUND;case qy.ALREADY_EXISTS:return Bv.ALREADY_EXISTS;case qy.PERMISSION_DENIED:return Bv.PERMISSION_DENIED;case qy.FAILED_PRECONDITION:return Bv.FAILED_PRECONDITION;case qy.ABORTED:return Bv.ABORTED;case qy.OUT_OF_RANGE:return Bv.OUT_OF_RANGE;case qy.UNIMPLEMENTED:return Bv.UNIMPLEMENTED;case qy.DATA_LOSS:return Bv.DATA_LOSS;default:return Fv()}}(Ky=qy||(qy={}))[Ky.OK=0]="OK",Ky[Ky.CANCELLED=1]="CANCELLED",Ky[Ky.UNKNOWN=2]="UNKNOWN",Ky[Ky.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ky[Ky.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ky[Ky.NOT_FOUND=5]="NOT_FOUND",Ky[Ky.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ky[Ky.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ky[Ky.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ky[Ky.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ky[Ky.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ky[Ky.ABORTED=10]="ABORTED",Ky[Ky.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ky[Ky.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ky[Ky.INTERNAL=13]="INTERNAL",Ky[Ky.UNAVAILABLE=14]="UNAVAILABLE",Ky[Ky.DATA_LOSS=15]="DATA_LOSS";var Xy=function(){function e(t,n){me(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ye(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ve(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Mm(this.inner,(function(t,n){var r,i=ve(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Fm(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Jy=new Um(cm.comparator);function Yy(){return Jy}var Zy=new Um(cm.comparator);function ek(){for(var e=Zy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function tk(e){var t=Zy;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function nk(){return ik()}function rk(){return ik()}function ik(){return new Xy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var ak=new Um(cm.comparator),ok=new zm(cm.comparator);function sk(){for(var e=ok,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var uk=new zm(em);function ck(){return uk}var lk=function(){function e(t,n,r,i,a){me(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ye(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,hk.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(im.min(),r,ck(),Yy(),sk())}}]),e}(),hk=function(){function e(t,n,r,i,a){me(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ye(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Hm.EMPTY_BYTE_STRING,n,sk(),sk(),sk())}}]),e}(),fk=ye((function e(t,n,r,i){me(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),dk=ye((function e(t,n){me(this,e),this.targetId=t,this.It=n})),pk=ye((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hm.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;me(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),vk=function(){function e(){me(this,e),this.Tt=0,this.Et=yk(),this.At=Hm.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return ye(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=sk(),t=sk(),n=sk();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fv()}})),new hk(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=yk()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),mk=function(){function e(t){me(this,e),this.Mt=t,this.Ft=new Map,this.$t=Yy(),this.Bt=gk(),this.Lt=new zm(em)}return ye(e,[{key:"Ut",value:function(e){var t,n=ve(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(s){n.e(s)}finally{n.f()}var i,a=ve(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:Fv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Rg(i))if(0===n){var a=new cm(i.path);this.Kt(t,a,Ng.newNoDocument(a,im.min()))}else Uv(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Rg(a.target)){var o=new cm(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Ng.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=sk();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new lk(e,n,this.Lt,this.$t,r);return this.$t=Yy(),this.Bt=gk(),this.Lt=new zm(em),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new vk,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new zm(em),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||Pv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new vk),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function gk(){return new Um(cm.comparator)}function yk(){return new Um(cm.comparator)}var kk={asc:"ASCENDING",desc:"DESCENDING"},bk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wk=ye((function e(t,n){me(this,e),this.databaseId=t,this.dt=n}));function xk(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function _k(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Ik(e,t){return xk(e,t.toTimestamp())}function Sk(e){return Uv(!!e),im.fromTimestamp(function(e){var t=Qm(e);return new rm(t.seconds,t.nanos)}(e))}function Ek(e,t){return function(e){return new om(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Tk(e){var t=om.fromString(e);return Uv(Xk(t)),t}function Nk(e,t){return Ek(e.databaseId,t.path)}function Ck(e,t){var n=Tk(t);if(n.get(1)!==e.databaseId.projectId)throw new zv(Bv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zv(Bv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cm(Rk(n))}function Ak(e,t){return Ek(e.databaseId,t)}function jk(e){var t=Tk(e);return 4===t.length?om.emptyPath():Rk(t)}function Dk(e){return new om(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rk(e){return Uv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Pk(e,t,n){return{name:Nk(e,t),fields:n.value.mapValue.fields}}function Ok(e,t,n){var r=Ck(e,t.name),i=Sk(t.updateTime),a=new Eg({mapValue:{fields:t.fields}}),o=Ng.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Lk(e,t){return"found"in t?function(e,t){Uv(!!t.found),t.found.name,t.found.updateTime;var n=Ck(e,t.found.name),r=Sk(t.found.updateTime),i=new Eg({mapValue:{fields:t.found.fields}});return Ng.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Uv(!!t.missing),Uv(!!t.readTime);var n=Ck(e,t.missing),r=Sk(t.readTime);return Ng.newNoDocument(n,r)}(e,t):Fv()}function Mk(e,t){var n;if(t instanceof Fy)n={update:Pk(e,t.key,t.value)};else if(t instanceof Gy)n={delete:Nk(e,t.key)};else if(t instanceof Uy)n={update:Pk(e,t.key,t.data),updateMask:$k(t.fieldMask)};else{if(!(t instanceof Hy))return Fv();n={verify:Nk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof by)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _y)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sy)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Fv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ik(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fv()}(e,t.precondition)),n}function Fk(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ay.updateTime(Sk(e.updateTime)):void 0!==e.exists?Ay.exists(e.exists):Ay.none()}(t.currentDocument):Ay.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Uv("REQUEST_TIME"===t.setToServerValue),n=new by;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new wy(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new _y(i)}else"increment"in t?n=new Sy(e,t.increment):Fv();var a=um.fromServerFormat(t.fieldPath);return new Ny(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Ck(e,t.update.name),a=new Eg({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Gm(t.map((function(e){return um.fromServerFormat(e)})))}(t.updateMask);return new Uy(i,a,o,n,r)}return new Fy(i,a,n,r)}if(t.delete){var s=Ck(e,t.delete);return new Gy(s,n)}if(t.verify){var u=Ck(e,t.verify);return new Hy(u,n)}return Fv()}function Uk(e,t){return{documents:[Ak(e,t.path)]}}function Vk(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ak(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ak(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(yg(e.value))return{unaryFilter:{field:Gk(e.field),op:"IS_NAN"}};if(gg(e.value))return{unaryFilter:{field:Gk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yg(e.value))return{unaryFilter:{field:Gk(e.field),op:"IS_NOT_NAN"}};if(gg(e.value))return{unaryFilter:{field:Gk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gk(e.field),op:Kk(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Gk(e.field),direction:qk(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.dt||ng(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Bk(e){var t=jk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Uv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=zk(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Wg(Hk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return ng(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Hg(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Hg(n,t)}(n.endAt)),Yg(t,i,s,o,u,"F",c,l)}function zk(e){return e?void 0!==e.unaryFilter?[Qk(e)]:void 0!==e.fieldFilter?[Wk(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return zk(e)})).reduce((function(e,t){return e.concat(t)})):Fv():[]}function qk(e){return kk[e]}function Kk(e){return bk[e]}function Gk(e){return{fieldPath:e.canonicalString()}}function Hk(e){return um.fromServerFormat(e.fieldPath)}function Wk(e){return Mg.create(Hk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fv()}}(e.fieldFilter.op),e.fieldFilter.value)}function Qk(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Hk(e.unaryFilter.field);return Mg.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Hk(e.unaryFilter.field);return Mg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Hk(e.unaryFilter.field);return Mg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Hk(e.unaryFilter.field);return Mg.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fv()}}function $k(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Xk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Jk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Zk(t)),t=Yk(e.get(n),t);return Zk(t)}function Yk(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Zk(e){return e+"\x01\x01"}function eb(e){var t=e.length;if(Uv(t>=2),2===t)return Uv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),om.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Fv(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Fv()}a=o+2}return new om(r)}var tb=["userId","batchId"];function nb(e,t){return[e,Jk(t)]}function rb(e,t,n){return[e,Jk(t),n]}var ib={},ab=["prefixPath","collectionGroup","readTime","documentId"],ob=["prefixPath","collectionGroup","documentId"],sb=["collectionGroup","readTime","prefixPath","documentId"],ub=["canonicalId","targetId"],cb=["targetId","path"],lb=["path","targetId"],hb=["collectionId","parent"],fb=["indexId","uid"],db=["uid","sequenceNumber"],pb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vb=["indexId","uid","orderedDocumentKey"],mb=["userId","collectionPath","documentId"],gb=["userId","collectionPath","largestBatchId"],yb=["userId","collectionGroup","largestBatchId"],kb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),bb=[].concat(te(kb),["documentOverlays"]),wb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xb=wb,_b=[].concat(xb,["indexConfiguration","indexState","indexEntries"]),Ib=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return ye(n)}(bm);function Sb(e,t){var n=Vv(e);return Sm.N(n.ee,t)}var Eb=function(){function e(t,n,r,i){me(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ye(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Py(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=ve(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Oy(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=ve(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Oy(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=rk();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Ry(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(im.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),sk())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&tm(this.mutations,e.mutations,(function(e,t){return My(e,t)}))&&tm(this.baseMutations,e.baseMutations,(function(e,t){return My(e,t)}))}}]),e}(),Tb=function(){function e(t,n,r,i){me(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ye(e,null,[{key:"from",value:function(t,n,r){Uv(t.mutations.length===r.length);for(var i=ak,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Nb=function(){function e(t,n){me(this,e),this.largestBatchId=t,this.mutation=n}return ye(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Cb=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:im.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:im.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hm.EMPTY_BYTE_STRING;me(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return ye(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Ab=ye((function e(t){me(this,e),this.ne=t}));function jb(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Db(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Nk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:xk(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Rb(t.version)};else{if(!t.isUnknownDocument())return Fv();r.unknownDocument={path:n.path.toArray(),version:Rb(t.version)}}return r}function Db(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Rb(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Pb(e){var t=new rm(e.seconds,e.nanoseconds);return im.fromTimestamp(t)}function Ob(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Fk(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Fk(e.ne,t)})),s=rm.fromMillis(t.localWriteTimeMs);return new Eb(t.batchId,s,n,o)}function Lb(e){var t,n,r=Pb(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Pb(e.lastLimboFreeSnapshotVersion):im.min();return void 0!==e.query.documents?(Uv(1===(n=e.query).documents.length),t=iy(Zg(jk(n.documents[0])))):t=function(e){return iy(Bk(e))}(e.query),new Cb(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Hm.fromBase64String(e.resumeToken))}function Mb(e,t){var n,r=Rb(t.snapshotVersion),i=Rb(t.lastLimboFreeSnapshotVersion);n=Rg(t.target)?Uk(e.ne,t.target):Vk(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:jg(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Fb(e){var t=Bk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ay(t,t.limit,"L"):t}function Ub(e,t){return new Nb(t.largestBatchId,Fk(e.ne,t.overlayMutation))}function Vb(e,t){var n=t.path.lastSegment();return[e,Jk(t.path.popLast()),n]}function Bb(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Rb(r.readTime),documentKey:Jk(r.documentKey.path),largestBatchId:r.largestBatchId}}var zb=function(){function e(){me(this,e)}return ye(e,[{key:"getBundleMetadata",value:function(e,t){return qb(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Pb(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return qb(e).put({bundleId:(n=t).id,createTime:Rb(Sk(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Kb(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Fb(t.bundledQuery),readTime:Pb(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Kb(e).put(function(e){return{name:e.name,readTime:Rb(Sk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function qb(e){return Sb(e,"bundles")}function Kb(e){return Sb(e,"namedQueries")}var Gb=function(){function e(t,n){me(this,e),this.wt=t,this.userId=n}return ye(e,[{key:"getOverlay",value:function(e,t){var n=this;return Hb(e).get(Vb(this.userId,t)).next((function(e){return e?Ub(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=nk();return _m.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Nb(t,a);i.push(r.ie(e,o))})),_m.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Jk(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Hb(e).W("collectionPathOverlayIndex",i))})),_m.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=nk(),a=Jk(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Hb(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=ve(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ub(r.wt,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=nk(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hb(e).J({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=Ub(a.wt,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return Hb(e).put(function(e,t,n){var r=f(Vb(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Mk(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Hb(e){return Sb(e,"documentOverlays")}var Wb=function(){function e(){me(this,e)}return ye(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae($m(e.integerValue));else if("doubleValue"in e){var n=$m(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),rg(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Xm(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?wg(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Fv()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=ve(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),cm.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function Qb(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function $b(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Qb(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Wb.ye=new Wb;var Xb=function(){function e(){me(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ye(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=ve(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=ve(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=$b(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=$b(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Jb=function(){function e(t){me(this,e),this.Me=t}return ye(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),Yb=function(){function e(t){me(this,e),this.Me=t}return ye(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),Zb=function(){function e(){me(this,e),this.Me=new Xb,this.Fe=new Jb(this.Me),this.$e=new Yb(this.Me)}return ye(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),ew=function(){function e(t,n,r,i){me(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ye(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function tw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=nw(e.arrayValue,t.arrayValue))?n:0!==(n=nw(e.directionalValue,t.directionalValue))?n:cm.comparator(e.documentKey,t.documentKey)}function nw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var rw=function(){function e(t){me(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=ve(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ye(e,[{key:"Ge",value:function(e){var t=hm(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=fm(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=ve(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),iw=function(){function e(){me(this,e),this.ze=new aw}return ye(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),_m.resolve()}},{key:"getCollectionParents",value:function(e,t){return _m.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return _m.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return _m.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return _m.resolve(null)}},{key:"getIndexType",value:function(e,t){return _m.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return _m.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return _m.resolve(null)}},{key:"getMinOffset",value:function(e,t){return _m.resolve(gm.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return _m.resolve(gm.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return _m.resolve()}},{key:"updateIndexEntries",value:function(e,t){return _m.resolve()}}]),e}(),aw=function(){function e(){me(this,e),this.index={}}return ye(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zm(om.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new zm(om.comparator)).toArray()}}]),e}(),ow=new Uint8Array(0),sw=function(){function e(t,n){me(this,e),this.user=t,this.databaseId=n,this.He=new aw,this.Je=new Xy((function(e){return jg(e)}),(function(e,t){return Dg(e,t)})),this.uid=t.uid||""}return ye(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:Jk(i)};return uw(e).put(a)}return _m.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[nm(t),""],!1,!0);return uw(e).K(r).next((function(e){var r,i=ve(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(eb(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=lw(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=hw(e);return a.next((function(e){o.put(Bb(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=lw(e),r=hw(e),i=cw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=cw(e),i=!0,a=new Map;return _m.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=sk(),o=[];return _m.forEach(a,(function(i,a){var s;Pv("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(jg(t)));var u=function(e,t){var n=hm(t);if(void 0===n)return null;var r,i=ve(Pg(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=ve(fm(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=ve(Pg(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=ve(fm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Og(e,o.fieldPath,e.startAt):Lg(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Hg(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=ve(fm(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Lg(e,o.fieldPath,e.endAt):Og(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Hg(r,i)}(a,i),f=n.Ze(i,a,l),d=n.Ze(i,a,h),p=n.tn(i,a,c),v=n.en(i.indexId,u,f,l.inclusive,d,h.inclusive,p);return _m.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=cm.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return _m.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],h=function(u){var h=t?s.nn(t[u/c]):ow,f=s.sn(e,h,n[u%c],r),d=s.rn(e,h,i[u%c],a),p=o.map((function(t){return s.sn(e,h,t,!0)}));l.push.apply(l,te(s.createRange(f,d,p)))},f=0;f<u;++f)h(f);return l}},{key:"sn",value:function(e,t,n,r){var i=new ew(e,cm.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new ew(e,cm.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new rw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=ve(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return _m.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new zm(um.comparator),r=!1,i=ve(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=ve(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new Zb,i=ve(fm(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Be(a.kind);Wb.ye.re(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new Zb;return Wb.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new Zb;return Wb.ye.re(pg(this.databaseId,t),n.Be(function(e){var t=fm(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Zb);var i,a=0,o=ve(fm(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=ve(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.cn(t,u.fieldPath)&&mg(c))r=this.an(r,u,c);else{var f=h.Be(u.kind);Wb.ye.re(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=te(e),a=[],o=ve(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=ve(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new Zb;h.seed(l.Oe()),Wb.ye.re(u,h.Be(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Mg&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=lw(e),i=hw(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return _m.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new pm(t.sequenceNumber,new gm(Pb(t.readTime),new cm(eb(t.documentKey)),t.largestBatchId)):pm.empty(),r=e.fields.map((function(e){var t=f(e,2),n=t[0],r=t[1];return new dm(um.fromServerFormat(n),r)}));return new lm(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:em(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=lw(e),a=hw(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return _m.forEach(t,(function(t){return a.put(Bb(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return _m.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?_m.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),_m.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?_m.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return cw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return cw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=cw(e),i=new zm(tw);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new ew(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new zm(tw),r=this.on(t,e);if(null==r)return n;var i=hm(t);if(null!=i){var a=e.data.field(i.fieldPath);if(mg(a)){var o,s=ve(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new ew(t.indexId,e.key,this.nn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new ew(t.indexId,e.key,ow,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Pv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=Km(a),u=Km(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=Km(o)):l?(i(s),s=Km(a)):(s=Km(a),u=Km(o))}}(r,i,tw,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),_m.waitFor(o)}},{key:"ln",value:function(e){var t=1;return hw(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return tw(e,t)})).filter((function(e,t,n){return!t||0!==tw(e,n[t-1])}));var r=[];r.push(e);var i,a=ve(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=tw(o,e),u=tw(o,t);if(0===s)r[0]=e.Le();else if(s>0&&u<0)r.push(o),r.push(o.Le());else if(u>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,ow,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,ow,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(fw)}},{key:"getMinOffset",value:function(e,t){var n=this;return _m.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||Fv()}))})).next(fw)}}]),e}();function uw(e){return Sb(e,"collectionParents")}function cw(e){return Sb(e,"indexEntries")}function lw(e){return Sb(e,"indexConfiguration")}function hw(e){return Sb(e,"indexState")}function fw(e){Uv(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ym(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gm(t.readTime,t.documentKey,n)}var dw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pw=function(){function e(t,n,r){me(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ye(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function vw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.J({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Uv(1===s)})));var c,l=[],h=ve(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=rb(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return _m.waitFor(a).next((function(){return l}))}function mw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Fv();t=e.noDocument}return JSON.stringify(t).length}pw.DEFAULT_COLLECTION_PERCENTILE=10,pw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pw.DEFAULT=new pw(41943040,pw.DEFAULT_COLLECTION_PERCENTILE,pw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pw.DISABLED=new pw(-1,0,0);var gw=function(){function e(t,n,r,i){me(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return ye(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kw(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=bw(e),o=kw(e);return o.add({}).next((function(s){Uv("number"==typeof s);var u,c=new Eb(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Mk(e.ne,t)})),i=n.mutations.map((function(t){return Mk(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),h=[],f=new zm((function(e,t){return em(e.canonicalString(),t.canonicalString())})),d=ve(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=rb(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,ib))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[s]=c.keys()})),_m.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return kw(e).get(t).next((function(e){return e?(Uv(e.userId===n.userId),Ob(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?_m.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return kw(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Uv(t.batchId>=r),a=Ob(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return kw(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kw(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return Ob(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=nb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return bw(e).J({range:i},(function(r,i,o){var s=f(r,3),u=s[0],c=s[1],l=s[2],h=eb(c);if(u===n.userId&&t.path.isEqual(h))return kw(e).get(l).next((function(e){if(!e)throw Fv();Uv(e.userId===n.userId),a.push(Ob(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zm(em),i=[];return t.forEach((function(t){var a=nb(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=bw(e).J({range:o},(function(e,i,a){var o=f(e,3),s=o[0],u=o[1],c=o[2],l=eb(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),_m.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=nb(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new zm(em);return bw(e).J({range:o},(function(e,t,a){var o=f(e,3),u=o[0],c=o[1],l=o[2],h=eb(c);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.pn(e,s)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(kw(e).get(t).next((function(e){if(null===e)throw Fv();Uv(e.userId===n.userId),r.push(Ob(n.wt,e))})))})),_m.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return vw(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),_m.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return _m.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return bw(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=eb(e[1]);i.push(a)}else r.done()})).next((function(){Uv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return yw(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return ww(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return Uv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function yw(e,t,n){var r=nb(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return bw(e).J({range:a,H:!0},(function(e,n,r){var a=f(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function kw(e){return Sb(e,"mutations")}function bw(e){return Sb(e,"documentMutations")}function ww(e){return Sb(e,"mutationQueues")}var xw=function(){function e(t){me(this,e),this.En=t}return ye(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),_w=function(){function e(t,n){me(this,e),this.referenceDelegate=t,this.wt=n}return ye(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new xw(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return im.fromTimestamp(new rm(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Iw(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return Uv(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Iw(e).J((function(o,s){var u=Lb(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return _m.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Iw(e).J((function(e,n){var r=Lb(n);t(r)}))}},{key:"bn",value:function(e){return Sw(e).get("targetGlobalKey").next((function(e){return Uv(null!==e),e}))}},{key:"Pn",value:function(e,t){return Sw(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return Iw(e).put(Mb(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=jg(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Iw(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Lb(n);Dg(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ew(e);return t.forEach((function(t){var o=Jk(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),_m.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ew(e);return _m.forEach(t,(function(t){var a=Jk(t.path);return _m.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ew(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ew(e),i=sk();return r.J({range:n,H:!0},(function(e,t,n){var r=eb(e[1]),a=new cm(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Jk(t.path),r=IDBKeyRange.bound([n],[nm(n)],!1,!0),i=0;return Ew(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=f(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return Iw(e).get(t).next((function(e){return e?Lb(e):null}))}}]),e}();function Iw(e){return Sb(e,"targets")}function Sw(e){return Sb(e,"targetGlobal")}function Ew(e){return Sb(e,"targetDocuments")}function Tw(e,t){var n=f(e,2),r=n[0],i=n[1],a=f(t,2),o=a[0],s=a[1],u=em(r,o);return 0===u?em(i,s):u}var Nw=function(){function e(t){me(this,e),this.Sn=t,this.buffer=new zm(Tw),this.Dn=0}return ye(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Tw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Cw=function(){function e(t,n,r){me(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return ye(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;Pv("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Nm(e.t0)){e.next=12;break}Pv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,wm(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Aw=function(){function e(t,n){me(this,e),this.On=t,this.params=n}return ye(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return _m.resolve(Om.ot);var r=new Nw(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Pv("LruGarbageCollector","Garbage collection skipped; disabled"),_m.resolve(dw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Pv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),dw):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Pv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Rv()<=ot.DEBUG&&Pv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),_m.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),jw=function(){function e(t,n){me(this,e),this.db=t,this.garbageCollector=function(e,t){return new Aw(e,t)}(this,n)}return ye(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Dw(e,n)}},{key:"removeReference",value:function(e,t,n){return Dw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Dw(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return ww(e).Y((function(r){return yw(e,r,t).next((function(e){return e&&(n=!0),_m.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,s){if(s<=t){var u=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,im.min()),Ew(e).delete([0,Jk(o.path)])}))}));i.push(u)}})).next((function(){return _m.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Dw(e,t)}},{key:"Ln",value:function(e,t){var n,r=Ew(e),i=Om.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=f(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Om.ot&&t(new cm(eb(n)),i),i=u,n=s):i=Om.ot})).next((function(){i!==Om.ot&&t(new cm(eb(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Dw(e,t){return Ew(e).put(function(e,t){return{targetId:0,path:Jk(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Rw=function(){function e(){me(this,e),this.changes=new Xy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ye(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ng.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?_m.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Pw=function(){function e(t){me(this,e),this.wt=t}return ye(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Fw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Fw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Db(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ng.newInvalidDocument(t);return Fw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Uw(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:Ng.newInvalidDocument(t)};return Fw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Uw(t))},(function(e,i){r={document:n.Kn(t,i),size:mw(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Yy();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=Yy(),i=new Um(cm.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,mw(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return _m.resolve();var r=new zm(Bw);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Uw(r.first()),Uw(r.last())),a=r.getIterator(),o=a.getNext();return Fw(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=cm.fromSegments([].concat(te(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Bw(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(Uw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Db(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fw(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Yy(),i=ve(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(cm.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Yy(),o=Vw(t,n),s=Vw(t,gm.max());return Fw(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.Kn(cm.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Lw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Mw(e).get("remoteDocumentGlobalKey").next((function(e){return Uv(!!e),e}))}},{key:"qn",value:function(e,t){return Mw(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Ok(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=cm.fromSegments(t.noDocument.path),i=Pb(t.noDocument.readTime);n=Ng.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Fv();var a=cm.fromSegments(t.unknownDocument.path),o=Pb(t.unknownDocument.version);n=Ng.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new rm(e[0],e[1]);return im.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(im.min()))return n}return Ng.newInvalidDocument(e)}}]),e}();function Ow(e){return new Pw(e)}var Lw=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new Xy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ye(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new zm((function(e,t){return em(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=jb(t.zn.wt,o);i=i.add(a.path.popLast());var c=mw(u);r+=c-s.size,n.push(t.zn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=jb(t.zn.wt,o.convertToNoDocument(im.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),_m.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Rw);function Mw(e){return Sb(e,"remoteDocumentGlobal")}function Fw(e){return Sb(e,"remoteDocumentsV14")}function Uw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Vw(e,t){var n=t.documentKey.path.toArray();return[e,Db(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Bw(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=em(n[a],r[a]))return i;return(i=em(n.length,r.length))||((i=em(n[n.length-2],r[r.length-2]))||em(n[n.length-1],r[r.length-1]))}var zw=ye((function e(t,n){me(this,e),this.overlayedDocument=t,this.mutatedFields=n})),qw=function(){function e(t,n,r,i){me(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ye(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Oy(r.mutation,e,Gm.empty(),rm.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,sk()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sk(),i=nk();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=ek();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=nk();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,sk())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Yy(),a=ik(),o=ik();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Uy)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Oy(o.mutation,t,o.mutation.getFieldMask(),rm.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new zw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=ik(),i=new Um((function(e,t){return e-t})),a=sk();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=ve(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Gm.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||sk()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=rk();c.forEach((function(e){if(!a.has(e)){var n=Ry(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return _m.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return cm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ny(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):_m.resolve(nk()),s=-1,u=a;return o.next((function(t){return _m.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?_m.resolve():i.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,sk())})).next((function(e){return{batchId:s,changes:tk(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new cm(t)).next((function(e){var t=ek();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ek();return this.indexManager.getCollectionParents(e,i).next((function(o){return _m.forEach(o,(function(o){var s=function(e,t){return new Jg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Ng.newInvalidDocument(n)))}));var n=ek();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Oy(a.mutation,i,Gm.empty(),rm.now()),cy(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):_m.resolve(Ng.newInvalidDocument(t))}}]),e}(),Kw=function(){function e(t){me(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return ye(e,[{key:"getBundleMetadata",value:function(e,t){return _m.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Sk(n.createTime)}),_m.resolve()}},{key:"getNamedQuery",value:function(e,t){return _m.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Fb(e.bundledQuery),readTime:Sk(e.readTime)}}(t)),_m.resolve()}}]),e}(),Gw=function(){function e(){me(this,e),this.overlays=new Um(cm.comparator),this.Xn=new Map}return ye(e,[{key:"getOverlay",value:function(e,t){return _m.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=nk();return _m.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),_m.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),_m.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=nk(),i=t.length+1,a=new cm(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return _m.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Um((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=nk(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=nk(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return _m.resolve(u)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Nb(t,n));var a=this.Xn.get(t);void 0===a&&(a=sk(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),Hw=function(){function e(){me(this,e),this.Zn=new zm(Ww.ts),this.es=new zm(Ww.ns)}return ye(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ww(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Ww(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new cm(new om([])),r=new Ww(n,e),i=new Ww(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new cm(new om([])),n=new Ww(t,e),r=new Ww(t,e+1),i=sk();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ww(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ww=function(){function e(t,n){me(this,e),this.key=t,this.ls=n}return ye(e,null,[{key:"ts",value:function(e,t){return cm.comparator(e.key,t.key)||em(e.ls,t.ls)}},{key:"ns",value:function(e,t){return em(e.ls,t.ls)||cm.comparator(e.key,t.key)}}]),e}(),Qw=function(){function e(t,n){me(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new zm(Ww.ts)}return ye(e,[{key:"checkEmpty",value:function(e){return _m.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Eb(i,t,n,r);this.mutationQueue.push(a);var o,s=ve(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ds=this.ds.add(new Ww(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return _m.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return _m.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return _m.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return _m.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return _m.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ww(t,0),i=new Ww(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),_m.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zm(em);return t.forEach((function(e){var t=new Ww(e,0),i=new Ww(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),_m.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;cm.isDocumentKey(i)||(i=i.child(""));var a=new Ww(new cm(i),0),o=new zm(em);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),_m.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Uv(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return _m.forEach(t.mutations,(function(i){var a=new Ww(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ww(t,0),r=this.ds.firstAfterOrEqual(n);return _m.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,_m.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),$w=function(){function e(t){me(this,e),this.ps=t,this.docs=new Um(cm.comparator),this.size=0}return ye(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return _m.resolve(n?n.document.mutableCopy():Ng.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Yy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ng.newInvalidDocument(e))})),_m.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Yy(),i=new cm(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||ym(mm(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return _m.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Fv()}},{key:"Is",value:function(e,t){return _m.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Xw(this)}},{key:"getSize",value:function(e){return _m.resolve(this.size)}}]),e}(),Xw=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this)).zn=e,r}return ye(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),_m.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Rw),Jw=function(){function e(t){me(this,e),this.persistence=t,this.Ts=new Xy((function(e){return jg(e)}),Dg),this.lastRemoteSnapshotVersion=im.min(),this.highestTargetId=0,this.Es=0,this.As=new Hw,this.targetCount=0,this.Rs=xw.An()}return ye(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),_m.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return _m.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return _m.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),_m.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),_m.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new xw(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,_m.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),_m.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,_m.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),_m.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return _m.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return _m.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),_m.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),_m.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),_m.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return _m.resolve(n)}},{key:"containsKey",value:function(e,t){return _m.resolve(this.As.containsKey(t))}}]),e}(),Yw=function(){function e(t,n){var r=this;me(this,e),this.bs={},this.overlays={},this.Ps=new Om(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Jw(this),this.indexManager=new iw,this.remoteDocumentCache=new $w((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new Ab(n),this.Ds=new Kw(this.wt)}return ye(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Gw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Qw(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Pv("MemoryPersistence","Starting transaction:",e);var i=new Zw(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return _m.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Zw=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ye(n)}(bm),ex=function(){function e(t){me(this,e),this.persistence=t,this.ks=new Hw,this.Os=null}return ye(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw Fv()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),_m.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),_m.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),_m.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _m.forEach(this.Fs,(function(r){var i=cm.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,im.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return _m.or([function(){return _m.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),tx=function(){function e(t){me(this,e),this.wt=t}return ye(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Im("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tb,{unique:!0}),e.createObjectStore("documentMutations")}(e),nx(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=_m.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),nx(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:im.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tb,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return _m.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:mb});t.createIndex("collectionPathOverlayIndex",gb,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",yb,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ab});t.createIndex("documentKeyIndex",ob),t.createIndex("collectionGroupIndex",sb)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:fb}).createIndex("sequenceNumberIndex",db,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:pb}).createIndex("documentKeyIndex",vb,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=mw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return _m.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return _m.forEach(r,(function(r){Uv(r.userId===n.userId);var i=Ob(t.wt,r);return vw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new om(n),o=function(e){return[0,Jk(e)]}(a);r.push(t.get(o).next((function(n){return n?_m.resolve():function(n){return t.put({targetId:0,path:Jk(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return _m.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:hb});var n=t.store("collectionParents"),r=new aw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Jk(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new om(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=f(e,3),r=(n[0],n[1]),a=(n[2],eb(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=Lb(r),a=Mb(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new cm(om.fromString(i.document.name).popFirst(5)):i.noDocument?cm.fromSegments(i.noDocument.path):i.unknownDocument?cm.fromSegments(i.unknownDocument.path):Fv()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return _m.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=Ow(this.wt),a=new Yw(ex.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:sk();Ob(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),_m.forEach(r,(function(e,r){var o=new Av(r),s=Gb.se(n.wt,o),u=a.getIndexManager(o),c=gw.se(o,n.wt,u,a.referenceDelegate);return new qw(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new Ib(t,Om.ot),e).next()}))}))}}]),e}();function nx(e){e.createObjectStore("targetDocuments",{keyPath:cb}).createIndex("documentTargetsIndex",lb,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ub,{unique:!0}),e.createObjectStore("targetGlobal")}var rx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ix=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(me(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=s,this.Ws=c,this.zs=l,this.Hs=h,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new zv(Bv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jw(this,i),this.ei=n+"main",this.wt=new Ab(u),this.ni=new Sm(this.ei,this.Hs,new tx(this.wt)),this.Vs=new _w(this.referenceDelegate,this.wt),this.remoteDocumentCache=Ow(this.wt),this.Ds=new zb,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&Ov("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ye(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new zv(Bv.FAILED_PRECONDITION,rx);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new Om(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=pe(fe().mark((function n(r){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=pe(fe().mark((function t(n){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ox(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(Nm(t))return Pv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Pv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return ax(e).get("owner").next((function(e){return _m.resolve(t.di(e))}))}},{key:"_i",value:function(e){return ox(e).delete(this.clientId)}},{key:"wi",value:function(){var e=pe(fe().mark((function e(){var t,n,r,i,a=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Sb(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return _m.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=ve(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?_m.resolve(!0):ax(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new zv(Bv.FAILED_PRECONDITION,rx);return!1}}return!(!t.networkEnabled||!t.inForeground)||ox(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Pv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=pe(fe().mark((function e(){var t=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ib(e,Om.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ox(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return gw.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new sw(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Gb.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Pv("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.Hs)?_b:14===i?xb:13===i?wb:12===i?bb:11===i?kb:void Fv();return this.ni.runTransaction(e,o,s,(function(i){return a=new Ib(i,r.Ps?r.Ps.next():Om.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw Ov("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new zv(Bv.FAILED_PRECONDITION,km);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return ax(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new zv(Bv.FAILED_PRECONDITION,rx)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ax(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=ax(e);return n.get("owner").next((function(e){return t.di(e)?(Pv("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_m.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ov("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Pv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ov("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(Ch){Ov("Failed to set zombie client id.",Ch)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(Ch){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Sm.V()}}]),e}();function ax(e){return Sb(e,"owner")}function ox(e){return Sb(e,"clientMetadata")}function sx(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ux=function(){function e(t,n,r,i){me(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return ye(e,null,[{key:"Vi",value:function(t,n){var r,i=sk(),a=sk(),o=ve(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),cx=function(){function e(){me(this,e),this.Si=!1}return ye(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return _m.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(im.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(Rv()<=ot.DEBUG&&Pv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),uy(t)),i.Mi(e,o,t,vm(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new zm(hy(e));return t.forEach((function(t,r){cy(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return Rv()<=ot.DEBUG&&Pv("QueryEngine","Using full collection scan to execute query:",uy(t)),this.Di.getDocumentsMatchingQuery(e,t,gm.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),lx=function(){function e(t,n,r,i){me(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new Um(em),this.Bi=new Xy((function(e){return jg(e)}),Dg),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return ye(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qw(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function hx(e,t,n,r){return new lx(e,t,n,r)}function fx(e,t){return dx.apply(this,arguments)}function dx(){return dx=pe(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vv(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=sk(),u=ve(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=ve(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=ve(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=ve(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;s=s.add(y.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t){var n=Vv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=_m.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Uv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=sk(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function vx(e){var t=Vv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function mx(e,t){var n=Vv(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Hm.EMPTY_BYTE_STRING,im.min()).withLastLimboFreeSnapshotVersion(im.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var s=Yy(),u=sk();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(gx(e,a,t.documentUpdates).next((function(e){s=e.Gi,u=e.Qi}))),!r.isEqual(im.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return _m.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.$i=i,e}))}function gx(e,t,n){var r=sk(),i=sk();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Yy();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(im.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Pv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function yx(e,t){var n=Vv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function kx(e,t){var n=Vv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,_m.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new Cb(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function bx(e,t,n){return wx.apply(this,arguments)}function wx(){return wx=pe(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vv(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Nm(e.t1)){e.next=12;break}throw e.t1;case 12:Pv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),wx.apply(this,arguments)}function xx(e,t,n){var r=Vv(e),i=im.min(),a=sk();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Vv(e),i=r.Bi.get(n);return void 0!==i?_m.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,iy(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:im.min(),n?a:sk())})).next((function(e){return Sx(r,ly(t),e),{documents:e,ji:a}}))}))}function _x(e,t){var n=Vv(e),r=Vv(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function Ix(e,t){var n=Vv(e),r=n.Li.get(t)||im.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,vm(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Sx(n,t,e),e}))}function Sx(e,t,n){var r=im.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function Ex(e,t,n,r){return Tx.apply(this,arguments)}function Tx(){return Tx=pe(fe().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Vv(t),o=sk(),s=Yy(),u=ve(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.Wi(l.metadata.name),l.document&&(o=o.add(h)),(f=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,kx(a,function(e){return iy(Zg(om.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return gx(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Nx(e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=pe(fe().mark((function e(t,n){var r,i,a,o=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:sk(),e.next=3,kx(t,iy(Fb(n.bundledQuery)));case 3:return i=e.sent,a=Vv(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Sk(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(Hm.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Ax(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function jx(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Dx(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Rx=function(){function e(t,n,r,i){me(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ye(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new zv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ov("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Px=function(){function e(t,n,r){me(this,e),this.targetId=t,this.state=n,this.error=r}return ye(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new zv(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ov("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Ox=function(){function e(t,n){me(this,e),this.clientId=t,this.activeTargetIds=n}return ye(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ck(),o=0;i&&o<r.activeTargetIds.length;++o)i=ig(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ov("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Lx=function(){function e(t,n){me(this,e),this.clientId=t,this.onlineState=n}return ye(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ov("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Mx=function(){function e(){me(this,e),this.activeTargetIds=ck()}return ye(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Fx=function(){function e(t,n,r,i,a){me(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Um(em),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Ax(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Mx),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ye(e,[{key:"start",value:function(){var e=pe(fe().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=ve(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Ax(this.persistenceKey,i)))&&(o=Ox.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(s=this.storage.getItem(this.lr))&&(u=this.wr(s))&&this.mr(u),c=ve(this.ir);try{for(c.s();!(l=c.n()).done;)h=l.value,this.nr(h)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Dx(this.persistenceKey,e));if(n){var r=Px.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Dx(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Pv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Pv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Pv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Pv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Ov("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(pe(fe().mark((function e(){var r,i,a,o,s,u,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(s));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}u=function(e){var t=Om.ot;if(null!=e)try{var n=JSON.parse(e);Uv("number"==typeof n),t=n}catch(e){Ov("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Om.ot&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Rx(this.currentUser,e,t,n),i=jx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=jx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Dx(this.persistenceKey,e),i=new Px(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Ox.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Rx.Ji(new Av(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Px.Ji(r,t)}},{key:"wr",value:function(e){return Lx.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:Pv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Mr(o,s).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=ck();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Ux=function(){function e(){me(this,e),this.Fr=new Mx,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ye(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Mx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Vx=function(){function e(){me(this,e)}return ye(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Bx=function(){function e(){var t=this;me(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return ye(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Pv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ve(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){Pv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ve(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),zx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},qx=function(){function e(t){me(this,e),this.jr=t.jr,this.Wr=t.Wr}return ye(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Kx=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ye(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Nv;o.listenOnce(_v.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case xv.NO_ERROR:var t=o.getResponseJson();Pv("Connection","XHR received:",JSON.stringify(t)),i(t);break;case xv.TIMEOUT:Pv("Connection",'RPC "'+e+'" timed out'),a(new zv(Bv.DEADLINE_EXCEEDED,"Request time out"));break;case xv.HTTP_ERROR:var n=o.getStatus();if(Pv("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Bv).indexOf(t)>=0?t:Bv.UNKNOWN}(r.status);a(new zv(s,r.message))}else a(new zv(Bv.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new zv(Bv.UNAVAILABLE,"Connection failed."));break;default:Fv()}}finally{Pv("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=bv(),a=wv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ev({})),this.uo(o.initMessageHeaders,t,n),Le()||Ue()||Oe().indexOf("Electron/")>=0||Ve()||Oe().indexOf("MSAppHost/")>=0||Fe()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Pv("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new qx({jr:function(e){l?Pv("Connection","Not sending because WebChannel is closed:",e):(c||(Pv("Connection","Opening WebChannel transport."),u.open(),c=!0),Pv("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,Tv.EventType.OPEN,(function(){l||Pv("Connection","WebChannel transport opened.")})),f(u,Tv.EventType.CLOSE,(function(){l||(l=!0,Pv("Connection","WebChannel transport closed"),h.eo())})),f(u,Tv.EventType.ERROR,(function(e){l||(l=!0,Lv("Connection","WebChannel transport errored:",e),h.eo(new zv(Bv.UNAVAILABLE,"The operation could not be completed")))})),f(u,Tv.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Uv(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Pv("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=qy[e];if(void 0!==t)return $y(t)}(a),s=i.message;void 0===o&&(o=Bv.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.eo(new zv(o,s)),u.close()}else Pv("Connection","WebChannel received:",n),h.no(n)}})),f(a,Iv.STAT_EVENT,(function(e){e.stat===Sv.PROXY?Pv("Connection","Detected buffering proxy"):e.stat===Sv.NOPROXY&&Pv("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){me(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ye(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Pv("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return Pv("RestConnection","Received: ",e),e}),(function(t){throw Lv("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+jv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=zx[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Gx(){return"undefined"!=typeof window?window:null}function Hx(){return"undefined"!=typeof document?document:null}function Wx(e){return new wk(e,!0)}var Qx=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;me(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ye(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Pv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),$x=function(){function e(t,n,r,i,a,o,s,u){me(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Qx(t,n)}return ye(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Bv.RESOURCE_EXHAUSTED?(Ov(n.toString()),Ov("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Bv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=f(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new zv(Bv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(pe(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Pv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(Pv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Xx=function(e){we(n,e);var t=Se(n);function n(e,r,i,a,o,s){var u;return me(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u}return ye(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(Uv(void 0===t||"string"==typeof t),Hm.fromBase64String(t||"")):(Uv(void 0===t||t instanceof Uint8Array),Hm.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Bv.UNKNOWN:$y(e.code);return new zv(t,e.message||"")}(o);n=new pk(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Ck(e,u.document.name),l=Sk(u.document.updateTime),h=new Eg({mapValue:{fields:u.document.fields}}),f=Ng.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new fk(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Ck(e,v.document),g=v.readTime?Sk(v.readTime):im.min(),y=Ng.newNoDocument(m,g),k=v.removedTargetIds||[];n=new fk([],k,y.key,y)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Ck(e,b.document),x=b.removedTargetIds||[];n=new fk([],x,w,null)}else{if(!("filter"in t))return Fv();t.filter;var _=t.filter;_.targetId;var I=_.count||0,S=new Wy(I),E=_.targetId;n=new dk(E,S)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return im.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?im.min():t.readTime?Sk(t.readTime):im.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Dk(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Rg(r)?{documents:Uk(e,r)}:{query:Vk(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=_k(e,t.resumeToken):t.snapshotVersion.compareTo(im.min())>0&&(n.readTime=xk(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fv()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=Dk(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}($x),Jx=function(e){we(n,e);var t=Se(n);function n(e,r,i,a,o,s){var u;return me(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u.Wo=!1,u}return ye(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Nn(xe(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Uv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Uv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Sk(e.updateTime):Sk(t);return n.isEqual(im.min())&&(n=Sk(t)),new Cy(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Sk(e.commitTime);return this.listener.Jo(n,t)}return Uv(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Dk(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Mk(t.wt,e)}))};this.Mo(n)}}]),n}($x),Yx=function(e){we(n,e);var t=Se(n);function n(e,r,i,a){var o;return me(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return ye(n,[{key:"tu",value:function(){if(this.Zo)throw new zv(Bv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],s=a[1];return r.bo.ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Bv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new zv(Bv.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=f(a,2),s=o[0],u=o[1];return i.bo.ao(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Bv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new zv(Bv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ye((function e(){me(this,e)}))}()),Zx=function(){function e(t,n){me(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ye(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Ov(t),this.su=!1):Pv("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),e_=ye((function e(t,n,r,i,a){var o=this;me(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=h_(o),!e.t0){e.next=5;break}return Pv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vv(t)).lu.add(4),e.next=4,r_(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,t_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Zx(r,i)}));function t_(e){return n_.apply(this,arguments)}function n_(){return n_=pe(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h_(t)){e.next=18;break}n=ve(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),n_.apply(this,arguments)}function r_(e){return i_.apply(this,arguments)}function i_(){return i_=pe(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ve(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),i_.apply(this,arguments)}function a_(e,t){var n=Vv(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),l_(n)?c_(n):V_(n).Co()&&s_(n,t))}function o_(e,t){var n=Vv(e),r=V_(n);n.hu.delete(t),r.Co()&&u_(n,t),0===n.hu.size&&(r.Co()?r.ko():h_(n)&&n._u.set("Unknown"))}function s_(e,t){e.wu.Nt(t.targetId),V_(e).Qo(t)}function u_(e,t){e.wu.Nt(t),V_(e).jo(t)}function c_(e){e.wu=new mk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),V_(e).start(),e._u.iu()}function l_(e){return h_(e)&&!V_(e).Do()&&e.hu.size>0}function h_(e){return 0===Vv(e).lu.size}function f_(e){e.wu=void 0}function d_(e){return p_.apply(this,arguments)}function p_(){return p_=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){s_(t,e)}));case 1:case"end":return e.stop()}}),e)}))),p_.apply(this,arguments)}function v_(e,t){return m_.apply(this,arguments)}function m_(){return m_=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f_(t),l_(t)?(t._u.uu(n),c_(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function g_(e,t,n){return y_.apply(this,arguments)}function y_(){return y_=pe(fe().mark((function e(t,n,r){var i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof pk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=pe(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ve(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Pv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,k_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof fk?t.wu.Ut(n):n instanceof dk?t.wu.zt(n):t.wu.Gt(n),r.isEqual(im.min())){e.next=29;break}return e.prev=14,e.next=17,vx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Hm.EMPTY_BYTE_STRING,n.snapshotVersion)),u_(e,t);var r=new Cb(n.target,t,1,n.sequenceNumber);s_(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Pv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,k_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),y_.apply(this,arguments)}function k_(e,t,n){return b_.apply(this,arguments)}function b_(){return b_=pe(fe().mark((function e(t,n,r){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nm(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,r_(t);case 5:t._u.set("Offline"),r||(r=function(){return vx(t.localStore)}),t.asyncQueue.enqueueRetryable(pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pv("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,t_(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),b_.apply(this,arguments)}function w_(e,t){return t().catch((function(n){return k_(e,n,t)}))}function x_(e){return __.apply(this,arguments)}function __(){return __=pe(fe().mark((function e(t){var n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Vv(t),r=B_(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!I_(n)){e.next=19;break}return e.prev=3,e.next=6,yx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,S_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,k_(n,e.t0);case 17:e.next=2;break;case 19:E_(n)&&T_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),__.apply(this,arguments)}function I_(e){return h_(e)&&e.au.length<10}function S_(e,t){e.au.push(t);var n=B_(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function E_(e){return h_(e)&&!B_(e).Do()&&e.au.length>0}function T_(e){B_(e).start()}function N_(e){return C_.apply(this,arguments)}function C_(){return C_=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B_(t).Xo();case 1:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}function A_(e){return j_.apply(this,arguments)}function j_(){return j_=pe(fe().mark((function e(t){var n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=B_(t),r=ve(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function D_(e,t,n){return R_.apply(this,arguments)}function R_(){return R_=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=Tb.from(i,n,r),e.next=3,w_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,x_(t);case 5:case"end":return e.stop()}}),e)}))),R_.apply(this,arguments)}function P_(e,t){return O_.apply(this,arguments)}function O_(){return O_=pe(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&B_(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=pe(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Qy(i=n.code)||i===Bv.ABORTED){e.next=7;break}return r=t.au.shift(),B_(t).No(),e.next=5,w_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,x_(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:E_(t)&&T_(t);case 5:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=pe(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Vv(t)).asyncQueue.verifyOperationInProgress(),Pv("RemoteStore","RemoteStore received new credentials"),i=h_(r),r.lu.add(3),e.next=6,r_(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,t_(r);case 12:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function F_(e,t){return U_.apply(this,arguments)}function U_(){return U_=pe(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vv(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,t_(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,r_(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),U_.apply(this,arguments)}function V_(e){return e.mu||(e.mu=function(e,t,n){var r=Vv(e);return r.tu(),new Xx(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:d_.bind(null,e),Jr:v_.bind(null,e),Go:g_.bind(null,e)}),e.fu.push(function(){var t=pe(fe().mark((function t(n){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),l_(e)?c_(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:f_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function B_(e){return e.gu||(e.gu=function(e,t,n){var r=Vv(e);return r.tu(),new Jx(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:N_.bind(null,e),Jr:P_.bind(null,e),Yo:A_.bind(null,e),Jo:D_.bind(null,e)}),e.fu.push(function(){var t=pe(fe().mark((function t(n){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,x_(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(Pv("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var z_=function(){function e(t,n,r,i,a){me(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new qv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ye(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zv(Bv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function q_(e,t){if(Ov("AsyncQueue","".concat(t,": ").concat(e)),Nm(e))return new zv(Bv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var K_=function(){function e(t){me(this,e),this.comparator=t?function(e,n){return t(e,n)||cm.comparator(e.key,n.key)}:function(e,t){return cm.comparator(e.key,t.key)},this.keyedMap=ek(),this.sortedSet=new Um(this.comparator)}return ye(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),G_=function(){function e(){me(this,e),this.yu=new Um(cm.comparator)}return ye(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Fv():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),H_=function(){function e(t,n,r,i,a,o,s,u){me(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return ye(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,K_.emptySet(n),a,r,i,!0,!1)}}]),e}(),W_=ye((function e(){me(this,e),this.Iu=void 0,this.listeners=[]})),Q_=ye((function e(){me(this,e),this.queries=new Xy((function(e){return sy(e)}),oy),this.onlineState="Unknown",this.Tu=new Set}));function $_(e,t){return X_.apply(this,arguments)}function X_(){return X_=pe(fe().mark((function e(t,n){var r,i,a,o,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vv(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new W_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=q_(e.t0,"Initialization of query '".concat(uy(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&tI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),X_.apply(this,arguments)}function J_(e,t){return Y_.apply(this,arguments)}function Y_(){return Y_=pe(fe().mark((function e(t,n){var r,i,a,o,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vv(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Y_.apply(this,arguments)}function Z_(e,t){var n,r=Vv(e),i=!1,a=ve(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=ve(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&tI(r)}function eI(e,t,n){var r=Vv(e),i=r.queries.get(t);if(i){var a,o=ve(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function tI(e){e.Tu.forEach((function(e){e.next()}))}var nI=function(){function e(t,n,r){me(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ye(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ve(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new H_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=H_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),rI=function(){function e(t,n){me(this,e),this.payload=t,this.byteLength=n}return ye(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),iI=function(){function e(t){me(this,e),this.wt=t}return ye(e,[{key:"Wi",value:function(e){return Ck(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?Ok(this.wt,e.document,!1):Ng.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return Sk(e)}}]),e}(),aI=function(){function e(t,n,r){me(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=oI(t)}return ye(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=om.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new iI(this.wt),i=ve(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Wi(a.metadata.name),u=ve(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||sk()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=pe(fe().mark((function e(){var t,n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ex(this.localStore,new iI(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=ve(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Nx(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function oI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var sI=ye((function e(t){me(this,e),this.key=t})),uI=ye((function e(t){me(this,e),this.key=t})),cI=function(){function e(t,n){me(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=sk(),this.mutatedKeys=sk(),this.Lu=hy(t),this.Uu=new K_(this.Lu)}return ye(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new G_,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=cy(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||c&&n.Lu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:s,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fv()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==a.length||u?{snapshot:new H_(this.query,e.Uu,i,a,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new G_,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=sk(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new uI(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new sI(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=sk();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return H_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),lI=ye((function e(t,n,r){me(this,e),this.query=t,this.targetId=n,this.view=r})),hI=ye((function e(t){me(this,e),this.key=t,this.Xu=!1})),fI=function(){function e(t,n,r,i,a,o){me(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Xy((function(e){return sy(e)}),oy),this.ec=new Map,this.nc=new Set,this.sc=new Um(cm.comparator),this.ic=new Map,this.rc=new Hw,this.oc={},this.uc=new Map,this.cc=xw.Rn(),this.onlineState="Unknown",this.ac=void 0}return ye(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function dI(e,t){return pI.apply(this,arguments)}function pI(){return pI=pe(fe().mark((function e(t,n){var r,i,a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oS(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,kx(r.localStore,iy(n));case 8:return s=e.sent,r.isPrimaryClient&&a_(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,vI(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),pI.apply(this,arguments)}function vI(e,t,n,r){return mI.apply(this,arguments)}function mI(){return mI=pe(fe().mark((function e(t,n,r,i){var a,o,s,u,c,l;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=pe(fe().mark((function e(t,n,r,i){var a,o,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,xx(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(LI(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,xx(t.localStore,n,!0);case 3:return a=e.sent,o=new cI(n,a.ji),s=o.Ku(a.documents),u=hk.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),LI(t,r,c.zu),l=new lI(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),mI.apply(this,arguments)}function gI(e,t){return yI.apply(this,arguments)}function yI(){return yI=pe(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vv(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!oy(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,bx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),o_(r.remoteStore,i.targetId),PI(r,i.targetId)})).catch(wm);case 9:e.next=14;break;case 11:return PI(r,i.targetId),e.next=14,bx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),yI.apply(this,arguments)}function kI(e,t,n){return bI.apply(this,arguments)}function bI(){return bI=pe(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sS(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Vv(e),a=rm.now(),o=t.reduce((function(e,t){return e.add(t.key)}),sk());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Yy(),u=sk();return i.Ui.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=ve(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Ly(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Uy(c.key,l,Tg(l.value.mapValue),Ay.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:tk(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new Um(em)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,UI(i,a.changes);case 9:return e.next=11,x_(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=q_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),bI.apply(this,arguments)}function wI(e,t){return xI.apply(this,arguments)}function xI(){return xI=pe(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vv(t),e.prev=1,e.next=4,mx(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(Uv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Uv(n.Xu):e.removedDocuments.size>0&&(Uv(n.Xu),n.Xu=!1))})),e.next=8,UI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,wm(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),xI.apply(this,arguments)}function _I(e,t,n){var r=Vv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Vv(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ve(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&tI(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function II(e,t,n){return SI.apply(this,arguments)}function SI(){return SI=pe(fe().mark((function e(t,n,r){var i,a,o,s,u,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Vv(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Um(cm.comparator)).insert(o,Ng.newNoDocument(o,im.min())),u=sk().add(o),c=new lk(im.min(),new Map,new zm(em),s,u),e.next=9,wI(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),FI(i),e.next=16;break;case 14:return e.next=16,bx(i.localStore,n,!1).then((function(){return PI(i,n,r)})).catch(wm);case 16:case"end":return e.stop()}}),e)}))),SI.apply(this,arguments)}function EI(e,t){return TI.apply(this,arguments)}function TI(){return TI=pe(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vv(t),i=n.batch.batchId,e.prev=1,e.next=4,px(r.localStore,n);case 4:return a=e.sent,RI(r,i,null),DI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,UI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,wm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),TI.apply(this,arguments)}function NI(e,t,n){return CI.apply(this,arguments)}function CI(){return CI=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vv(t),e.prev=1,e.next=4,function(e,t){var n=Vv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Uv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,RI(i,n,r),DI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,UI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,wm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),CI.apply(this,arguments)}function AI(e,t){return jI.apply(this,arguments)}function jI(){return jI=pe(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h_((r=Vv(t)).remoteStore)||Pv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Vv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=q_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),jI.apply(this,arguments)}function DI(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function RI(e,t,n){var r=Vv(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function PI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ve(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||OI(e,t)}))}function OI(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(o_(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),FI(e))}function LI(e,t,n){var r,i=ve(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof sI?(e.rc.addReference(a.key,t),MI(e,a)):a instanceof uI?(Pv("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||OI(e,a.key)):Fv()}}catch(o){i.e(o)}finally{i.f()}}function MI(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(Pv("SyncEngine","New document in limbo: "+n),e.nc.add(r),FI(e))}function FI(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new cm(om.fromString(t)),r=e.cc.next();e.ic.set(r,new hI(n)),e.sc=e.sc.insert(n,r),a_(e.remoteStore,new Cb(iy(Zg(n.path)),r,2,Om.ot))}}function UI(e,t,n){return VI.apply(this,arguments)}function VI(){return VI=pe(fe().mark((function e(t,n,r){var i,a,o,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vv(t),a=[],o=[],s=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){s.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=ux.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Zu.Go(a),e.next=9,function(){var e=pe(fe().mark((function e(t,n){var r,i,a,o,s,u,c,l;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vv(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return _m.forEach(n,(function(t){return _m.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return _m.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Nm(e.t0)){e.next=10;break}throw e.t0;case 10:Pv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ve(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.$i.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function BI(e,t){return zI.apply(this,arguments)}function zI(){return zI=pe(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Vv(t)).currentUser.isEqual(n)){e.next=11;break}return Pv("SyncEngine","User change. New user:",n.toKey()),e.next=5,fx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new zv(Bv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,UI(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),zI.apply(this,arguments)}function qI(e,t){var n=Vv(e),r=n.ic.get(t);if(r&&r.Xu)return sk().add(r.key);var i=sk(),a=n.ec.get(t);if(!a)return i;var o,s=ve(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.tc.get(u);i=i.unionWith(c.view.qu)}}catch(l){s.e(l)}finally{s.f()}return i}function KI(e,t){return GI.apply(this,arguments)}function GI(){return GI=pe(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vv(t),e.next=3,xx(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&LI(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),GI.apply(this,arguments)}function HI(e,t){return WI.apply(this,arguments)}function WI(){return WI=pe(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vv(t),e.abrupt("return",Ix(r.localStore,n).then((function(e){return UI(r,e)})));case 2:case"end":return e.stop()}}),e)}))),WI.apply(this,arguments)}function QI(e,t,n,r){return $I.apply(this,arguments)}function $I(){return $I=pe(fe().mark((function e(t,n,r,i){var a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vv(t),e.next=3,function(e,t){var n=Vv(e),r=Vv(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):_m.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,x_(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(RI(a,n,i||null),DI(a,n),function(e,t){Vv(Vv(e).mutationQueue).In(t)}(a.localStore,n)):Fv();case 11:return e.next=13,UI(a,o);case 13:e.next=16;break;case 15:Pv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),$I.apply(this,arguments)}function XI(e,t){return JI.apply(this,arguments)}function JI(){return JI=pe(fe().mark((function e(t,n){var r,i,a,o,s,u,c,l;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(oS(r=Vv(t)),sS(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,YI(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,F_(r.remoteStore,!0);case 9:o=ve(a);try{for(o.s();!(s=o.n()).done;)u=s.value,a_(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return PI(r,t),bx(r.localStore,t,!0)})),o_(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,YI(r,c);case 21:return function(e){var t=Vv(e);t.ic.forEach((function(e,n){o_(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new Um(cm.comparator)}(r),r.ac=!1,e.next=25,F_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),JI.apply(this,arguments)}function YI(e,t,n){return ZI.apply(this,arguments)}function ZI(){return ZI=pe(fe().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,m,g;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Vv(t),a=[],o=[],s=ve(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ec.get(c))||0===h.length){e.next=34;break}return e.next=11,kx(i.localStore,iy(h[0]));case 11:l=e.sent,f=ve(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,KI(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,_x(i.localStore,c);case 36:return g=e.sent,e.next=39,kx(i.localStore,g);case 39:return l=e.sent,e.next=42,vI(i,eS(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),ZI.apply(this,arguments)}function eS(e){return Yg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function tS(e){var t=Vv(e);return Vv(Vv(t.localStore).persistence).Ri()}function nS(e,t,n,r){return rS.apply(this,arguments)}function rS(){return rS=pe(fe().mark((function e(t,n,r,i){var a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Vv(t)).ac){e.next=3;break}return e.abrupt("return",void Pv("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Ix(a.localStore,ly(o[0]));case 10:return s=e.sent,u=lk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,UI(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,bx(a.localStore,n,!0);case 17:return PI(a,n,i),e.abrupt("break",20);case 19:Fv();case 20:case"end":return e.stop()}}),e)}))),rS.apply(this,arguments)}function iS(e,t,n){return aS.apply(this,arguments)}function aS(){return aS=pe(fe().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=oS(t)).ac){e.next=45;break}a=ve(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ec.has(s)){e.next=10;break}return Pv("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,_x(i.localStore,s);case 12:return u=e.sent,e.next=15,kx(i.localStore,u);case 15:return c=e.sent,e.next=18,vI(i,eS(u),c.targetId,!1);case 18:a_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ve(r),e.prev=30,f=fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,bx(i.localStore,t,!1).then((function(){o_(i.remoteStore,t),PI(i,t)})).catch(wm);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),aS.apply(this,arguments)}function oS(e){var t=Vv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=II.bind(null,t),t.Zu.Go=Z_.bind(null,t.eventManager),t.Zu.lc=eI.bind(null,t.eventManager),t}function sS(e){var t=Vv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=EI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=NI.bind(null,t),t}function uS(e,t,n){var r=Vv(e);(function(){var e=pe(fe().mark((function e(t,n,r){var i,a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Vv(e),r=Sk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(oI(i)),a=new aI(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,UI(t,u.Mu,void 0);case 31:return e.next=33,function(e,t){var n=Vv(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Lv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var cS=function(){function e(){me(this,e),this.synchronizeTabs=!1}return ye(e,[{key:"initialize",value:function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=Wx(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return hx(this.persistence,new cx,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Yw(ex.Ms,this.wt)}},{key:"dc",value:function(e){return new Ux}},{key:"terminate",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),lS=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ye(n,[{key:"initialize",value:function(){var e=pe(fe().mark((function e(t){var r=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(xe(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,sS(this.yc.syncEngine);case 6:return e.next=8,x_(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return hx(this.persistence,new cx,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Cw(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new Pm(t,this.persistence);return new Rm(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=sx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?pw.withCacheSize(this.cacheSizeBytes):pw.DEFAULT;return new ix(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Gx(),Hx(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new Ux}}]),n}(cS),hS=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ye(n,[{key:"initialize",value:function(){var e=pe(fe().mark((function e(t){var r,i=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(xe(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof Fx,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:QI.bind(null,r),Or:nS.bind(null,r),Mr:iS.bind(null,r),Ri:tS.bind(null,r),Nr:HI.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,XI(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=Gx();if(!Fx.V(t))throw new zv(Bv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(lS),fS=function(){function e(){me(this,e)}return ye(e,[{key:"initialize",value:function(){var e=pe(fe().mark((function e(t,n){var r=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return _I(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=BI.bind(null,this.syncEngine),e.next=12,F_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Q_}},{key:"createDatastore",value:function(e){var t,n=Wx(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Kx(t));return function(e,t,n,r){return new Yx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return _I(o.syncEngine,e,0)},a=Bx.V()?new Bx:new Vx,new e_(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new fI(e,t,n,r,i,a);return o&&(s.ac=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vv(t),Pv("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,r_(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function dS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return pe(fe().mark((function r(){var i;return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var pS=function(){function e(t){me(this,e),this.observer=t,this.muted=!1}return ye(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),vS=function(){function e(t,n){var r=this;me(this,e),this.Ec=t,this.wt=n,this.metadata=new qv,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ye(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=pe(fe().mark((function e(){var t,n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new rI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=pe(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=pe(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),mS=function(){function e(t){me(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ye(e,[{key:"lookup",value:function(){var e=pe(fe().mark((function e(t){var n,r=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new zv(Bv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=pe(fe().mark((function e(t,n){var r,i,a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vv(t),i=Dk(r.wt)+"/documents",a={documents:n.map((function(e){return Nk(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=Lk(r.wt,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Uv(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Gy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=pe(fe().mark((function e(){var t,n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=cm.fromPath(t);n.mutations.push(new Hy(r,n.precondition(r)))})),e.next=7,function(){var e=pe(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vv(t),i=Dk(r.wt)+"/documents",a={writes:n.map((function(e){return Mk(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fv();t=im.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new zv(Bv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ay.updateTime(t):Ay.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(im.min()))throw new zv(Bv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ay.updateTime(t)}return Ay.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),gS=function(){function e(t,n,r,i,a){me(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new Qx(this.asyncQueue,"transaction_retry")}return ye(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(pe(fe().mark((function t(){var n,r;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new mS(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!ng(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Qy(t)}return!1}}]),e}(),yS=function(){function e(t,n,r,i){var a=this;me(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Av.UNAUTHENTICATED,this.clientId=Zv.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Pv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ye(e,[{key:"getConfiguration",value:function(){var e=pe(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new zv(Bv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new qv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(pe(fe().mark((function n(){var r;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=q_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function kS(e,t){return bS.apply(this,arguments)}function bS(){return bS=pe(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Pv("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,fx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),bS.apply(this,arguments)}function wS(e,t){return xS.apply(this,arguments)}function xS(){return xS=pe(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,_S(t);case 3:return r=e.sent,Pv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return L_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return L_(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),xS.apply(this,arguments)}function _S(e){return IS.apply(this,arguments)}function IS(){return IS=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Pv("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,kS(t,new cS);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),IS.apply(this,arguments)}function SS(e){return ES.apply(this,arguments)}function ES(){return ES=pe(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Pv("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,wS(t,new fS);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),ES.apply(this,arguments)}function TS(e){return _S(e).then((function(e){return e.persistence}))}function NS(e){return _S(e).then((function(e){return e.localStore}))}function CS(e){return SS(e).then((function(e){return e.remoteStore}))}function AS(e){return SS(e).then((function(e){return e.syncEngine}))}function jS(e){return DS.apply(this,arguments)}function DS(){return DS=pe(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SS(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=dI.bind(null,n.syncEngine),r.onUnlisten=gI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),DS.apply(this,arguments)}function RS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new qv;return e.asyncQueue.enqueueAndForget(pe(fe().mark((function i(){return fe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new pS({next:function(a){t.enqueueAndForget((function(){return J_(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new zv(Bv.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new zv(Bv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new nI(Zg(n.path),a,{includeMetadataChanges:!0,Du:!0});return $_(e,o)},i.next=3,jS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function PS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new qv;return e.asyncQueue.enqueueAndForget(pe(fe().mark((function i(){return fe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new pS({next:function(n){t.enqueueAndForget((function(){return J_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new zv(Bv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new nI(n,a,{includeMetadataChanges:!0,Du:!0});return $_(e,o)},i.next=3,jS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var OS=new Map;function LS(e,t,n){if(!n)throw new zv(Bv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function MS(e,t,n,r){if(!0===t&&!0===r)throw new zv(Bv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function FS(e){if(!cm.isDocumentKey(e))throw new zv(Bv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function US(e){if(cm.isDocumentKey(e))throw new zv(Bv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function VS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Fv()}function BS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zv(Bv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=VS(e);throw new zv(Bv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function zS(e,t){if(t<=0)throw new zv(Bv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var qS=function(){function e(t){var n;if(me(this,e),void 0===t.host){if(void 0!==t.ssl)throw new zv(Bv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new zv(Bv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,MS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ye(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),KS=function(){function e(t,n,r){me(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qS({}),this._settingsFrozen=!1,t instanceof tg?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zv(Bv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tg(e.options.projectId)}(t))}return ye(e,[{key:"app",get:function(){if(!this._app)throw new zv(Bv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new zv(Bv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Gv;switch(e.type){case"gapi":var t=e.client;return Uv(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new $v(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new zv(Bv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=OS.get(e);t&&(Pv("ComponentProvider","Removing Datastore"),OS.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function GS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=BS(e,KS))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Lv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Av.MOCK_USER;else{o=Pe(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new zv(Bv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Av(u)}e._authCredentials=new Hv(new Kv(o,s))}}var HS=function(){function e(t,n,r){me(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ye(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new QS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),WS=function(){function e(t,n,r){me(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ye(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),QS=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this,e,r,Zg(i)))._path=i,a.type="collection",a}return ye(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new HS(this.firestore,null,new cm(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(WS);function $S(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=tt(e),LS("collection","path",t),e instanceof KS){var a=om.fromString.apply(om,[t].concat(r));return US(a),new QS(e,null,a)}if(!(e instanceof HS||e instanceof QS))throw new zv(Bv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(om.fromString.apply(om,[t].concat(r)));return US(o),new QS(e.firestore,null,o)}function XS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=tt(e),1===arguments.length&&(t=Zv.I()),LS("doc","path",t),e instanceof KS){var a=om.fromString.apply(om,[t].concat(r));return FS(a),new HS(e,null,new cm(a))}if(!(e instanceof HS||e instanceof QS))throw new zv(Bv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(om.fromString.apply(om,[t].concat(r)));return FS(o),new HS(e.firestore,e instanceof QS?e.converter:null,new cm(o))}function JS(e,t){return e=tt(e),t=tt(t),(e instanceof HS||e instanceof QS)&&(t instanceof HS||t instanceof QS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function YS(e,t){return e=tt(e),t=tt(t),e instanceof WS&&t instanceof WS&&e.firestore===t.firestore&&oy(e._query,t._query)&&e.converter===t.converter}var ZS=function(){function e(){var t=this;me(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Qx(this,"async_queue_retry"),this.Kc=function(){var e=Hx();e&&Pv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Hx();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return ye(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=Hx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new qv;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=pe(fe().mark((function e(){var t=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Nm(e.t0)){e.next=12;break}throw e.t0;case 12:Pv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ov("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=z_.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&Fv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=ve(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ve(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function eE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ve(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var tE=function(){function e(){me(this,e),this._progressObserver={},this._taskCompletionResolver=new qv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ye(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),nE=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new ZS,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ye(n,[{key:"_terminate",value:function(){return this._firestoreClient||iE(this),this._firestoreClient.terminate()}}]),n}(KS);function rE(e){return e._firestoreClient||iE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function iE(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new eg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new yS(e._authCredentials,e._appCheckCredentials,e._queue,r)}function aE(e,t,n){var r=new qv;return e.asyncQueue.enqueue(pe(fe().mark((function i(){var a;return fe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,kS(e,n);case 3:return i.next=5,wS(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Bv.FAILED_PRECONDITION||e.code===Bv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function oE(e){return function(e){return e.asyncQueue.enqueue(pe(fe().mark((function t(){var n,r;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,TS(e);case 2:return n=t.sent,t.next=5,CS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Vv(e);return t.lu.delete(0),t_(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(rE(e=BS(e,nE)))}function sE(e){return function(e){return e.asyncQueue.enqueue(pe(fe().mark((function t(){var n,r;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,TS(e);case 2:return n=t.sent,t.next=5,CS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vv(t)).lu.add(0),e.next=4,r_(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(rE(e=BS(e,nE)))}function uE(e,t){var n=rE(e=BS(e,nE)),r=new tE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new vS(e,t)}(function(e,t){if(e instanceof Uint8Array)return dS(e,t);if(e instanceof ArrayBuffer)return dS(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Wx(t));e.asyncQueue.enqueueAndForget(pe(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=uS,t.next=3,AS(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function cE(e,t){return function(e,t){return e.asyncQueue.enqueue(pe(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Vv(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,NS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(rE(e=BS(e,nE)),t).then((function(t){return t?new WS(e,null,t.query):null}))}function lE(e){if(e._initialized||e._terminated)throw new zv(Bv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var hE=function(){function e(){me(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new zv(Bv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new um(n)}return ye(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var fE=function(){function e(t){me(this,e),this._byteString=t}return ye(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Hm.fromBase64String(t))}catch(t){throw new zv(Bv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Hm.fromUint8Array(t))}}]),e}(),dE=ye((function e(t){me(this,e),this._methodName=t})),pE=function(){function e(t,n){if(me(this,e),!isFinite(t)||t<-90||t>90)throw new zv(Bv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new zv(Bv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ye(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return em(this._lat,e._lat)||em(this._long,e._long)}}]),e}(),vE=/^__.*__$/,mE=function(){function e(t,n,r){me(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ye(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Uy(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fy(e,this.data,t,this.fieldTransforms)}}]),e}(),gE=function(){function e(t,n,r){me(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ye(e,[{key:"toMutation",value:function(e,t){return new Uy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function yE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fv()}}var kE=function(){function e(t,n,r,i,a,o){me(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ye(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return UE(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(yE(this.Zc)&&vE.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),bE=function(){function e(t,n,r){me(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||Wx(t)}return ye(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new kE({Zc:e,methodName:t,ca:n,path:um.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function wE(e){var t=e._freezeSettings(),n=Wx(e._databaseId);return new bE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);OE("Data must be an object, but it was:",o,r);var s,u,c=RE(r,o);if(a.merge)s=new Gm(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=ve(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=LE(t,d,n);if(!o.contains(p))throw new zv(Bv.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));VE(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new Gm(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new mE(new Eg(c),s,u)}var _E=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(dE);function IE(e,t,n){return new kE({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var SE=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n,[{key:"_toFieldTransform",value:function(e){return new Ny(e.path,new by)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(dE),EE=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e)).ha=r,i}return ye(n,[{key:"_toFieldTransform",value:function(e){var t=IE(this,e,!0),n=this.ha.map((function(e){return DE(e,t)})),r=new wy(n);return new Ny(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(dE),TE=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e)).ha=r,i}return ye(n,[{key:"_toFieldTransform",value:function(e){var t=IE(this,e,!0),n=this.ha.map((function(e){return DE(e,t)})),r=new _y(n);return new Ny(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(dE),NE=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e)).la=r,i}return ye(n,[{key:"_toFieldTransform",value:function(e){var t=new Sy(e.wt,vy(e.wt,this.la));return new Ny(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(dE);function CE(e,t,n,r){var i=e.aa(1,t,n);OE("Data must be an object, but it was:",i,r);var a=[],o=Eg.empty();Mm(r,(function(e,r){var s=FE(t,e,n);r=tt(r);var u=i.ia(s);if(r instanceof _E)a.push(s);else{var c=DE(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Gm(a);return new gE(o,s,i.fieldTransforms)}function AE(e,t,n,r,i,a){var o=e.aa(1,t,n),s=[LE(t,r,n)],u=[i];if(a.length%2!=0)throw new zv(Bv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(LE(t,a[c])),u.push(a[c+1]);for(var l=[],h=Eg.empty(),f=s.length-1;f>=0;--f)if(!VE(l,s[f])){var d=s[f],p=u[f];p=tt(p);var v=o.ia(d);if(p instanceof _E)l.push(d);else{var m=DE(p,v);null!=m&&(l.push(d),h.set(d,m))}}var g=new Gm(l);return new gE(h,g,o.fieldTransforms)}function jE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return DE(n,e.aa(r?4:3,t))}function DE(e,t){if(PE(e=tt(e)))return OE("Unsupported field value:",t,e),RE(e,t);if(e instanceof dE)return function(e,t){if(!yE(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ve(e);try{for(a.s();!(n=a.n()).done;){var o=DE(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=tt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return vy(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=rm.fromDate(e);return{timestampValue:xk(t.wt,n)}}if(e instanceof rm){var r=new rm(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xk(t.wt,r)}}if(e instanceof pE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof fE)return{bytesValue:_k(t.wt,e._byteString)};if(e instanceof HS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ek(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(VS(e)))}(e,t)}function RE(e,t){var n={};return Fm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mm(e,(function(e,r){var i=DE(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function PE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof rm||e instanceof pE||e instanceof fE||e instanceof HS||e instanceof dE)}function OE(e,t,n){if(!PE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=VS(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function LE(e,t,n){if((t=tt(t))instanceof hE)return t._internalPath;if("string"==typeof t)return FE(e,t);throw UE("Field path arguments must be of type string or ",e,!1,void 0,n)}var ME=new RegExp("[~\\*/\\[\\]]");function FE(e,t,n){if(t.search(ME)>=0)throw UE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Ee(hE,te(t.split(".")))._internalPath}catch(r){throw UE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function UE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new zv(Bv.INVALID_ARGUMENT,s+e+u)}function VE(e,t){return e.some((function(e){return e.isEqual(t)}))}var BE=function(){function e(t,n,r,i,a){me(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ye(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new HS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new zE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(qE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),zE=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n,[{key:"data",value:function(){return Nn(xe(n.prototype),"data",this).call(this)}}]),n}(BE);function qE(e,t){return"string"==typeof t?FE(e,t):t instanceof hE?t._internalPath:t._delegate._internalPath}var KE=function(){function e(t,n){me(this,e),this.hasPendingWrites=t,this.fromCache=n}return ye(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),GE=function(e){we(n,e);var t=Se(n);function n(e,r,i,a,o,s){var u;return me(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return ye(n,[{key:"exists",value:function(){return Nn(xe(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new HE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(qE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(BE),HE=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Nn(xe(n.prototype),"data",this).call(this,e)}}]),n}(GE),WE=function(){function e(t,n,r,i){me(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new KE(i.hasPendingWrites,i.fromCache),this.query=r}return ye(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new HE(n._firestore,n._userDataWriter,r.key,r,new KE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new zv(Bv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new HE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new KE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new HE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new KE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:QE(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function QE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fv()}}function $E(e,t){return e instanceof GE&&t instanceof GE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof WE&&t instanceof WE&&e._firestore===t._firestore&&YS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function XE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new zv(Bv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var JE=ye((function e(){me(this,e)}));function YE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var ZE=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return ye(n,[{key:"_apply",value:function(e){var t=wE(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new zv(Bv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){lT(o,a);var u,c=[],l=ve(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(cT(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=cT(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||lT(o,a),s=jE(n,"where",o,"in"===a||"not-in"===a);var f=Mg.create(i,a,s);return function(e,t){if(t.ht()){var n=ty(e);if(null!==n&&!n.isEqual(t.field))throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=ey(e);null!==r&&hT(e,t.field,r)}var i=function(e,t){var n,r=ve(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new zv(Bv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new zv(Bv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new WS(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Jg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(JE);var eT=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return ye(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Wg(t,n);return function(e,t){if(null===ey(e)){var n=ty(e);null!==n&&hT(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new WS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Jg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(JE);var tT=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return ye(n,[{key:"_apply",value:function(e){return new WS(e.firestore,e.converter,ay(e._query,this.ma,this.ga))}}]),n}(JE);var nT=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ye(n,[{key:"_apply",value:function(e){var t=uT(e,this.type,this.ya,this.pa);return new WS(e.firestore,e.converter,function(e,t){return new Jg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(JE);function rT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nT("startAt",t,!0)}function iT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nT("startAfter",t,!1)}var aT=function(e){we(n,e);var t=Se(n);function n(e,r,i){var a;return me(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ye(n,[{key:"_apply",value:function(e){var t=uT(e,this.type,this.ya,this.pa);return new WS(e.firestore,e.converter,function(e,t){return new Jg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(JE);function oT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aT("endBefore",t,!1)}function sT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aT("endAt",t,!0)}function uT(e,t,n,r){if(n[0]=tt(n[0]),n[0]instanceof BE)return function(e,t,n,r,i){if(!r)throw new zv(Bv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=ve(ry(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(pg(t,r.key));else{var c=r.data.field(u.field);if(Jm(c))throw new zv(Bv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new Hg(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=wE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new zv(Bv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ny(e)&&-1!==c.indexOf("/"))throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(om.fromString(c));if(!cm.isDocumentKey(l))throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new cm(l);s.push(pg(t,h))}else{var f=jE(n,r,c);s.push(f)}}return new Hg(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function cT(e,t,n){if("string"==typeof(n=tt(n))){if(""===n)throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ny(t)&&-1!==n.indexOf("/"))throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(om.fromString(n));if(!cm.isDocumentKey(r))throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return pg(e,new cm(r))}if(n instanceof HS)return pg(e,n._key);throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(VS(n),"."))}function lT(e,t){if(!Array.isArray(e)||0===e.length)throw new zv(Bv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new zv(Bv.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function hT(e,t,n){if(!n.isEqual(t))throw new zv(Bv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var fT={maxAttempts:5},dT=function(){function e(){me(this,e)}return ye(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $m(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fv()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Mm(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new pE($m(e.latitude),$m(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ym(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zm(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Qm(e);return new rm(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=om.fromString(e);Uv(Xk(n));var r=new tg(n.get(1),n.get(3)),i=new cm(n.popFirst(5));return r.isEqual(t)||Ov("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function pT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var vT=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this)).firestore=e,r}return ye(n,[{key:"convertBytes",value:function(e){return new fE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new HS(this.firestore,null,t)}}]),n}(dT),mT=function(){function e(t,n){me(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wE(t)}return ye(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=gT(e,this._firestore),i=pT(r.converter,t,n),a=xE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ay.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=gT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=tt(t))||t instanceof hE?AE(this._dataReader,"WriteBatch.update",i._key,t,n,o):CE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ay.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=gT(e,this._firestore);return this._mutations=this._mutations.concat(new Gy(t._key,Ay.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new zv(Bv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function gT(e,t){if((e=tt(e)).firestore!==t)throw new zv(Bv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var yT=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this)).firestore=e,r}return ye(n,[{key:"convertBytes",value:function(e){return new fE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new HS(this.firestore,null,t)}}]),n}(dT);function kT(e){e=BS(e,HS);var t=BS(e.firestore,nE),n=rE(t),r=new yT(t);return function(e,t){var n=new qv;return e.asyncQueue.enqueueAndForget(pe(fe().mark((function r(){return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=pe(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Vv(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new zv(Bv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=q_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,NS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new GE(t,r,e._key,n,new KE(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function bT(e){e=BS(e,WS);var t=BS(e.firestore,nE),n=rE(t),r=new yT(t);return XE(e._query),PS(n,e._query).then((function(n){return new WE(t,r,e,n)}))}function wT(e){e=BS(e,WS);var t=BS(e.firestore,nE),n=rE(t),r=new yT(t);return function(e,t){var n=new qv;return e.asyncQueue.enqueueAndForget(pe(fe().mark((function r(){return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=pe(fe().mark((function e(t,n,r){var i,a,o,s,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xx(t,n,!0);case 3:i=e.sent,a=new cI(n,i.ji),o=a.Ku(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=q_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,NS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new WE(t,r,e,n)}))}function xT(e,t,n){e=BS(e,HS);var r=BS(e.firestore,nE),i=pT(e.converter,t,n);return TT(r,[xE(wE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ay.none())])}function _T(e,t,n){e=BS(e,HS);for(var r=BS(e.firestore,nE),i=wE(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return TT(r,[("string"==typeof(t=tt(t))||t instanceof hE?AE(i,"updateDoc",e._key,t,n,o):CE(i,"updateDoc",e._key,t)).toMutation(e._key,Ay.exists(!0))])}function IT(e,t){var n=BS(e.firestore,nE),r=XS(e),i=pT(e.converter,t);return TT(n,[xE(wE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ay.exists(!1))]).then((function(){return r}))}function ST(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=tt(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||eE(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(eE(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof HS)l=BS(e.firestore,nE),h=Zg(e._key.path),c={next:function(t){n[u]&&n[u](NT(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=BS(e,WS);l=BS(p.firestore,nE),h=p._query;var v=new yT(l);c={next:function(e){n[u]&&n[u](new WE(l,v,p,e))},error:n[u+1],complete:n[u+2]},XE(e._query)}return function(e,t,n,r){var i=new pS(r),a=new nI(t,i,n);return e.asyncQueue.enqueueAndForget(pe(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=$_,t.next=3,jS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(pe(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=J_,t.next=3,jS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(rE(l),h,f,c)}function ET(e,t){return function(e,t){var n=new pS(t);return e.asyncQueue.enqueueAndForget(pe(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vv(e).Tu.add(t),t.next()},t.next=3,jS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(pe(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vv(e).Tu.delete(t)},t.next=3,jS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(rE(e=BS(e,nE)),eE(t)?t:{next:t})}function TT(e,t){return function(e,t){var n=new qv;return e.asyncQueue.enqueueAndForget(pe(fe().mark((function r(){return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=kI,r.next=3,AS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(rE(e),t)}function NT(e,t,n){var r=n.docs.get(t._key),i=new yT(e);return new GE(e,i,t._key,r,new KE(n.hasPendingWrites,n.fromCache),t.converter)}var CT=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e,r))._firestore=e,i}return ye(n,[{key:"get",value:function(e){var t=this,r=gT(e,this._firestore),i=new yT(this._firestore);return Nn(xe(n.prototype),"get",this).call(this,e).then((function(e){return new GE(t._firestore,i,r._key,e._document,new KE(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){me(this,e),this._firestore=t,this._transaction=n,this._dataReader=wE(t)}return ye(e,[{key:"get",value:function(e){var t=this,n=gT(e,this._firestore),r=new vT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Fv();var i=e[0];if(i.isFoundDocument())return new BE(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new BE(t._firestore,r,n._key,null,n.converter);throw Fv()}))}},{key:"set",value:function(e,t,n){var r=gT(e,this._firestore),i=pT(r.converter,t,n),a=xE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=gT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=tt(t))||t instanceof hE?AE(this._dataReader,"Transaction.update",i._key,t,n,o):CE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=gT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function AT(e,t,n){e=BS(e,nE);var r=Object.assign(Object.assign({},fT),n);return function(e){if(e.maxAttempts<1)throw new zv(Bv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new qv;return e.asyncQueue.enqueueAndForget(pe(fe().mark((function i(){var a;return fe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return SS(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new gS(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(rE(e),(function(n){return t(new CT(e,n))}),r)}function jT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new EE("arrayUnion",t)}function DT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new TE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){jv=e}($t),zt(new nt("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new nE(i,new Wv(e.getProvider("auth-internal")),new Jv(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),tn(Cv,"3.4.13",e),tn(Cv,"3.4.13","esm2017")}();function RT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new zv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function PT(){if("undefined"===typeof Uint8Array)throw new zv("unimplemented","Uint8Arrays are not available in this environment.")}function OT(){if("undefined"==typeof atob)throw new zv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var LT=function(){function e(t){me(this,e),this._delegate=t}return ye(e,[{key:"toBase64",value:function(){return OT(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return PT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return OT(),new e(fE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return PT(),new e(fE.fromUint8Array(t))}}]),e}();function MT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ve(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var FT=function(){function e(){me(this,e)}return ye(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){lE(e=BS(e,nE));var n=rE(e),r=e._freezeSettings(),i=new fS;return aE(n,i,new lS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){lE(e=BS(e,nE));var t=rE(e),n=e._freezeSettings(),r=new fS;return aE(t,r,new hS(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new zv(Bv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new qv;return e._queue.enqueueAndForgetEvenWhileRestricted(pe(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=pe(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sm.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Sm.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(sx(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),UT=function(){function e(t,n,r){var i=this;me(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof tg||(this._appCompat=t)}return ye(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Lv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};GS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return oE(this._delegate)}},{key:"disableNetwork",value:function(){return sE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&MS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new qv;return e.asyncQueue.enqueueAndForget(pe(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=AI,n.next=3,AS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(rE(e=BS(e,nE)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return ET(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new zv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new ZT(this,$S(this._delegate,e))}catch(t){throw GT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new KT(this,XS(this._delegate,e))}catch(t){throw GT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new XT(this,function(e,t){if(e=BS(e,KS),LS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new zv(Bv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new WS(e,null,function(e){return new Jg(om.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw GT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return AT(this._delegate,(function(n){return e(new BT(t,n))}))}},{key:"batch",value:function(){var e=this;return rE(this._delegate),new zT(new mT(this._delegate,(function(t){return TT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return uE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return cE(this._delegate,e).then((function(e){return e?new XT(t,e):null}))}}]),e}(),VT=function(e){we(n,e);var t=Se(n);function n(e){var r;return me(this,n),(r=t.call(this)).firestore=e,r}return ye(n,[{key:"convertBytes",value:function(e){return new LT(new fE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return KT.forKey(t,this.firestore,null)}}]),n}(dT);var BT=function(){function e(t,n){me(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new VT(t)}return ye(e,[{key:"get",value:function(e){var t=this,n=eN(e);return this._delegate.get(n).then((function(e){return new QT(t._firestore,new GE(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=eN(e);return n?(RT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=eN(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=eN(e);return this._delegate.delete(t),this}}]),e}(),zT=function(){function e(t){me(this,e),this._delegate=t}return ye(e,[{key:"set",value:function(e,t,n){var r=eN(e);return n?(RT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=eN(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=eN(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),qT=function(){function e(t,n,r){me(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ye(e,[{key:"fromFirestore",value:function(e,t){var n=new HE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $T(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new VT(t),n),i.set(n,a)),a}}]),e}();qT.INSTANCES=new WeakMap;var KT=function(){function e(t,n){me(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new VT(t)}return ye(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new ZT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new ZT(this.firestore,$S(this._delegate,e))}catch(t){throw GT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=tt(e))instanceof HS&&JS(this._delegate,e)}},{key:"set",value:function(e,t){t=RT("DocumentReference.set",t);try{return t?xT(this._delegate,e,t):xT(this._delegate,e)}catch(n){throw GT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?_T(this._delegate,e):_T.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw GT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return TT(BS(e.firestore,nE),[new Gy(e._key,Ay.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=HT(n),a=WT(n,(function(t){return new QT(e.firestore,new GE(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return ST(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?kT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=BS(e,HS);var t=BS(e.firestore,nE);return RS(rE(t),e._key,{source:"server"}).then((function(n){return NT(t,e,n)}))}(this._delegate):function(e){e=BS(e,HS);var t=BS(e.firestore,nE);return RS(rE(t),e._key).then((function(n){return NT(t,e,n)}))}(this._delegate),t.then((function(e){return new QT(n.firestore,new GE(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(qT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new zv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new HS(n._delegate,r,new cm(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new HS(n._delegate,r,t))}}]),e}();function GT(e,t,n){return e.message=e.message.replace(t,n),e}function HT(e){var t,n=ve(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!MT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function WT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=MT(e[0])?e[0]:MT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var QT=function(){function e(t,n){me(this,e),this._firestore=t,this._delegate=n}return ye(e,[{key:"ref",get:function(){return new KT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return $E(this._delegate,e._delegate)}}]),e}(),$T=function(e){we(n,e);var t=Se(n);function n(){return me(this,n),t.apply(this,arguments)}return ye(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Fv()}(void 0!==t),t}}]),n}(QT),XT=function(){function e(t,n){me(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new VT(t)}return ye(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,YE(this._delegate,function(e,t,n){var r=t,i=qE("where",e);return new ZE(i,r,n)}(t,n,r)))}catch(i){throw GT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,YE(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=qE("orderBy",e);return new eT(n,t)}(t,n)))}catch(r){throw GT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,YE(this._delegate,function(e){return zS("limit",e),new tT("limit",e,"F")}(t)))}catch(n){throw GT(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,YE(this._delegate,function(e){return zS("limitToLast",e),new tT("limitToLast",e,"L")}(t)))}catch(n){throw GT(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,YE(this._delegate,rT.apply(void 0,arguments)))}catch(t){throw GT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,YE(this._delegate,iT.apply(void 0,arguments)))}catch(t){throw GT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,YE(this._delegate,oT.apply(void 0,arguments)))}catch(t){throw GT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,YE(this._delegate,sT.apply(void 0,arguments)))}catch(t){throw GT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return YS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?wT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=BS(e,WS);var t=BS(e.firestore,nE),n=rE(t),r=new yT(t);return PS(n,e._query,{source:"server"}).then((function(n){return new WE(t,r,e,n)}))}(this._delegate):bT(this._delegate),t.then((function(e){return new YT(n.firestore,new WE(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=HT(n),a=WT(n,(function(t){return new YT(e.firestore,new WE(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return ST(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(qT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),JT=function(){function e(t,n){me(this,e),this._firestore=t,this._delegate=n}return ye(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new $T(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),YT=function(){function e(t,n){me(this,e),this._firestore=t,this._delegate=n}return ye(e,[{key:"query",get:function(){return new XT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new $T(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new JT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new $T(n._firestore,r))}))}},{key:"isEqual",value:function(e){return $E(this._delegate,e._delegate)}}]),e}(),ZT=function(e){we(n,e);var t=Se(n);function n(e,r){var i;return me(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ye(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new KT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new KT(this.firestore,void 0===e?XS(this._delegate):XS(this._delegate,e))}catch(t){throw GT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return IT(this._delegate,e).then((function(e){return new KT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return JS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(qT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(XT);function eN(e){return BS(e,HS)}var tN=function(){function e(){me(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Ee(hE,n)}return ye(e,[{key:"isEqual",value:function(e){return(e=tt(e))instanceof hE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(um.keyField().canonicalString())}}]),e}(),nN=function(){function e(t){me(this,e),this._delegate=t}return ye(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new SE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new _E("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=jT.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=DT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new NE("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),rN={Firestore:UT,GeoPoint:pE,Timestamp:rm,Blob:LT,Transaction:BT,WriteBatch:zT,DocumentReference:KT,DocumentSnapshot:QT,Query:XT,QueryDocumentSnapshot:$T,QuerySnapshot:YT,CollectionReference:ZT,FieldPath:tN,FieldValue:nN,setLogLevel:function(e){!function(e){Dv.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new nt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},rN)))}(e,(function(e,t){return new UT(e,t,new FT)})),e.registerVersion("@firebase/firestore-compat","0.1.22")}(En);var iN={apiKey:"AIzaSyDc0owQlIC3Ta2lhfXy5sMePQCxuQLTdjs",authDomain:"e-commerce-web-b1bda.firebaseapp.com",projectId:"e-commerce-web-b1bda",storageBucket:"e-commerce-web-b1bda.appspot.com",messagingSenderId:"585247006954",appId:"1:585247006954:web:f50c7bff72d6221a94f793",measurementId:"G-3333RC20XB"};En.initializeApp(iN);var aN=Xt(iN),oN=En.initializeApp(iN),sN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt(),t=arguments.length>1?arguments[1]:void 0,n=qt(e=tt(e),fh),r=n.getImmediate({identifier:t});return r}(aN),uN=oN.firestore(),cN=En.auth(),lN=r.createContext(),hN=function(e){var t=e.children,n=f((0,r.useState)([]),2),i=n[0],a=n[1],o=f((0,r.useState)({show:!0,msg:"",type:""}),2),s=o[0],u=o[1],c=f((0,r.useState)(re),2),l=c[0],h=c[1],d=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";u({show:e,type:t,msg:n})};(0,r.useEffect)((function(){var e=setTimeout((function(){d()}),200);return function(){return clearTimeout(e)}}),[]);var p=f((0,r.useState)(),2),v=p[0],m=p[1];(0,r.useEffect)((function(){cN.onAuthStateChanged((function(e){uN.collection("UserData").doc(e.uid).get().then((function(e){throw m({user:e.data()}),new Error("oh, no!")})).catch((function(e){console.log(e)}))}))}),[]);var g,y=f((0,r.useState)([]),2),k=y[0],b=y[1],w=f((0,r.useState)([]),2),x=w[0],_=w[1];(0,r.useEffect)((function(){ST(YE($S(uN,"PRODUCT-ITEMS")),(function(e){b(e.docs.map((function(e){return{data:e.data()}}))).catch((function(e){d(!0,"danger",{err:e})}))}))}),[]),(0,r.useEffect)((function(){ST(YE($S(uN,"UserData")),(function(e){_(e.docs.map((function(e){return{data:e.data()}})))}))}),[]);return g=Date.now().toString(36)+Math.random().toString(36).substr(2),(0,se.jsx)(lN.Provider,{value:{alert:s,showAlert:d,Product:i,user:v,setProduct:a,posts:k,User:x,producItem:l,setproducItem:h,randommingId:g},children:t})},fN=function(){return(0,r.useContext)(lN)};var dN=function(){var e=fN().user,t=le(),n=t.state,i=n.cart,a=n.totoalPrice,o=t.dispatch,s=f((0,r.useState)(),2),u=s[0],c=s[1],l=f((0,r.useState)(0),2);return l[0],l[1],(0,r.useEffect)((function(){console.log(a)}),[]),(0,r.useEffect)((function(){c(i.reduce((function(e,t){return e+Number(t.price)*t.qty}),0))}),[i]),(0,se.jsx)(se.Fragment,{children:(0,se.jsx)("div",{className:"pointer-events-auto w-screen max-w-lg flex justify-center items-center mt-[45px]",children:(0,se.jsxs)("div",{className:"flex h-full flex-col bg-white shadow-xl w-full",children:[(0,se.jsxs)("div",{className:"flex-1 overflow-y-auto py-6 px-4 sm:px-6",children:[(0,se.jsxs)("div",{className:"flex items-start justify-between",children:[(0,se.jsx)("h2",{className:"text-lg font-medium text-gray-900",id:"slide-over-title",children:"Shopping cart"}),(0,se.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,se.jsxs)("button",{type:"button",className:"-m-2 p-2 text-gray-400 hover:text-gray-500",children:[(0,se.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,se.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})})]}),(0,se.jsx)("div",{className:"mt-8",children:(0,se.jsx)("div",{className:"flow-root",children:(0,se.jsx)("ul",{role:"list",className:"-my-6 divide-y divide-gray-200",children:i.length<1?(0,se.jsx)(se.Fragment,{children:(0,se.jsx)("h1",{className:"text-3xl",children:"CART IS EMPTY ??"})}):i.map((function(e){return(0,se.jsxs)("li",{className:"flex py-6",children:[(0,se.jsx)("div",{className:"h-24 w-24 flex-shrink-0 overflow-hidden rounded-md border border-gray-200",children:(0,se.jsx)("img",{src:e.imageSrc,alt:e.imageAlt,className:"h-full w-full object-cover object-center"})}),(0,se.jsxs)("div",{className:"ml-4 flex flex-1 flex-col",children:[(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[(0,se.jsx)("h3",{children:(0,se.jsx)("a",{href:"#",children:e.name})}),(0,se.jsx)("p",{className:"ml-4",children:e.price})]}),(0,se.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Salmon"})]}),(0,se.jsxs)("div",{className:"flex flex-1 items-end justify-between text-sm",children:[(0,se.jsx)("select",{onChange:function(t){return o({type:"Change_Quantity",payload:{id:e.id,qty:t.target.value}})},className:"w-20 border-2",children:te(Array(10)).map((function(e,t){return(0,se.jsx)("option",{value:t+1,children:t+1},t+1)}))}),(0,se.jsx)("div",{className:"flex",children:(0,se.jsx)("button",{onClick:function(){return o({type:"REMOVE_FROM_CART",payload:e})},type:"button",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"X"})})]})]})]})}))})})})]}),(0,se.jsxs)("div",{className:"border-t border-gray-200 py-6 px-4 sm:px-6",children:[(0,se.jsxs)("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[(0,se.jsx)("p",{children:"Subtotal"}),(0,se.jsxs)("p",{children:["$ ",(0,se.jsx)("span",{children:u})]})]}),(0,se.jsxs)("p",{className:"mt-0.5 text-sm text-gray-500",children:["You are buying ",i.length," Items"]}),(0,se.jsx)("div",{className:"mt-6",children:(0,se.jsx)("a",{onClick:function(){e?alert("you can checkout now"):alert("you are not a user here pls signUp")},href:"#",className:"flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-6 py-3 text-base font-medium text-white shadow-sm hover:bg-indigo-700",children:"Checkout"})}),(0,se.jsx)("div",{className:"mt-6 flex justify-center text-center text-sm text-gray-500",children:(0,se.jsxs)("p",{children:["or ",(0,se.jsxs)("button",{type:"button",className:"font-medium text-indigo-600 hover:text-indigo-500",children:["Continue Shopping",(0,se.jsx)("span",{"aria-hidden":"true",children:" \u2192"})]})]})})]})]})})})};var pN=function(){var e=function(){var e=(0,r.useContext)(I).matches,t=e[e.length-1];return t?t.params:{}}().id;console.log(e,"me review");var t=f((0,r.useState)({id:e}),2),n=(t[0],t[1],re.filter((function(t){return t.id==e})));return(0,se.jsx)("div",{children:n.map((function(e){e.color,e.href,e.id;var t=e.imageAlt,n=e.imageSrc,r=e.name,i=e.price;return(0,se.jsxs)("div",{className:"relative z-10 mt-30",role:"dialog","aria-modal":"true",children:[(0,se.jsx)("div",{className:"hidden fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity md:block"}),(0,se.jsx)("button",{className:"absolute text-red-500 right-0",children:"X"}),(0,se.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,se.jsx)("div",{className:"flex items-stretch md:items-center justify-center min-h-full text-center md:px-2 lg:px-4",children:(0,se.jsx)("div",{className:"flex text-base text-left transform transition w-full md:max-w-2xl md:px-4 md:my-8 lg:max-w-4xl",children:(0,se.jsx)("div",{className:"w-full relative flex items-center bg-white px-4 pt-14 pb-8 overflow-hidden shadow-2xl sm:px-6 sm:pt-8 md:p-6 lg:p-8",children:(0,se.jsxs)("div",{className:"w-full grid grid-cols-1 gap-y-8 gap-x-6 items-start sm:grid-cols-12 lg:gap-x-8",children:[(0,se.jsx)("div",{className:"aspect-w-2 aspect-h-3 rounded-lg bg-gray-100 overflow-hidden sm:col-span-4 lg:col-span-5",children:(0,se.jsx)("img",{src:n,alt:t,className:"object-center object-cover"})}),(0,se.jsxs)("div",{className:"sm:col-span-8 lg:col-span-7",children:[(0,se.jsx)("h2",{className:"text-2xl font-extrabold text-gray-900 sm:pr-12",children:r}),(0,se.jsxs)("section",{"aria-labelledby":"information-heading",className:"mt-2",children:[(0,se.jsx)("h3",{id:"information-heading",className:"sr-only",children:"Product information"}),(0,se.jsx)("p",{className:"text-2xl text-gray-900",children:i}),(0,se.jsxs)("div",{className:"mt-6",children:[(0,se.jsx)("h4",{className:"sr-only",children:"Reviews"}),(0,se.jsxs)("div",{className:"flex items-center",children:[(0,se.jsxs)("div",{className:"flex items-center",children:[(0,se.jsx)("svg",{className:"text-gray-900 h-5 w-5 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,se.jsx)("svg",{className:"text-gray-900 h-5 w-5 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,se.jsx)("svg",{className:"text-gray-900 h-5 w-5 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,se.jsx)("svg",{className:"text-gray-900 h-5 w-5 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,se.jsx)("svg",{className:"text-gray-200 h-5 w-5 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]}),(0,se.jsx)("p",{className:"sr-only",children:"3.9 out of 5 stars"}),(0,se.jsx)("a",{href:"#",className:"ml-3 text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"117 reviews"})]})]})]}),(0,se.jsxs)("section",{"aria-labelledby":"options-heading",className:"mt-10",children:[(0,se.jsx)("h3",{id:"options-heading",className:"sr-only",children:"Product options"}),(0,se.jsxs)("form",{children:[(0,se.jsx)("div",{children:(0,se.jsx)("h4",{className:"text-sm text-gray-900 font-medium",children:"Color"})}),(0,se.jsxs)("div",{className:"mt-10",children:[(0,se.jsxs)("div",{className:"flex items-center justify-between",children:[(0,se.jsx)("h4",{className:"text-sm text-gray-900 font-medium",children:"Size"}),(0,se.jsx)("a",{href:"#",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Size guide"})]}),(0,se.jsxs)("fieldset",{className:"mt-4",children:[(0,se.jsx)("legend",{className:"sr-only",children:"Choose a size"}),(0,se.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,se.jsxs)("label",{className:"group relative border rounded-md py-3 px-4 flex items-center justify-center text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 bg-white shadow-sm text-gray-900 cursor-pointer",children:[(0,se.jsx)("input",{type:"radio",name:"size-choice",value:"XXS",className:"sr-only","aria-labelledby":"size-choice-0-label"}),(0,se.jsx)("span",{id:"size-choice-0-label",children:" XXS "}),(0,se.jsx)("span",{className:"absolute -inset-px rounded-md pointer-events-none","aria-hidden":"true"})]}),(0,se.jsxs)("label",{className:"group relative border rounded-md py-3 px-4 flex items-center justify-center text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 bg-white shadow-sm text-gray-900 cursor-pointer",children:[(0,se.jsx)("input",{type:"radio",name:"size-choice",value:"XS",className:"sr-only","aria-labelledby":"size-choice-1-label"}),(0,se.jsx)("span",{id:"size-choice-1-label",children:" XS "}),(0,se.jsx)("span",{className:"absolute -inset-px rounded-md pointer-events-none","aria-hidden":"true"})]}),(0,se.jsxs)("label",{className:"group relative border rounded-md py-3 px-4 flex items-center justify-center text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 bg-white shadow-sm text-gray-900 cursor-pointer",children:[(0,se.jsx)("input",{type:"radio",name:"size-choice",value:"S",className:"sr-only","aria-labelledby":"size-choice-2-label"}),(0,se.jsx)("span",{id:"size-choice-2-label",children:" S "}),(0,se.jsx)("span",{className:"absolute -inset-px rounded-md pointer-events-none","aria-hidden":"true"})]}),(0,se.jsxs)("label",{className:"group relative border rounded-md py-3 px-4 flex items-center justify-center text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 bg-white shadow-sm text-gray-900 cursor-pointer",children:[(0,se.jsx)("input",{type:"radio",name:"size-choice",value:"M",className:"sr-only","aria-labelledby":"size-choice-3-label"}),(0,se.jsx)("span",{id:"size-choice-3-label",children:" M "}),(0,se.jsx)("span",{className:"absolute -inset-px rounded-md pointer-events-none","aria-hidden":"true"})]}),(0,se.jsxs)("label",{className:"group relative border rounded-md py-3 px-4 flex items-center justify-center text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 bg-white shadow-sm text-gray-900 cursor-pointer",children:[(0,se.jsx)("input",{type:"radio",name:"size-choice",value:"L",className:"sr-only","aria-labelledby":"size-choice-4-label"}),(0,se.jsx)("span",{id:"size-choice-4-label",children:" L "}),(0,se.jsx)("span",{className:"absolute -inset-px rounded-md pointer-events-none","aria-hidden":"true"})]}),(0,se.jsxs)("label",{className:"group relative border rounded-md py-3 px-4 flex items-center justify-center text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 bg-white shadow-sm text-gray-900 cursor-pointer",children:[(0,se.jsx)("input",{type:"radio",name:"size-choice",value:"XL",className:"sr-only","aria-labelledby":"size-choice-5-label"}),(0,se.jsx)("span",{id:"size-choice-5-label",children:" XL "}),(0,se.jsx)("span",{className:"absolute -inset-px rounded-md pointer-events-none","aria-hidden":"true"})]}),(0,se.jsxs)("label",{className:"group relative border rounded-md py-3 px-4 flex items-center justify-center text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 bg-white shadow-sm text-gray-900 cursor-pointer",children:[(0,se.jsx)("input",{type:"radio",name:"size-choice",value:"XXL",className:"sr-only","aria-labelledby":"size-choice-6-label"}),(0,se.jsx)("span",{id:"size-choice-6-label",children:" XXL "}),(0,se.jsx)("span",{className:"absolute -inset-px rounded-md pointer-events-none","aria-hidden":"true"})]}),(0,se.jsxs)("label",{className:"group relative border rounded-md py-3 px-4 flex items-center justify-center text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 bg-gray-50 text-gray-200 cursor-not-allowed",children:[(0,se.jsx)("input",{type:"radio",name:"size-choice",value:"XXXL",disabled:!0,className:"sr-only","aria-labelledby":"size-choice-7-label"}),(0,se.jsx)("span",{id:"size-choice-7-label",children:" XXXL "}),(0,se.jsx)("span",{"aria-hidden":"true",className:"absolute -inset-px rounded-md border-2 border-gray-200 pointer-events-none",children:(0,se.jsx)("svg",{className:"absolute inset-0 w-full h-full text-gray-200 stroke-2",viewBox:"0 0 100 100",preserveAspectRatio:"none",stroke:"currentColor",children:(0,se.jsx)("line",{x1:"0",y1:"100",x2:"100",y2:"0","vector-effect":"non-scaling-stroke"})})})]})]})]})]}),(0,se.jsx)("button",{type:"submit",className:"mt-6 w-full bg-indigo-600 border border-transparent rounded-md py-3 px-8 flex items-center justify-center text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add to bag"})]})]})]})]})})})})})]})}))})};var vN=function(){var e=le().state.cart,t=fN().user,n=[];n.push(t);var i=z(),a=f((0,r.useState)(!1),2),o=a[0],s=a[1],u=f((0,r.useState)(!1),2),c=u[0],l=u[1],h=f((0,r.useState)(!1),2);return h[0],h[1],window.onscroll=function(){s(!1),l(!1)},(0,se.jsx)("div",{children:(0,se.jsxs)("nav",{className:"bg-gray-800  sm:flex fixed w-screen z-20 top-0 items-center justify-center",children:[(0,se.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-6 lg:px-8",children:(0,se.jsxs)("div",{className:"relative flex items-center justify-between h-16",children:[(0,se.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,se.jsxs)("button",{type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white","aria-controls":"mobile-menu","aria-expanded":"false",children:[(0,se.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,se.jsx)("svg",{onClick:function(){l(!0),s(!1)},className:c?"hidden h-6 w-6":"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),(0,se.jsx)("svg",{onClick:function(){l(!1)},className:c?"block h-6 w-6":"hidden",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,se.jsxs)("div",{className:"flex-1 flex items-center justify-center sm:items-stretch sm:justify-start",children:[t&&n.map((function(e,t){return(0,se.jsx)("h1",{className:"text-blue-600 md:hidden",children:(0,se.jsx)(Z,{to:"/",children:e.user.name})},t)})),(0,se.jsx)("div",{className:"hidden sm:block sm:ml-6",children:(0,se.jsx)("div",{className:"flex space-x-4 items-center justify-center",children:ne.map((function(e,t){return(0,se.jsx)("ul",{className:"flex",children:(0,se.jsx)(Z,{to:e.url,children:(0,se.jsx)("li",{className:e.class,children:e.list})})},e.id)}))})})]}),(0,se.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:[t&&(0,se.jsxs)("button",{onClick:function(){s(!o),l(!1)},type:"button",className:"bg-gray-800 p-1 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[(0,se.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,se.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})]}),(0,se.jsxs)("div",{className:"ml-3 relative",children:[(0,se.jsx)("div",{children:(0,se.jsx)("button",{type:"button",className:"bg-gray-800 flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",id:"user-menu-button","aria-expanded":"false","aria-haspopup":"true",children:(0,se.jsx)("span",{className:"sr-only",children:"Open user menu"})})}),(0,se.jsxs)("div",{className:o?"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none":"hidden",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",tabIndex:"-1",children:[(0,se.jsx)("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700",role:"menuitem",tabIndex:"-1",id:"user-menu-item-0",children:"Your Profile"}),(0,se.jsx)("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700",role:"menuitem",tabIndex:"-1",id:"user-menu-item-1",children:"Settings"}),(0,se.jsx)("a",{href:"#",onClick:function(){cN.signOut().then((function(){i("/login"),window.location.reload()}))},className:"block px-4 py-2 text-sm text-gray-700",role:"menuitem",tabIndex:"-1",id:"user-menu-item-2",children:"Sign out"})]}),t&&n.map((function(e,t){if(e.user.admin)return(0,se.jsx)(se.Fragment,{children:(0,se.jsx)(Z,{to:"/Admin",children:(0,se.jsx)("button",{className:"text-white",children:(0,se.jsx)("i",{class:"bi bi-person-workspace"},e.user.id)})},t)})}))]}),(0,se.jsx)("div",{className:" items-center relative px-1 rounded-md",children:(0,se.jsx)("button",{className:"text-white p-1 carting",children:(0,se.jsxs)(Z,{to:"/cart",children:[(0,se.jsx)("p",{children:(0,se.jsx)("i",{className:"bi bi-cart-dash-fill text-white text-2xl ml-4 text-center"})}),(0,se.jsx)("span",{className:"absolute bottom-3 text-red-500 font-bold text-2xl",children:e.length})]})})})]})]})}),(0,se.jsx)("div",{className:"mr-20",children:t&&n.map((function(e,t){return(0,se.jsx)("h1",{className:"text-blue-600 hidden md:block",children:(0,se.jsx)(Z,{to:"/",children:e.user.name})},t)}))}),(0,se.jsx)("div",{className:"hidden md:block",children:!t&&(0,se.jsxs)("div",{className:"mr-40",children:[(0,se.jsx)(Z,{to:"/signup",children:(0,se.jsx)("button",{className:"text-white mr-3",children:"Signup"})}),(0,se.jsx)(Z,{to:"/login",children:(0,se.jsx)("button",{className:"text-white",children:"Login"})})]})}),(0,se.jsx)("div",{className:c?"sm:hidden h-600px  bg-black w-[100%]":"hidden",id:"mobile-menu  transition-transform duration-100",children:(0,se.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[ne.map((function(e,t){return(0,se.jsx)("div",{children:(0,se.jsx)("ul",{className:" transition-transform duration-100",children:(0,se.jsx)(Z,{to:e.url,onClick:function(){return l(!1)},children:(0,se.jsx)("li",{className:e.class&&"text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium w-full ",children:e.list})})})},e.id)})),(0,se.jsx)("div",{className:"hidden md:block",children:!t&&(0,se.jsxs)("div",{className:"mr-40",children:[(0,se.jsx)(Z,{to:"/signup",children:(0,se.jsx)("button",{className:"text-white mr-3",children:"Signup"})}),(0,se.jsx)(Z,{to:"/login",children:(0,se.jsx)("button",{className:"text-white",children:"Login"})})]})})]})})]})})},mN=[{name:"Origin",description:"Designed by Good Goods, Inc."},{name:"Material",description:"Solid walnut base with rare earth magnets and powder coated steel card cover"},{name:"Dimensions",description:'6.25" x 3.55" x 1.15"'},{name:"Finish",description:"Hand sanded and finished with natural oil"},{name:"Includes",description:"Wood card tray and 3 refill packs"},{name:"Considerations",description:"Made from natural materials. Grain and color vary with each item."}];function gN(){return(0,se.jsx)("div",{className:"bg-white",children:(0,se.jsxs)("div",{className:"max-w-2xl mx-auto py-24 px-4 grid items-center grid-cols-1 gap-y-16 gap-x-8 sm:px-6 sm:py-32 lg:max-w-7xl lg:px-8 lg:grid-cols-2",children:[(0,se.jsxs)("div",{children:[(0,se.jsx)("h2",{className:"text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:"Technical Specifications"}),(0,se.jsx)("p",{className:"mt-4 text-gray-500",children:"The walnut wood card tray is precision milled to perfectly fit a stack of Focus cards. The powder coated steel divider separates active cards from new ones, or can be used to archive important task lists."}),(0,se.jsx)("dl",{className:"mt-16 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 sm:gap-y-16 lg:gap-x-8",children:mN.map((function(e){return(0,se.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,se.jsx)("dt",{className:"font-medium text-gray-900",children:e.name}),(0,se.jsx)("dd",{className:"mt-2 text-sm text-gray-500",children:e.description})]},e.name)}))})]}),(0,se.jsxs)("div",{className:"grid grid-cols-2 grid-rows-2 gap-4 sm:gap-6 lg:gap-8",children:[(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/product-feature-03-detail-01.jpg",alt:"Walnut card tray with white powder coated steel divider and 3 punchout holes.",className:"bg-gray-100 rounded-lg"}),(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/product-feature-03-detail-02.jpg",alt:"Top down view of walnut card tray with embedded magnets and card groove.",className:"bg-gray-100 rounded-lg"}),(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/product-feature-03-detail-03.jpg",alt:"Side of walnut card tray with card groove and recessed card area.",className:"bg-gray-100 rounded-lg"}),(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/product-feature-03-detail-04.jpg",alt:"Walnut card tray filled with cards and card angled in dedicated groove.",className:"bg-gray-100 rounded-lg"})]})]})})}function yN(){var e=[],t=fN(),n=t.user;t.randommingId;e.push(n);var r=le(),i=r.state.cart,a=r.dispatch,o=fN(),s=o.showAlert,u=o.producItem,c=z();return(0,se.jsx)("div",{className:"bg-white",children:(0,se.jsxs)("div",{className:"max-w-2xl min-w-2xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:max-w-7xl lg:px-8 ",children:[(0,se.jsx)("h2",{className:"text-2xl font-extrabold tracking-tight text-gray-900",children:"Customers Choice"}),(0,se.jsx)("form",{className:"mt-6 grid grid-cols-1 gap-y-10 gap-x-6 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8",children:u.map((function(t,r){return(0,se.jsx)("form",{className:"relative",children:(0,se.jsxs)("div",{className:"group relative ",children:[n&&e.map((function(e){if(e.user.admin)return(0,se.jsx)(se.Fragment,{children:(0,se.jsx)("span",{className:"absolute z-20 right-2 p-2",children:(0,se.jsx)("i",{className:"bi bi-three-dots-vertical text-lg"})})})})),(0,se.jsx)("div",{className:"relative w-full md:h-[450px] h-[350px] min-h-80 bg-gray-200 aspect-w-1 aspect-h-1 rounded-2xl group-hover:opacity-75 lg:h-150 lg:aspect-none flex items-center justify-center px-2 overflow-hidden",children:(0,se.jsx)("img",{src:t.imageSrc,alt:t.imageAlt,className:"object-cover object-center py-14 h-full absolute"})}),(0,se.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,se.jsxs)("div",{children:[(0,se.jsx)("h3",{className:"text-sm text-gray-700",children:(0,se.jsxs)("a",{href:t.href,children:[(0,se.jsx)("span",{"aria-hidden":"true",className:"absolute inset-0"}),t.name]})}),(0,se.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t.color})]}),(0,se.jsx)("div",{children:(0,se.jsx)("div",{className:"relative z-10",children:i.some((function(e){return e.id===t.id}))?(0,se.jsx)("button",{onClick:function(e){e.preventDefault(),a({type:"REMOVE_FROM_CART",payload:t},s(!0,"success","item Added"))},className:"border py-2 px-9 relative text-red-300",children:"Remove in Cart"}):(0,se.jsx)("button",{onClick:function(e){e.preventDefault(),a({type:"ADD_TO_CART",payload:t},s(!0,"success","item Added"))},className:"border py-2 px-9 relative ",children:"Add To Cart"})})}),(0,se.jsxs)("div",{children:[(0,se.jsx)("h3",{className:"text-sm text-gray-700",children:(0,se.jsxs)("a",{href:t.href,children:[(0,se.jsx)("span",{"aria-hidden":"true",className:"absolute inset-0"}),(0,se.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[" ",(0,se.jsx)("span",{})," N",t.price]}),"                      "]})}),(0,se.jsx)("p",{className:"mt-1 text-sm text-gray-500 underline absolute cursor-pointer",onClick:function(){return c("/ReviewBuy/".concat(t.id))},children:"more"})]})]})]})},t.id)}))})]})})}var kN=function(){var e=le(),t=e.state.cart,n=e.dispatch;return(0,se.jsx)("div",{className:"w-full bg-slate-100 -z-30 pb-10",children:(0,se.jsxs)("div",{className:"pt-20",children:[(0,se.jsx)("div",{children:(0,se.jsx)("div",{id:"carouselExampleSlidesOnly",class:"carousel slide","data-bs-ride":"carousel",children:(0,se.jsxs)("div",{class:"carousel-inner",children:[(0,se.jsx)("div",{class:"carousel-item active",children:(0,se.jsx)("h1",{className:"type",children:"Man & Woman Fashion"})}),(0,se.jsx)("div",{class:"carousel-item",children:(0,se.jsx)("h1",{className:"type",children:"Man & Woman Fashion"})}),(0,se.jsx)("div",{className:"carousel-item",children:(0,se.jsx)("h1",{className:"type",children:"Man & Woman Fashion"})})]})})}),(0,se.jsx)("div",{className:" w-full grid md:grid-cols-2 lg:grid-cols-3 gap-5 text-center px-[8%]",children:ie.map((function(e,r){return(0,se.jsxs)("div",{className:"w-full bg-white lg:w-full lg:h-full text-center py-8 flex justify-center items-center relative shadow shadow-slate-200",children:[(0,se.jsxs)("div",{className:"text-center ",children:[(0,se.jsx)("h1",{className:"text-lg font-bold",children:e.name}),(0,se.jsxs)("h1",{className:"my-1",children:[(0,se.jsx)("span",{})," Price $ ",e.price]}),(0,se.jsx)("img",{src:e.imageSrc,className:"object-cover object-center py-14"})]}),(0,se.jsxs)("div",{className:"flex absolute bottom-4 justify-betwee gap-20",children:[(0,se.jsx)("div",{children:t.some((function(t){return t.id===e.id}))?(0,se.jsx)("h1",{children:"Remove"}):(0,se.jsx)("button",{onClick:function(t){t.preventDefault(),n({type:"ADD_TO_CART",payload:e})},children:"Buy Now"})}),(0,se.jsx)("div",{children:(0,se.jsx)("button",{children:"See More"})})]})]},e.id)}))}),(0,se.jsxs)("div",{className:"text-center",children:[(0,se.jsx)("h1",{className:"type py-10",children:"Electronic"}),(0,se.jsx)("div",{className:"w-full grid md:grid-cols-2 lg:grid-cols-3 gap-5 text-center px-[8%]",children:ae.map((function(e,r){return(0,se.jsxs)("div",{className:"w-full bg-white lg:w-full lg:h-full text-center py-8 flex justify-center items-center relative shadow shadow-slate-200",children:[(0,se.jsxs)("div",{className:"text-center ",children:[(0,se.jsx)("h1",{className:"text-lg font-bold",children:e.name}),(0,se.jsxs)("h1",{className:"my-1",children:[(0,se.jsx)("span",{})," Price $ ",e.price]}),(0,se.jsx)("img",{src:e.imageSrc,className:"object-cover object-center py-14"})]}),(0,se.jsxs)("div",{className:"flex absolute bottom-4 justify-around gap-20",children:[(0,se.jsx)("div",{children:t.some((function(t){return t.id===e.id}))?(0,se.jsx)("h1",{children:"Remove"}):(0,se.jsx)("button",{onClick:function(t){t.preventDefault(),n({type:"ADD_TO_CART",payload:e})},children:"Buy Now"})}),(0,se.jsx)("button",{children:"See More"})]})]},e.id)}))})]})]})})},bN=function(){return(0,se.jsx)("div",{name:"about",className:"w-full my-6",children:(0,se.jsxs)("div",{className:"max-w-[1240px] mx-auto",children:[(0,se.jsxs)("div",{className:"text-center",children:[(0,se.jsx)("h2",{className:"text-[17px] md:text-5xl font-bold font-serif",children:"CLASSIC AND AFFORDABLE WEARS"}),(0,se.jsx)("p",{className:"text-lg md:text-2xl py-3 text-gray-500",children:"Experience with us is different in terms of Quality, Cost and all that is Better!"})]}),(0,se.jsxs)("div",{className:"grid md:grid-cols-3 gap-1  text-center px-10",children:[(0,se.jsxs)("div",{className:"border-blue-600 border-[1px] py-8 rounded-xl shadow-xl",children:[(0,se.jsx)("p",{className:"text-6xl font-bold text-indigo-600",children:"100K"}),(0,se.jsx)("p",{className:"text-gray-400 mt-2",children:"Transactions"})]}),(0,se.jsx)("div",{id:"carouselExampleSlidesOnly",className:"carousel slide","data-bs-ride":"carousel",children:(0,se.jsxs)("div",{className:"carousel-inner  shadow-xl",children:[(0,se.jsx)("div",{className:"carousel-item active ",children:(0,se.jsxs)("div",{className:"py-8 rounded-xl border-blue-600 border-[1px]",children:[(0,se.jsx)("p",{className:"text-6xl font-bold text-indigo-600",children:"24/7"}),(0,se.jsx)("p",{className:"text-gray-400 mt-2",children:"Delivery"})]})}),(0,se.jsx)("div",{className:"carousel-item",children:(0,se.jsxs)("div",{className:"py-8 rounded-xl shadow-xl border-blue-600 border-[1px]",children:[(0,se.jsx)("p",{className:"text-6xl font-bold text-indigo-600",children:"24/7"}),(0,se.jsx)("p",{className:"text-gray-400 mt-2",children:"Delivery"})]})})]})}),(0,se.jsxs)("div",{className:" py-8 rounded-xl shadow-xl border-blue-600 border-[1px] ",children:[(0,se.jsx)("p",{className:"text-6xl font-bold text-indigo-600",children:"100K"}),(0,se.jsx)("p",{className:"text-gray-400 mt-2",children:"Transactions"})]})]})]})})};var wN=function(){return(0,se.jsxs)("footer",{className:"bg-white dark:bg-gray-900 text-center",children:[(0,se.jsxs)("div",{className:"grid grid-cols-2 gap-8 py-8 px-6 md:grid-cols-4",children:[(0,se.jsxs)("div",{children:[(0,se.jsx)("h2",{className:"mb-6 text-sm font-semibold text-gray-500 uppercase dark:text-gray-400",children:"Company"}),(0,se.jsxs)("ul",{className:"text-gray-500 dark:text-gray-400",children:[(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:" hover:underline",children:"About"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Careers"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Brand Center"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Blog"})})]})]}),(0,se.jsxs)("div",{children:[(0,se.jsx)("h2",{className:"mb-6 text-sm font-semibold text-gray-500 uppercase dark:text-gray-400",children:"Help center"}),(0,se.jsxs)("ul",{className:"text-gray-500 dark:text-gray-400",children:[(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Discord Server"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Twitter"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Facebook"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Contact Us"})})]})]}),(0,se.jsxs)("div",{children:[(0,se.jsx)("h2",{className:"mb-6 text-sm font-semibold text-gray-500 uppercase dark:text-gray-400",children:"Legal"}),(0,se.jsxs)("ul",{className:"text-gray-500 dark:text-gray-400",children:[(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Privacy Policy"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Licensing"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Terms & Conditions"})})]})]}),(0,se.jsxs)("div",{children:[(0,se.jsx)("h2",{className:"mb-6 text-sm font-semibold text-gray-500 uppercase dark:text-gray-400",children:"Download"}),(0,se.jsxs)("ul",{className:"text-gray-500 dark:text-gray-400",children:[(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"iOS"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Android"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"Windows"})}),(0,se.jsx)("li",{className:"mb-4",children:(0,se.jsx)("a",{href:"#",className:"hover:underline",children:"MacOS"})})]})]})]}),(0,se.jsxs)("div",{className:"py-6 px-4 bg-gray-100 dark:bg-gray-700 md:flex md:items-center md:justify-between",children:[(0,se.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-300 sm:text-center",children:["\xa9 2022 ",(0,se.jsx)("a",{href:"https://flowbite.com/",children:"Flowbite\u2122"}),". All Rights Reserved."]}),(0,se.jsxs)("div",{className:"form-control w-full mx-4",children:[(0,se.jsx)("label",{className:"label",children:(0,se.jsx)("span",{className:"label-text font-extrabold text-lg",children:"Sign Up for Newsletter Enter your email address"})}),(0,se.jsxs)("div",{className:"relative my-2",children:[(0,se.jsx)("input",{type:"text",placeholder:"username@site.com",className:"form-control input-bordered w-full pr-16"}),(0,se.jsx)("button",{className:"btn btn-primary absolute top-0 right-0 rounded-l-none",children:"Subscribe"})]})]}),(0,se.jsxs)("div",{className:"flex mt-4 space-x-6 sm:justify-center md:mt-0",children:[(0,se.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[(0,se.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,se.jsx)("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})}),(0,se.jsx)("span",{className:"sr-only",children:"Facebook page"})]}),(0,se.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[(0,se.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,se.jsx)("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})}),(0,se.jsx)("span",{className:"sr-only",children:"Instagram page"})]}),(0,se.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[(0,se.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,se.jsx)("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})}),(0,se.jsx)("span",{className:"sr-only",children:"Twitter page"})]}),(0,se.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[(0,se.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,se.jsx)("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),(0,se.jsx)("span",{className:"sr-only",children:"GitHub account"})]}),(0,se.jsxs)("a",{href:"#",className:"text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[(0,se.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,se.jsx)("path",{fillRule:"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c5.51 0 10-4.48 10-10S17.51 2 12 2zm6.605 4.61a8.502 8.502 0 011.93 5.314c-.281-.054-3.101-.629-5.943-.271-.065-.141-.12-.293-.184-.445a25.416 25.416 0 00-.564-1.236c3.145-1.28 4.577-3.124 4.761-3.362zM12 3.475c2.17 0 4.154.813 5.662 2.148-.152.216-1.443 1.941-4.48 3.08-1.399-2.57-2.95-4.675-3.189-5A8.687 8.687 0 0112 3.475zm-3.633.803a53.896 53.896 0 013.167 4.935c-3.992 1.063-7.517 1.04-7.896 1.04a8.581 8.581 0 014.729-5.975zM3.453 12.01v-.26c.37.01 4.512.065 8.775-1.215.25.477.477.965.694 1.453-.109.033-.228.065-.336.098-4.404 1.42-6.747 5.303-6.942 5.629a8.522 8.522 0 01-2.19-5.705zM12 20.547a8.482 8.482 0 01-5.239-1.8c.152-.315 1.888-3.656 6.703-5.337.022-.01.033-.01.054-.022a35.318 35.318 0 011.823 6.475 8.4 8.4 0 01-3.341.684zm4.761-1.465c-.086-.52-.542-3.015-1.659-6.084 2.679-.423 5.022.271 5.314.369a8.468 8.468 0 01-3.655 5.715z",clipRule:"evenodd"})}),(0,se.jsx)("span",{className:"sr-only",children:"Dribbble account"})]})]})]})]})},xN=r.createContext(),_N=function(e){var t=e.children,n=f((0,r.useState)(!1),2),i=n[0],a=n[1];return(0,se.jsx)(xN.Provider,{value:{sidebar:i,closeSidebar:function(){a(!1)},OpenSideBar:function(){a(!i)},setsidebar:a},children:t})},IN=function(){return(0,r.useContext)(xN)};var SN=function(){var e=IN(),t=e.sidebar,n=e.closeSidebar;return(0,se.jsx)("div",{className:"absolute",children:(0,se.jsx)("div",{className:t?"absolute  transition-transform duration-100 z-40":"none top-0 ",children:(0,se.jsxs)("div",{className:"w-[250px] h-[100vh] bg-black",children:[(0,se.jsx)("div",{className:"flex item-end justify-end pt-10 pr-6",children:(0,se.jsx)("p",{onClick:n,className:"text-white mt-10 text-2xl font-bold cursor-pointer",children:"X"})}),(0,se.jsxs)("ul",{className:"pt-5 px-5",children:[(0,se.jsx)(Z,{to:"",children:(0,se.jsx)("li",{className:"text-xl text-white font-serif font-bold py-2 hover:text-orange-400  transition ease-in-out duration-500",children:"Home"})}),(0,se.jsx)(Z,{to:"",children:(0,se.jsx)("li",{className:"text-xl text-white font-serif font-bold py-2 hover:text-orange-400  transition ease-in-out duration-500",children:"Fashion"})}),(0,se.jsx)(Z,{to:"",children:(0,se.jsx)("li",{className:"text-xl text-white font-serif font-bold py-2 hover:text-orange-400  transition ease-in-out duration-500",children:"Dresses"})}),(0,se.jsx)(Z,{to:"",children:(0,se.jsx)("li",{className:"text-xl text-white font-serif font-bold py-2 hover:text-orange-400  transition ease-in-out duration-500",children:"Snikers"})}),(0,se.jsx)(Z,{to:"",children:(0,se.jsx)("li",{className:"text-xl text-white font-serif font-bold py-2 hover:text-orange-400  transition ease-in-out duration-500",children:"Shoes"})})]})]})})})},EN=function(){return(0,se.jsxs)("div",{name:"support",className:"w-full mt-24",children:[(0,se.jsx)("div",{className:"w-full h-[700px] bg-gray-900/90 absolute",children:(0,se.jsx)("img",{className:"w-full h-full object-cover mix-blend-overlay",src:"/pic/Basic_cloth-removebg-preview.png",alt:"/"})}),(0,se.jsxs)("div",{className:"max-w-[1240px] mx-auto text-white relative",children:[(0,se.jsxs)("div",{className:"px-4 py-12",children:[(0,se.jsx)("h2",{className:"text-3xl pt-8 text-slate-300 uppercase text-center",children:"Support"}),(0,se.jsx)("h3",{className:"text-3xl md:text-5xl font-bold py-6 text-center",children:"Finding the right team"}),(0,se.jsx)("p",{className:"py-4 md:text-3xl text-slate-300",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. In repudiandae veritatis ratione error tenetur, voluptates architecto possimus ad! Omnis minima ea quidem quisquam unde beatae, minus illo et cum vel?"})]}),(0,se.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 relative gap-x-8 gap-y-16 px-4 pt-12 sm:pt-20 text-black",children:[(0,se.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl",children:[(0,se.jsxs)("div",{className:"p-8",children:[(0,se.jsx)("i",{class:"bi bi-whatsapp w-16 p-4 bg-indigo-600 text-white rounded-lg mt-[-4rem]"}),(0,se.jsx)("h3",{className:"font-bold text-2xl my-6",children:"Sales"}),(0,se.jsx)("p",{className:"text-gray-600 text-xl",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi provident iure placeat blanditiis ea sint earum hic iste quibusdam exercitationem."})]}),(0,se.jsx)("div",{className:"bg-slate-100 pl-8 py-4",children:(0,se.jsxs)("p",{className:"flex items-center text-indigo-600",children:["Contact Us ",(0,se.jsx)("i",{class:"bi bi-arrow-right ml-2"})]})})]}),(0,se.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl",children:[(0,se.jsxs)("div",{className:"p-8",children:[(0,se.jsx)("i",{class:"bi bi-telephone w-16 p-4 bg-indigo-600 text-white rounded-lg mt-[-4rem]"}),(0,se.jsx)("h3",{className:"font-bold text-2xl my-6",children:"Technical Support"}),(0,se.jsx)("p",{className:"text-gray-600 text-xl",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi provident iure placeat blanditiis ea sint earum hic iste quibusdam exercitationem."})]}),(0,se.jsx)("div",{className:"bg-slate-100 pl-8 py-4",children:(0,se.jsxs)("p",{className:"flex items-center text-indigo-600",children:["Contact Us ",(0,se.jsx)("i",{class:"bi bi-arrow-right ml-2"})]})})]}),(0,se.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl",children:[(0,se.jsxs)("div",{className:"p-8",children:[(0,se.jsx)("i",{class:"bi bi-bag-check w-16 p-4 bg-indigo-600 text-white rounded-lg mt-[-4rem]"}),(0,se.jsx)("h3",{className:"font-bold text-2xl my-6",children:"Media Inquiries"}),(0,se.jsx)("p",{className:"text-gray-600 text-xl",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi provident iure placeat blanditiis ea sint earum hic iste quibusdam exercitationem."})]}),(0,se.jsx)("div",{className:"bg-slate-100 pl-8 py-4",children:(0,se.jsxs)("p",{className:"flex items-center text-indigo-600",children:["Contact Us ",(0,se.jsx)("i",{class:"bi bi-arrow-right ml-2"})]})})]})]})]})]})};var TN=function(){return(0,se.jsx)("div",{children:(0,se.jsx)("div",{class:"relative bg-white overflow-hidden",children:(0,se.jsx)("div",{class:"pt-16 pb-80 sm:pt-24 sm:pb-40 lg:pt-40 lg:pb-48",children:(0,se.jsxs)("div",{class:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 sm:static",children:[(0,se.jsxs)("div",{class:"sm:max-w-lg",children:[(0,se.jsx)("h1",{class:"text-4xl font font-extrabold tracking-tight text-gray-900 sm:text-6xl",children:"Summer styles are finally here"}),(0,se.jsx)("p",{class:"mt-4 text-xl text-gray-500",children:"This year, our new summer collection will shelter you from the harsh elements of a world that doesn't care if you live or die."})]}),(0,se.jsx)("div",{children:(0,se.jsxs)("div",{class:"mt-10",children:[(0,se.jsx)("div",{"aria-hidden":"true",class:"pointer-events-none lg:absolute lg:inset-y-0 lg:max-w-7xl lg:mx-auto lg:w-full",children:(0,se.jsx)("div",{class:"absolute transform sm:left-1/2 sm:top-0 sm:translate-x-8 lg:left-1/2 lg:top-1/2 lg:-translate-y-1/2 lg:translate-x-8",children:(0,se.jsxs)("div",{class:"flex items-center space-x-6 lg:space-x-8",children:[(0,se.jsxs)("div",{class:"flex-shrink-0 grid grid-cols-1 gap-y-6 lg:gap-y-8",children:[(0,se.jsx)("div",{class:"w-44 h-64 rounded-lg overflow-hidden sm:opacity-0 lg:opacity-100",children:(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/home-page-03-hero-image-tile-01.jpg",alt:"",class:"w-full h-full object-center object-cover"})}),(0,se.jsx)("div",{class:"w-44 h-64 rounded-lg overflow-hidden",children:(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/home-page-03-hero-image-tile-02.jpg",alt:"",class:"w-full h-full object-center object-cover"})})]}),(0,se.jsxs)("div",{class:"flex-shrink-0 grid grid-cols-1 gap-y-6 lg:gap-y-8",children:[(0,se.jsx)("div",{class:"w-44 h-64 rounded-lg overflow-hidden",children:(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/home-page-03-hero-image-tile-03.jpg",alt:"",class:"w-full h-full object-center object-cover"})}),(0,se.jsx)("div",{class:"w-44 h-64 rounded-lg overflow-hidden",children:(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/home-page-03-hero-image-tile-04.jpg",alt:"",class:"w-full h-full object-center object-cover"})}),(0,se.jsx)("div",{class:"w-44 h-64 rounded-lg overflow-hidden",children:(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/home-page-03-hero-image-tile-05.jpg",alt:"",class:"w-full h-full object-center object-cover"})})]}),(0,se.jsxs)("div",{class:"flex-shrink-0 grid grid-cols-1 gap-y-6 lg:gap-y-8",children:[(0,se.jsx)("div",{class:"w-44 h-64 rounded-lg overflow-hidden",children:(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/home-page-03-hero-image-tile-06.jpg",alt:"",class:"w-full h-full object-center object-cover"})}),(0,se.jsx)("div",{class:"w-44 h-64 rounded-lg overflow-hidden",children:(0,se.jsx)("img",{src:"https://tailwindui.com/img/ecommerce-images/home-page-03-hero-image-tile-07.jpg",alt:"",class:"w-full h-full object-center object-cover"})})]})]})})}),(0,se.jsx)("a",{href:"#",class:"inline-block text-center bg-indigo-600 border border-transparent rounded-md py-3 px-8 font-medium text-white hover:bg-indigo-700",children:"Shop Collection"})]})})]})})})})};var NN=function(){var e=fN(),t=e.producItem,n=e.setproducItem,i=["All"].concat(te(new Set(t.map((function(e){return e.category}))))),a=f((0,r.useState)(i),2),o=(a[0],a[1],function(e){if("All"!==e){var t=re.filter((function(t){return t.category===e}));n(t)}else n(re)});return(0,se.jsx)("div",{children:(0,se.jsxs)("div",{className:"dropdown",children:[(0,se.jsx)("button",{className:"md:flex py-2 px-6 mr-3 rounded-lg bg-black text-white dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Category"}),(0,se.jsxs)("ul",{className:"dropdown-menu px-2",children:[(0,se.jsx)(Z,{to:"/list",children:(0,se.jsx)("button",{onClick:function(){return o("All")},children:"All"})})," ",(0,se.jsx)("br",{}),(0,se.jsx)(Z,{to:"/list",children:(0,se.jsx)("button",{onClick:function(){return o("men")},children:"Men"})}),(0,se.jsx)("br",{}),(0,se.jsx)(Z,{to:"/list",children:(0,se.jsx)("button",{onClick:function(){return o("women")},children:"women"})})]})]})})},CN=r.createContext(),AN=function(e){var t=e.children,n=f((0,r.useState)(),2),i=n[0],a=n[1];return(0,se.jsx)(CN.Provider,{value:{resultSeach:i,setresultSeach:a},children:t})},jN=function(){return(0,r.useContext)(CN)};var DN=function(){var e=fN().producItem,t=jN(),n=(t.resultSeach,t.setresultSeach),i=f((0,r.useState)(),2),a=i[0],o=i[1],s=z();return(0,se.jsx)("div",{children:(0,se.jsxs)("div",{className:"input-group flex-1 w-full",children:[(0,se.jsx)("input",{type:"text",placeholder:"Search Items By Name Category",class:"form-control input-bordered w-full pr-16",value:a,onChange:function(e){return o(e.target.value)}}),(0,se.jsx)("button",{onClick:function(){var t=e.filter((function(e){return e.category.toLowerCase()===a.toLowerCase()}));n(t),console.log(t),console.log(a),s("/list")},className:"btn btn-outline-secondary",type:"button",id:"button-addon2",children:(0,se.jsx)("i",{className:"bi bi-search"})})]})})};var RN=function(){var e=IN().OpenSideBar,t=f((0,r.useState)(),2),n=(t[0],t[1]);return(0,r.useEffect)((function(){n([re].concat(te(re)))}),[]),(0,se.jsxs)("div",{children:[(0,se.jsx)(SN,{}),(0,se.jsx)("div",{className:"w-full bg-[#284bdf] overflow-hidden h-[650px] testso",children:(0,se.jsxs)("div",{className:"w-full h-[full] mt-10",children:[(0,se.jsx)("div",{className:"absolute h=[1000px] top=[50%] left-[50%] transform translate-x-[-50%]"}),(0,se.jsx)("div",{className:"w-full py-6",children:(0,se.jsx)("h1",{className:"text-center  text-lg md:2xl text-white  py-2 capitalize",children:"when quality wears matter..."})}),(0,se.jsxs)("div",{className:"mx-3",children:[(0,se.jsxs)("div",{className:"md:flex justify-center items-center gap-3  border-gray-300 flex-wrap",children:[(0,se.jsxs)("div",{className:"flex justify-between items-center",children:[(0,se.jsx)(NN,{}),(0,se.jsx)("div",{className:"text-white flex gap-2 font-bold font-serif  text-lg",children:(0,se.jsxs)("p",{className:"border-xl cursor-pointer mr-2",children:[(0,se.jsx)("i",{className:"bi bi-cart3 mr-1 "}),"Cart"]})})]}),(0,se.jsx)("div",{className:"md:flex justify-between",children:(0,se.jsxs)("div",{className:"flex items-center justify-center",children:[(0,se.jsx)("div",{className:"md:flex item-start bar",children:(0,se.jsxs)("div",{onClick:e,className:"p-3 pt-6",children:[(0,se.jsx)("span",{className:"h-0 w-6 bg-white py-1 px-4 flex rounded-sm mt-1"}),(0,se.jsx)("span",{className:"h-0 w-6 bg-white py-1 px-4 flex rounded-sm mt-1"}),(0,se.jsx)("span",{className:"h-0 w-6 bg-white py-1 px-4 flex rounded-sm mt-1"})]})}),(0,se.jsx)(DN,{})]})})]}),(0,se.jsxs)("div",{className:"grid md:grid-cols-2 max-w-[1240px] m-auto",children:[(0,se.jsxs)("div",{className:"mt-10 py-2",children:["                                              ",(0,se.jsxs)("h1",{className:"text-7xl sm:text-left text-center md:text-8xl text-white drop-shadow-300 shadown-black font-extrabold mb-10",children:[" Luxirious Cloth ",(0,se.jsx)("h1",{className:"mt-10 text-lg border-t border-b border-gray-400 text-center md:tracking-[1rem] font-serif font-thin tracking-[6px]",children:"Home of luxury"})]}),(0,se.jsx)("div",{className:"carousel-item",children:(0,se.jsxs)("h1",{className:"font-bold  text-3xlsearch sm:text-left text-center md:text-4xl lg:text-6xl xl:text-6xl text-white hover:tracking-[5rem]",children:["GET STARTED ",(0,se.jsx)("h1",{className:"mt-10 py-6 w-24 my-8",children:"YOUR FAVORITE SHOPPING"})]})}),(0,se.jsx)("div",{className:"text-center sm:text-left mt-6",children:(0,se.jsx)(Z,{to:"/itemize",children:(0,se.jsx)("button",{className:"black px-9 py-3  font-bold rounded bg-black text-white sticky hover:shadow-2xl shadow-gray-900",children:"Get Started"})})})]}),(0,se.jsx)("div",{className:"flex justify-center items-center",children:(0,se.jsx)("div",{id:"carouselExampleSlidesOnly",className:"carousel slide","data-bs-ride":"carousel",children:(0,se.jsxs)("div",{className:"carousel-inner w-full",children:[(0,se.jsxs)("div",{className:"carousel-item active",children:[(0,se.jsx)("img",{src:"/pic/tshirt-img-removebg-preview.png",alt:""})," "]}),(0,se.jsx)("div",{className:"carousel-item",children:(0,se.jsx)("img",{src:"/pic/dress-shirt-img-removebg-preview.png",alt:""})}),(0,se.jsxs)("div",{className:"carousel-item",children:[(0,se.jsx)("img",{src:"/pic/tshirt-img-removebg-preview.png",alt:""})," "]})]})})})]})]})]})}),(0,se.jsx)(bN,{}),(0,se.jsx)(EN,{}),(0,se.jsx)(kN,{}),(0,se.jsx)(TN,{}),(0,se.jsx)("div",{className:"absolute w-screen",children:(0,se.jsx)("div",{className:"modal fade w-screen",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:(0,se.jsx)("div",{className:"modal-dialog w-full",children:(0,se.jsxs)("div",{className:"modal-content w-full",children:[(0,se.jsxs)("div",{className:"modal-header w-full",children:[(0,se.jsx)("h5",{className:"modal-title",id:"staticBackdropLabel",children:"Cool Items For you"}),(0,se.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,se.jsx)("div",{className:"modal-body text-black",children:(0,se.jsxs)("div",{className:"input-group",children:[(0,se.jsx)("input",{className:"w-[270px] form-control md:w-[350px]",type:"text form-control",placeholder:"Search Products, Brand and Categories","aria-label":"placeholder='Search Products, Brand and Categories' ","aria-describedby":"button-addon2"}),(0,se.jsx)("button",{className:"btn btn-outline-secondary",type:"button",id:"button-addon2",children:(0,se.jsx)("i",{className:"bi bi-search text-white bg-white"})})]})}),(0,se.jsxs)("div",{className:"modal-footer",children:[(0,se.jsx)("button",{type:"button",className:"btn btn-secondary text-black","data-bs-dismiss":"modal",children:"Close"}),(0,se.jsx)("button",{type:"button",className:"btn btn-primary text-black",children:"Search"})]})]})})})})]})};var PN=function(){return(0,se.jsx)("div",{})};var ON=function(){var e=f((0,r.useState)(!1),2),t=e[0],n=e[1];return(0,se.jsxs)("div",{className:"mt-20 h-full transition duration-900 ",children:[(0,se.jsx)("aside",{className:t?"w-64 absolute bg-gray-100":"hidden","aria-label":"Sidebar",children:(0,se.jsx)("div",{className:"overflow-y-auto py-4 px-3 rounded bg-gray-100",children:(0,se.jsxs)("ul",{className:"space-y-2",children:[(0,se.jsx)("li",{children:(0,se.jsxs)("a",{href:"#",className:"flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,se.jsxs)("svg",{"aria-hidden":"true",className:"w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,se.jsx)("path",{d:"M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"}),(0,se.jsx)("path",{d:"M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"})]}),(0,se.jsx)("span",{className:"ml-3",children:"Dashboard"})]})}),(0,se.jsx)(Z,{to:"/AdminPost",children:(0,se.jsx)("li",{children:(0,se.jsxs)("a",{href:"#",className:"flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,se.jsx)("svg",{"aria-hidden":"true",className:"flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,se.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),(0,se.jsx)("span",{className:"flex-1 ml-3 whitespace-nowrap",children:"Upload Items"}),(0,se.jsx)("span",{className:"inline-flex justify-center items-center px-2 ml-3 text-sm font-medium text-gray-800 bg-gray-200 rounded-full dark:bg-gray-700 dark:text-gray-300",children:"Pro"})]})})}),(0,se.jsx)("li",{children:(0,se.jsxs)("a",{href:"#",className:"flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,se.jsxs)("svg",{"aria-hidden":"true",className:"flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,se.jsx)("path",{d:"M8.707 7.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l2-2a1 1 0 00-1.414-1.414L11 7.586V3a1 1 0 10-2 0v4.586l-.293-.293z"}),(0,se.jsx)("path",{d:"M3 5a2 2 0 012-2h1a1 1 0 010 2H5v7h2l1 2h4l1-2h2V5h-1a1 1 0 110-2h1a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5z"})]}),(0,se.jsx)("span",{className:"flex-1 ml-3 whitespace-nowrap",children:"Inbox"}),(0,se.jsx)("span",{className:"inline-flex justify-center items-center p-3 ml-3 w-3 h-3 text-sm font-medium text-blue-600 bg-blue-200 rounded-full dark:bg-blue-900 dark:text-blue-200",children:"3"})]})}),(0,se.jsxs)(Z,{to:"/userlist",children:[" ",(0,se.jsx)("li",{children:(0,se.jsxs)("a",{href:"#",className:"flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,se.jsx)("svg",{"aria-hidden":"true",className:"flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,se.jsx)("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})}),(0,se.jsx)("span",{className:"flex-1 ml-3 whitespace-nowrap",children:"Users"})]})})]}),(0,se.jsx)("li",{children:(0,se.jsxs)("a",{href:"#",className:"flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,se.jsx)("svg",{"aria-hidden":"true",className:"flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,se.jsx)("path",{"fill-rule":"evenodd",d:"M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z","clip-rule":"evenodd"})}),(0,se.jsx)("span",{className:"flex-1 ml-3 whitespace-nowrap",children:"Products"})]})}),(0,se.jsx)("li",{children:(0,se.jsxs)("a",{href:"#",className:"flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,se.jsx)("svg",{"aria-hidden":"true",className:"flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,se.jsx)("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})}),(0,se.jsx)("span",{className:"flex-1 ml-3 whitespace-nowrap",children:"Sign In"})]})}),(0,se.jsx)("li",{children:(0,se.jsxs)("a",{href:"#",className:"flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,se.jsx)("svg",{"aria-hidden":"true",className:"flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,se.jsx)("path",{"fill-rule":"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 9v-1h5v2H5a1 1 0 01-1-1zm7 1h4a1 1 0 001-1v-1h-5v2zm0-4h5V8h-5v2zM9 8H4v2h5V8z","clip-rule":"evenodd"})}),(0,se.jsx)("span",{className:"flex-1 ml-3 whitespace-nowrap",children:"Sign Up"})]})})]})})}),(0,se.jsx)("div",{className:"ml-4 absolute",children:(0,se.jsx)("svg",{onClick:function(){n(!t)},className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]})};var LN=function(){var e=fN(),t=e.Product,n=e.setProduct,i=f((0,r.useState)(),2),a=i[0],o=i[1],u=f((0,r.useState)(),2),c=u[0],l=u[1],h=f((0,r.useState)(),2),d=(h[0],h[1],f((0,r.useState)(null),2)),p=d[0],v=d[1],m=f((0,r.useState)(),2),g=m[0],y=m[1],k=f((0,r.useState)(),2),b=(k[0],k[1],f((0,r.useState)(),2)),w=b[0],x=b[1],_=(fN().showAlert,f((0,r.useState)(),2)),I=(_[0],_[1],Math.floor(2e3*Math.random())),S=$S(uN,"PRODUCT-ITEMS");return(0,r.useEffect)((function(){var e=function(){var e=pe(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bT(S);case 2:t=e.sent,n(t.docs.map((function(e){return s(s({},e.data()),{},{id:e.id})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,se.jsxs)("div",{className:"mt-20 w-full h-screen",children:[(0,se.jsxs)("form",{action:"",className:"flex flex-column md:px-32",children:[(0,se.jsx)("label",{className:"mx-6 font-extrabold font-5xl",children:"Product Name"}),(0,se.jsx)("input",{className:"py-2 mt-4 mx-6 border",type:"text",placeholder:"Product Name",value:a,onChange:function(e){return o(e.target.value)}}),(0,se.jsx)("label",{className:"mx-6 font-extrabold font-5xl",children:"Product Price"}),(0,se.jsx)("input",{className:"py-2 mt-4 mx-6 border",type:"text",placeholder:"Product price",value:c,onChange:function(e){return l(e.target.value)}}),(0,se.jsx)("label",{className:"mx-6 font-extrabold font-5xl",children:"Product Size"}),(0,se.jsx)("input",{className:"py-2 mt-4 mx-6 border",type:"text",placeholder:"product sixe",value:p,onChange:function(e){return v(e.target.value)}}),(0,se.jsx)("label",{className:"mx-6 font-extrabold font-5xl",children:"Product Img"}),(0,se.jsx)("input",{className:"py-2 mt-4 mx-6 border",type:"file",accept:"image/*",onChange:function(e){return y(e.target.files[0])}}),(0,se.jsx)("p",{className:"text-center text-2xl",children:"Category"}),(0,se.jsxs)("select",{onChange:function(e){return x(e.target.value)},value:w,className:"border",name:"",id:"",children:[(0,se.jsx)("option",{disabled:!0,value:"",children:"Pick"}),(0,se.jsx)("option",{value:"shoe",children:"Shoe"}),(0,se.jsx)("option",{value:"cloth",children:"cloth"}),(0,se.jsx)("option",{value:"ladies Wear",children:"ladies Wear"}),(0,se.jsx)("option",{value:"Men Wear",children:"Men Wear"})]}),(0,se.jsx)("button",{onClick:function(e){var t,n;e.preventDefault(),g||alert("Please choose a file first!"),dh((t=sN,n="Images/".concat(g.name+I),sh(t=tt(t),n)),g).then((function(e){alert("uploaded"),function(e){return ih(e=tt(e))}(e.ref).then((function(e){IT(S,{ProductCategory:w,ProductName:a,ProductPrice:c,ProductSize:p,ProductImg:e})("Aliamdullai")}))}))},className:"btn btn primary",children:"Add"})]}),t.map((function(e){return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)("h1",{children:["Name ",e.ProductName]}),(0,se.jsx)("h1",{children:e.ProductCategory}),(0,se.jsxs)("h1",{children:[e.ProductPrice," me"]}),(0,se.jsxs)("h1",{children:[e.ProductColor," me"]}),(0,se.jsx)("img",{src:e.ProductImg,alt:e.ProductName})]})}))]})};var MN=function(){var e=z(),t=f((0,r.useState)(),2),n=t[0],i=t[1],a=f((0,r.useState)(),2),o=a[0],s=a[1],u=f((0,r.useState)(),2),c=u[0],l=u[1],h=f((0,r.useState)("Sign in"),2),d=h[0],p=h[1];return(0,se.jsxs)("div",{className:"grid md:grid-cols-2 bg-slate-100 mt-10",children:[(0,se.jsx)("div",{children:(0,se.jsx)("div",{className:"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,se.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,se.jsxs)("div",{children:[(0,se.jsx)("img",{className:"mx-auto h-12 w-auto",src:"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg",alt:"Workflow"}),(0,se.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})]}),(0,se.jsxs)("form",{className:"mt-8 space-y-6",action:"#",method:"POST",children:[(0,se.jsx)("input",{type:"hidden",name:"remember",value:"true"}),(0,se.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,se.jsxs)("div",{className:"my-5",children:[(0,se.jsx)("label",{for:"email-address",className:"sr-only",children:"Email address"}),(0,se.jsx)("input",{value:n,onChange:function(e){return i(e.target.value)},name:"email",type:"email",autocomplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]}),(0,se.jsxs)("div",{children:[(0,se.jsx)("label",{for:"password",className:"sr-only",children:"Password"}),(0,se.jsx)("input",{value:o,onChange:function(e){return s(e.target.value)},type:"password",autocomplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),(0,se.jsxs)("div",{className:"flex items-center justify-between",children:[(0,se.jsxs)("div",{className:"flex items-center",children:[(0,se.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,se.jsx)("label",{for:"remember-me",className:"ml-2 block text-sm text-gray-900",children:" Remember me "})]}),(0,se.jsx)("div",{className:"text-sm",children:(0,se.jsx)("a",{href:"#",className:"font-medium text-indigo-600 hover:text-indigo-500",children:" Forgot your password? "})})]}),(0,se.jsx)("div",{children:(0,se.jsxs)("button",{onClick:function(t){p("Loading..."),t.preventDefault(),cN.signInWithEmailAndPassword(n,o).then((function(){i(""),s(""),l(""),e("/"),p("Sign in")})).catch((function(e){return l(e.message)}),p("Sign in"))},type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,se.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,se.jsx)("svg",{className:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,se.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),d]})}),(0,se.jsxs)("h1",{className:"mt-10",children:["Don't Have An Acoount? Register ",(0,se.jsx)(Z,{className:"text-red-400",to:"/signup",children:"here"})," "]}),(0,se.jsx)("h1",{className:"text-center text-red-500",children:c})]})]})})}),(0,se.jsx)("div",{className:"flex justify-center items-center",children:(0,se.jsx)("div",{className:"flex justify-center items-center",children:(0,se.jsx)("div",{id:"carouselExampleSlidesOnly",className:"carousel slide","data-bs-ride":"carousel",children:(0,se.jsxs)("div",{className:"carousel-inner w-full",children:[(0,se.jsxs)("div",{className:"carousel-item active",children:[(0,se.jsx)("img",{src:"/pic/tshirt-img-removebg-preview.png",alt:""})," "]}),(0,se.jsx)("div",{className:"carousel-item",children:(0,se.jsx)("img",{src:"/pic/dress-shirt-img-removebg-preview.png",alt:""})}),(0,se.jsxs)("div",{className:"carousel-item",children:[(0,se.jsx)("img",{src:"/pic/tshirt-img-removebg-preview.png",alt:""})," "]})]})})})})]})};var FN=function(){var e=f((0,r.useState)(),2),t=e[0],n=e[1],i=f((0,r.useState)(),2),a=i[0],o=i[1],s=f((0,r.useState)(),2),u=s[0],c=s[1],l=f((0,r.useState)(),2),h=l[0],d=l[1],p=f((0,r.useState)(),2),v=p[0],m=p[1],g=f((0,r.useState)(!1),1)[0],y=f((0,r.useState)(),2),k=y[0],b=y[1],w=f((0,r.useState)(!0),2),x=w[0],_=w[1],I=f((0,r.useState)([]),2),S=I[0],E=(I[1],f((0,r.useState)(!1),2)),T=E[0],N=E[1];return(0,se.jsxs)("div",{className:"m-20",children:[(0,se.jsxs)("form",{className:"md:px-[20%]",children:[(0,se.jsx)("h1",{className:"text-5xl text-center font-bold mb-6",children:"SignUp"}),(0,se.jsxs)("div",{className:"relative z-0 mb-6 w-full group",children:[(0,se.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)},type:"email",name:"floating_email",id:"floating_email",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent  border-b border-gray-900 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""}),(0,se.jsx)("label",{htmlFor:"floating_email",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Email address"})]}),(0,se.jsxs)("div",{className:"relative z-0 mb-6 w-full group",children:[(0,se.jsx)("input",{value:a,onChange:function(e){return o(e.target.value)},type:"password",name:"floating_password",id:"floating_password",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""}),(0,se.jsx)("label",{htmlFor:"floating_password",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Password"})]}),(0,se.jsxs)("div",{className:"relative z-0 mb-6 w-full group",children:[(0,se.jsx)("input",{value:v,onChange:function(e){return m(e.target.value)},type:"password",name:"repeat_password",id:"floating_repeat_password",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""}),(0,se.jsx)("label",{htmlFor:"floating_repeat_password",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Confirm password"})]}),(0,se.jsxs)("div",{className:"grid md:grid-cols-2 md:gap-6",children:[(0,se.jsxs)("div",{className:"relative z-0 mb-6 w-full group",children:[(0,se.jsx)("input",{value:u,onChange:function(e){return c(e.target.value)},type:"text",name:"floating_first_name",id:"floating_first_name",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""}),(0,se.jsx)("label",{htmlFor:"floating_first_name",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"First name"})]}),(0,se.jsxs)("div",{className:"relative z-0 mb-6 w-full group",children:[(0,se.jsx)("input",{value:h,onChange:function(e){return d(e.target.value)},type:"text",name:"floating_last_name",id:"floating_last_name",className:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",placeholder:" ",required:""}),(0,se.jsx)("label",{htmlFor:"floating_last_name",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Last name"})]})]}),x?(0,se.jsx)("button",{onClick:function(e){_(!1),e.preventDefault(),b(""),function(){var e=!0;return""!==a&&""!==v&&a!==v&&(e=!1,b("Passwords does not match")),e}()&&cN.createUserWithEmailAndPassword(t,a).then((function(e){uN.collection("UserData").doc(e.user.uid).set({email:t,password:a,name:u,lastName:h,admin:g,cart:S}).then((function(){N(!0),o(""),n(""),c(""),d(""),b("Login success")})).catch((function(e){return b(e.message)}),_(!0))})).catch((function(e){return b(e.message)}))},type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Submit"}):(0,se.jsxs)("div",{children:["Loading ",(0,se.jsx)("div",{className:"spinner-border",role:"status",children:(0,se.jsx)("span",{className:"sr-only",children:"Loading..."})})]}),(0,se.jsx)("h1",{className:"text-red-700",children:k}),(0,se.jsxs)("h1",{className:"mt-10",children:["Already Have An Acoount? Login ",(0,se.jsx)(Z,{to:"/",children:"here"})," "]})]}),T&&(0,se.jsxs)("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,se.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,se.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,se.jsx)("div",{className:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",children:(0,se.jsxs)("div",{className:"relative bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full",children:[(0,se.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,se.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,se.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"}),(0,se.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,se.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Welcome"}),(0,se.jsx)("div",{className:"mt-2",children:(0,se.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Account Created Successfully"})})]})]})}),(0,se.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,se.jsx)(Z,{to:"/login",children:(0,se.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Go to Home-Page"})}),(0,se.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})})})]})]})};var UN=function(){return(0,se.jsxs)("div",{className:"mt-20",children:[(0,se.jsx)("h1",{className:"text-2xl",children:"User Dashboard"}),(0,se.jsx)("h1",{children:"Item You Brought"}),(0,se.jsx)("div",{class:"overflow-x-auto relative",children:(0,se.jsxs)("table",{class:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,se.jsx)("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,se.jsxs)("tr",{children:[(0,se.jsx)("th",{scope:"col",class:"py-3 px-6",children:"Product name"}),(0,se.jsx)("th",{scope:"col",class:"py-3 px-6",children:"Color"}),(0,se.jsx)("th",{scope:"col",class:"py-3 px-6",children:"Category"}),(0,se.jsx)("th",{scope:"col",class:"py-3 px-6",children:"Price"})]})}),(0,se.jsxs)("tbody",{children:[(0,se.jsxs)("tr",{class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[(0,se.jsx)("th",{scope:"row",class:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:'Apple MacBook Pro 17"'}),(0,se.jsx)("td",{class:"py-4 px-6",children:"Sliver"}),(0,se.jsx)("td",{class:"py-4 px-6",children:"Laptop"}),(0,se.jsx)("td",{class:"py-4 px-6",children:"$2999"})]}),(0,se.jsxs)("tr",{class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[(0,se.jsx)("th",{scope:"row",class:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:"Microsoft Surface Pro"}),(0,se.jsx)("td",{class:"py-4 px-6",children:"White"}),(0,se.jsx)("td",{class:"py-4 px-6",children:"Laptop PC"}),(0,se.jsx)("td",{class:"py-4 px-6",children:"$1999"})]}),(0,se.jsxs)("tr",{class:"bg-white dark:bg-gray-800",children:[(0,se.jsx)("th",{scope:"row",class:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:"Magic Mouse 2"}),(0,se.jsx)("td",{class:"py-4 px-6",children:"Black"}),(0,se.jsx)("td",{class:"py-4 px-6",children:"Accessories"}),(0,se.jsx)("td",{class:"py-4 px-6",children:"$99"})]})]})]})})]})};var VN=function(e){var t=e.type,n=e.msg,i=e.removeAlert;return(0,r.useEffect)((function(){var e=setTimeout((function(){i()}),4e3);return function(){return clearTimeout(e)}}),[i]),(0,se.jsx)("div",{className:"w-screen",children:(0,se.jsx)("div",{className:"flex items-center justify-center w-screen fixed z-40",children:(0,se.jsxs)("div",{className:"alert alert-".concat(t," absolute top-14"),children:[(0,se.jsx)("strong",{}),n]})})})};var BN=function(){var e=fN().posts;return(0,se.jsx)("div",{children:(0,se.jsx)("div",{class:"bg-white",children:(0,se.jsxs)("div",{class:"max-w-2xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:max-w-7xl lg:px-8",children:[(0,se.jsx)("h2",{class:"sr-only",children:"Products"}),(0,se.jsx)("div",{class:"grid grid-cols-1 gap-y-10 sm:grid-cols-2 gap-x-6 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8",children:e<1?(0,se.jsxs)(se.Fragment,{children:["Loading...",(0,se.jsx)("div",{class:"spinner-border",role:"status",children:(0,se.jsx)("span",{class:"sr-only",children:"Loading..."})})]}):e.map((function(e){return(0,se.jsxs)("a",{href:"#",class:"group",children:[(0,se.jsx)("div",{className:"relative w-full md:h-[450px] h-[350px] min-h-80 bg-gray-200 aspect-w-1 aspect-h-1 rounded-2xl group-hover:opacity-75 lg:h-150 lg:aspect-none flex items-center justify-center px-2",children:(0,se.jsx)("img",{src:e.data.ProductImg,alt:"Tall slender porcelain bottle with natural clay textured body and cork stopper.",className:" object-center object-cover group-hover:opacity-75"})}),(0,se.jsx)("h3",{class:"mt-4 text-sm text-gray-700",children:e.data.ProductCategory}),(0,se.jsxs)("p",{class:"mt-1 text-lg font-medium text-gray-900",children:["$",e.data.ProductPrice]})]})}))})]})})})};var zN=function(){var e=fN().User;return(0,se.jsx)("div",{children:(0,se.jsxs)("div",{class:"mx-auto p-4",children:[(0,se.jsx)("h1",{class:"text-2xl mb-8",children:"Users"}),(0,se.jsx)("div",{class:"flex flex-col","data-aos":"fade-up",children:(0,se.jsx)("div",{class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,se.jsx)("div",{class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,se.jsx)("div",{class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,se.jsxs)("table",{class:"min-w-full divide-y divide-gray-200",children:[(0,se.jsx)("thead",{children:(0,se.jsxs)("tr",{children:[(0,se.jsx)("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"no"}),(0,se.jsx)("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,se.jsx)("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),(0,se.jsx)("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"Password"}),(0,se.jsx)("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),(0,se.jsx)("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"Edit"})]})}),(0,se.jsx)("tbody",{class:"bg-white divide-y divide-gray-200",children:e<1?(0,se.jsxs)(se.Fragment,{children:["Loading...",(0,se.jsx)("div",{class:"spinner-border",role:"status",children:(0,se.jsx)("span",{class:"sr-only",children:"Loading..."})})]}):e.map((function(e){return(0,se.jsxs)("tr",{"data-aos":"fade-up",children:[(0,se.jsx)("td",{class:"px-6 py-4 whitespace-no-wrap",children:(0,se.jsxs)("div",{class:"flex items-center",children:[(0,se.jsx)("div",{class:"flex-shrink-0 h-10 w-10",children:(0,se.jsx)("img",{class:"h-10 w-10 rounded-full",src:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=4&w=256&h=256&q=60",alt:""})}),(0,se.jsxs)("div",{class:"ml-4",children:[(0,se.jsx)("div",{class:"text-sm leading-5 font-medium text-gray-900"}),(0,se.jsx)("div",{class:"text-sm leading-5 text-gray-500"})]})]})}),(0,se.jsxs)("td",{class:"px-6 py-4 whitespace-no-wrap",children:[(0,se.jsx)("div",{class:"text-sm leading-5 text-gray-900",children:e.data.email}),(0,se.jsx)("div",{class:"text-sm leading-5 text-gray-500"})]}),(0,se.jsx)("td",{class:"px-6 py-4 whitespace-no-wrap",children:(0,se.jsx)("span",{class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:e.data.name})}),(0,se.jsx)("td",{class:"px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-500",children:e.data.password}),(0,se.jsx)("td",{class:"px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-500",children:e.data.admin}),(0,se.jsx)("td",{class:"px-6 py-4 whitespace-no-wrap text-sm leading-5 text-green-500 cursor-pointer]",children:"Edit"})]})}))})]})})})})})]})})};var qN=function(){return(0,se.jsx)("div",{className:"my-20",children:(0,se.jsxs)("div",{className:"container mx-auto",children:[(0,se.jsx)("h1",{className:"text-5xl text-center text-red-500 tracking-widest font-extrabold",children:"Error !!"}),(0,se.jsx)("p",{className:"capitalize text-center my-10 font-extrabold",children:"You just enter a wrong url"}),(0,se.jsx)("div",{className:"flex items-center justify-center",children:(0,se.jsx)(Z,{to:"/",children:(0,se.jsx)("button",{className:"btn btn-success ",children:"Go back to home page"})})})]})})};var KN=function(){return(0,se.jsxs)("div",{children:[(0,se.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/flowbite@1.4.4/dist/flowbite.min.css"}),(0,se.jsxs)("div",{class:"max-w-2xl mx-auto",children:[(0,se.jsxs)("form",{class:"flex items-center",children:[(0,se.jsx)("label",{for:"voice-search",class:"sr-only",children:"Search"}),(0,se.jsxs)("div",{class:"relative w-full",children:[(0,se.jsx)("div",{class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:(0,se.jsx)("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,se.jsx)("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})})}),(0,se.jsx)("input",{type:"text",id:"voice-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search Mockups, Logos, Design Templates...",required:!0}),(0,se.jsx)("button",{type:"button",class:"flex absolute inset-y-0 right-0 items-center pr-3",children:(0,se.jsx)("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,se.jsx)("path",{"fill-rule":"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z","clip-rule":"evenodd"})})})]}),(0,se.jsxs)("button",{type:"submit",class:"inline-flex items-center py-2.5 px-3 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[(0,se.jsx)("svg",{class:"mr-2 -ml-1 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,se.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search"]})]}),(0,se.jsxs)("p",{class:"mt-5",children:["This search bar component is part of a larger, open-source library of Tailwind CSS components. Learn more by going to the official ",(0,se.jsx)("a",{class:"text-blue-600 hover:underline",href:"#",target:"_blank",children:"Flowbite Documentation"}),"."]}),(0,se.jsx)("script",{src:"https://unpkg.com/flowbite@1.4.0/dist/flowbite.js"})]})]})};function GN(){var e=jN(),t=e.resultSeach,n=(e.setresultSeach,fN()),r=n.user;n.randommingId;[].push(r);var i=le(),a=i.state.cart,o=i.dispatch,s=fN(),u=s.showAlert,c=(s.producItem,z());return(0,se.jsx)("div",{className:"bg-white",children:(0,se.jsxs)("div",{className:"max-w-2xl min-w-2xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:max-w-7xl lg:px-8 ",children:[(0,se.jsx)("h2",{className:"text-2xl font-extrabold tracking-tight text-gray-900",children:"Search List"}),(0,se.jsx)(KN,{}),(0,se.jsx)("form",{className:"mt-6 grid grid-cols-1 gap-y-10 gap-x-6 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8",children:t?t.map((function(e,t){return(0,se.jsx)("form",{className:"relative",children:(0,se.jsxs)("div",{className:"group relative ",children:[(0,se.jsx)("div",{className:"relative w-full md:h-[450px] h-[350px] min-h-80 bg-gray-200 aspect-w-1 aspect-h-1 rounded-2xl group-hover:opacity-75 lg:h-150 lg:aspect-none flex items-center justify-center px-2 overflow-hidden",children:(0,se.jsx)("img",{src:e.imageSrc,alt:e.imageAlt,className:"object-cover object-center py-14 h-full absolute"})}),(0,se.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,se.jsxs)("div",{children:[(0,se.jsx)("h3",{className:"text-sm text-gray-700",children:(0,se.jsxs)("a",{href:e.href,children:[(0,se.jsx)("span",{"aria-hidden":"true",className:"absolute inset-0"}),e.name]})}),(0,se.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.color})]}),(0,se.jsx)("div",{children:(0,se.jsx)("div",{className:"relative z-10",children:a.some((function(t){return t.id===e.id}))?(0,se.jsx)("button",{onClick:function(t){t.preventDefault(),o({type:"REMOVE_FROM_CART",payload:e},u(!0,"success","item Added"))},className:"border py-2 px-9 relative text-red-300",children:"Remove in Cart"}):(0,se.jsx)("button",{onClick:function(t){t.preventDefault(),o({type:"ADD_TO_CART",payload:e},u(!0,"success","item Added"))},className:"border py-2 px-9 relative ",children:"Add To Cart"})})}),(0,se.jsxs)("div",{children:[(0,se.jsx)("h3",{className:"text-sm text-gray-700",children:(0,se.jsxs)("a",{href:e.href,children:[(0,se.jsx)("span",{"aria-hidden":"true",className:"absolute inset-0"}),(0,se.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[" ",(0,se.jsx)("span",{})," N",e.price]}),"                      "]})}),(0,se.jsx)("p",{className:"mt-1 text-sm text-gray-500 underline absolute cursor-pointer",onClick:function(){return c("/ReviewBuy/".concat(e.id))},children:"more"})]})]})]})},e.id)})):(0,se.jsx)("div",{className:"text-center text-red-600",children:"No Items to Fetch"})})]})})}var HN=function(){var e=fN(),t=e.alert,n=e.showAlert;return le().state.products,(0,se.jsxs)(se.Fragment,{children:[t.show&&(0,se.jsx)(VN,s(s({},t),{},{removeAlert:n})),(0,se.jsxs)(Y,{children:[(0,se.jsx)(vN,{}),(0,se.jsxs)(W,{children:[(0,se.jsx)(G,{path:"/",element:(0,se.jsx)(RN,{})}),(0,se.jsx)(G,{path:"/about",element:(0,se.jsx)(bN,{})}),(0,se.jsx)(G,{path:"item",element:(0,se.jsx)(kN,{})}),(0,se.jsx)(G,{path:"/price",element:(0,se.jsx)(EN,{})}),(0,se.jsx)(G,{path:"/list",element:(0,se.jsx)(yN,{})}),(0,se.jsx)(G,{path:"/Feature",element:(0,se.jsx)(gN,{})}),(0,se.jsx)(G,{path:"/Sidebar",element:(0,se.jsx)(SN,{})}),(0,se.jsx)(G,{path:"/modal",element:(0,se.jsx)(PN,{})}),(0,se.jsx)(G,{path:"/ReviewBuy/:id",element:(0,se.jsx)(pN,{})}),(0,se.jsx)(G,{path:"/cart",element:(0,se.jsx)(dN,{})}),(0,se.jsx)(G,{path:"/Admin",element:(0,se.jsx)(ON,{})}),(0,se.jsx)(G,{path:"/login",element:(0,se.jsx)(MN,{})}),(0,se.jsx)(G,{path:"/UserDashboard",element:(0,se.jsx)(UN,{})}),(0,se.jsx)(G,{path:"/signup",element:(0,se.jsx)(FN,{})}),(0,se.jsx)(G,{path:"/AdminPost",element:(0,se.jsx)(LN,{})}),(0,se.jsx)(G,{path:"/promo",element:(0,se.jsx)(TN,{})}),(0,se.jsx)(G,{path:"/userlist",element:(0,se.jsx)(zN,{})}),(0,se.jsx)(G,{path:"/itemize",element:(0,se.jsx)(BN,{})}),(0,se.jsx)(G,{path:"/SearchList",element:(0,se.jsx)(GN,{})}),(0,se.jsx)(G,{path:"*",element:(0,se.jsx)(qN,{})})]}),(0,se.jsx)(wN,{})]})]})};var WN=function(){return(0,se.jsx)("div",{className:"Appu",children:(0,se.jsx)(HN,{})})},QN=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,se.jsx)(r.StrictMode,{children:(0,se.jsx)(hN,{children:(0,se.jsx)(_N,{children:(0,se.jsx)(ce,{children:(0,se.jsx)(AN,{children:(0,se.jsx)(WN,{})})})})})})),QN()}()}();
//# sourceMappingURL=main.b28fb498.js.map